exports.id=729,exports.ids=[729],exports.modules={14555:(e,t,a)=>{"use strict";a.d(t,{J:()=>G});var s=a(10326),n=a(17577),r=a(19953);let l=(0,n.memo)(r.U,(e,t)=>e.children===t.children&&e.className===t.className);var i=a(73373),o=a(21328),d=a(91002),c=a(72834),m=a(72942),u=a(98161),p=a(24805),h=a(60162),g=a(88309),x=a(45541),f=a(71206),b=a(77863),j=a(17948);a(80839),a(48607);var v=a(56602),k=a(10498),w=a(80165),y=a(11299),N=a(77710),C=a(95759),P=a(86391),A=a(413),S=a(37984),_=a(32933),z=a(8600),T=a(14831),$=a(35047),M=a(85999),I=a(75653),O=a(76812);let R=I.fC,F=I.xz,L=I.h_;I.x8;let D=n.forwardRef(({className:e,...t},a)=>s.jsx(I.aV,{ref:a,className:(0,b.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e),...t}));D.displayName=I.aV.displayName;let Z=n.forwardRef(({className:e,children:t,...a},n)=>(0,s.jsxs)(L,{children:[s.jsx(D,{}),(0,s.jsxs)(I.VY,{ref:n,className:(0,b.cn)("data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 fixed left-1/2 top-1/2 z-50 mx-auto grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 rounded-xl bg-content2 p-6 shadow-lg duration-200 dark:shadow-none",e),...a,children:[t,(0,s.jsxs)(I.x8,{className:"close focus:ring-ring data-[state=open]:text-muted-foreground absolute right-6 top-6 flex h-7 w-7 items-center justify-center rounded-lg border border-content3 opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(O.Pxu,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Z.displayName=I.VY.displayName;let U=({className:e,...t})=>s.jsx("div",{className:(0,b.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});U.displayName="DialogHeader";let E=n.forwardRef(({className:e,...t},a)=>s.jsx(I.Dx,{ref:a,className:(0,b.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));E.displayName=I.Dx.displayName;let V=n.forwardRef(({className:e,...t},a)=>s.jsx(I.dk,{ref:a,className:(0,b.cn)("text-muted-foreground text-sm",e),...t}));function q({title:e,content:t,children:a,open:n,onOpenChange:r}){return(0,s.jsxs)(R,{open:n,onOpenChange:r,children:[s.jsx(F,{children:a}),s.jsx(Z,{children:(0,s.jsxs)(U,{children:[e&&s.jsx(E,{children:e}),s.jsx(V,{children:t})]})})]})}V.displayName=I.dk.displayName;let Y=["javascript","typescript","js","ts","typescriptreact"],K=(0,n.memo)(({language:e,value:t,className:a})=>{let r;let[l,i]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1),{messages:m,setMessages:I,scrollToBottom:O}=(0,n.useContext)(p.p),R=(0,x.Y)(e=>e.selectedProvider),F=(0,$.usePathname)().split("/")[1],[L,D]=(0,n.useState)(!1),[Z,U]=(0,n.useState)(!1),{loginFromEventSource:E}=(0,v.R)(),{userData:V}=(0,h.v)(),{currentProviderModel:K}=(0,x.o)(),G=K[R],B=(0,g.X)(e=>e.agents);(0,n.useEffect)(()=>{if(G.fromMarketplace){let e=B.find(e=>e.id===G.id);e?.tools?.[0]==="code-interpreter"&&U(!0)}},[B,G.fromMarketplace,G.id]);let{theme:W}=(0,T.F)(),H=()=>{(0,u.zp)(t).then(()=>{i(!0),setTimeout(()=>{i(!1)},2e3)})},J=["python","py"].includes(e.toLowerCase())&&"codegptplusbeta"===R&&Z,X=async()=>{c(!0);let e=[...m],a=e.length-1,s=async({times:e})=>{0!==e&&console.log(`trying to run code ${e} times`);let a=await fetch(`http://localhost:54112/${F}/api/${R}/code_interpreter`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})});if(!a.ok){let t=await a.json();if(console.log({responseData:t}),e>=1)throw M.A.error(`${t.message}`),c(!1),Error("Error running code");return s({times:e+1})}return a.json()},n=await s({times:0}),r="";if(n.logs.stdout.length>0){let e=n.logs.stdout[0];r+=`

Result:
${"```zsh\n"+e+"```"}`}if(n.results.length>0){let e=n?.results[0]?.png||n?.results[0]?.jpeg||n?.results[0]?.svg;r+=`

Image Result:

![Code Interpreter Result](data:image/png;base64,${e})`}e[a].content+=r,I([]),I(e),c(!1),setTimeout(()=>{O()},300)},Q=(0,s.jsxs)("div",{className:"grid gap-6",children:[s.jsx("section",{className:"mt-0.5",children:(0,s.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[(0,s.jsxs)("div",{className:"flex select-none items-center gap-2",children:[s.jsx(k.Z,{className:"h-6 w-6 shrink-0 text-default-500"}),s.jsx("p",{className:"text-lg",children:"Code Interpreter"})]}),s.jsx(y.z,{variant:"flat",size:"sm",startContent:s.jsx(w.Z,{className:"mb-px aspect-square size-4 shrink-0 text-default-500"}),classNames:{content:"text-default-500 text-xs",base:"px-2"},children:"Sign-in required"})]})}),s.jsx("section",{className:"grid gap-2",children:s.jsx("article",{className:"grid gap-4",children:s.jsx("p",{className:"text-medium",children:'The "code interpreter" function executes code and performs calculations, enabling interactive technical queries and data analysis in python.'})})}),(0,s.jsxs)("section",{className:"grid gap-4",children:[s.jsx(N.j,{}),(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(C.A,{className:"w-fit border border-primary-400/10 text-primary-400",variant:"flat",color:"primary",onPress:async()=>{let e=crypto.randomUUID();await (0,u.Yo)(`${f.Ft}/signup?source=vscode&distinct_id=${await (0,v.k)()}&connection_id=${e}`),E(e),(0,j.q)({eventName:"ads",object:"adButton",message:`Interpreter ${V?.plan?.includes("trial")?"Upgrade":"SignUp"}`})},children:V?.plan?.includes("trial")?"Upgrade":"Sign Up"}),s.jsx(C.A,{variant:"bordered",className:"w-fit border",onPress:()=>{(0,u.os)("https://docs.codegpt.co/docs/tutorial-features/code_interpreter")},children:"Learn more"})]})]})]});try{r=P.Z.highlight(t,{language:Y.includes(e.toLowerCase())?"tsx":e}).value}catch{r=P.Z.highlight(t,{language:"plaintext"}).value}return s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:(0,b.cn)("chat codeblock w-full overflow-auto whitespace-pre-wrap break-words text-sm","dark"===W?"darkmode":"lightmode"),children:[(0,s.jsxs)("header",{className:"sticky -top-4 z-10 flex items-center justify-between border-b border-content3 bg-content1/90 px-2 py-1.5 text-xs text-default-500 backdrop-blur-sm",children:[s.jsx("span",{className:"language-label text-sm capitalize",children:function(e){let t=o.a2.find(t=>t.value===e||t.label===e);return(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[s.jsx("span",{style:{height:"1rem"},"data-language":t?.label}),s.jsx("span",{className:"text-xs",children:t?.label??e})]})}(e)}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[J?V?.loggedIn?s.jsx(C.A,{size:"sm",variant:"light",className:"text-default-500",isLoading:d,onPress:()=>{X(),(0,M.A)("Running Code"),(0,j.q)({eventName:"clickOver",target:"RunCodeInterpreter"})},startContent:d?null:s.jsx(A.Z,{className:"h-4 w-4 shrink-0"}),children:"Run code"}):s.jsx(q,{open:L,onOpenChange:D,content:Q,children:s.jsx(C.A,{size:"sm",variant:"light",className:"text-default-500",startContent:s.jsx(A.Z,{className:"h-4 w-4 shrink-0"}),onPress:()=>{D(!0),(0,j.q)({eventName:"clickOver",target:"RunCodeInterpreterModalWithoutAccount"})},children:"Run code"})}):null,(0,s.jsxs)(C.A,{size:"sm",variant:"light",className:"text-default-500",onPress:()=>{(0,u.Nq)(t).catch(()=>{console.error("Error inserting code")}),(0,j.q)({eventName:"insertCode",code_language:e}),M.A.success("Code inserted",{duration:3e3,dismissible:!0,closeButton:!0})},children:[s.jsx(S.Z,{className:"h-4 w-4 shrink-0"}),"Insert code"]}),s.jsx(C.A,{size:"sm",variant:"light",className:"text-default-500",isIconOnly:!0,startContent:l?s.jsx(_.Z,{className:"h-4 w-4 shrink-0"}):s.jsx(z.Z,{className:"h-4 w-4 shrink-0"}),onPress:()=>{H(),(0,j.q)({eventName:"copyCode",code_language:e}),M.A.success("Code copied to clipboard",{duration:3e3,dismissible:!0,closeButton:!0})}})]})]}),s.jsx("pre",{className:"direction-ltr word-spacing-normal word-break-normal tab-size[2] z-0 m-0 overflow-auto hyphens-none whitespace-pre p-3 text-left leading-6",children:s.jsx("code",{className:"direction-ltr word-spacing-normal word-break-normal tab-size[2] hyphens-none whitespace-pre text-left leading-6 ",dangerouslySetInnerHTML:{__html:r}})})]})})});K.displayName="CodeBlock";let G=({content:e,codeBlockClassName:t,isLoading:a})=>s.jsx(s.Fragment,{children:s.jsx(l,{rehypePlugins:[[c.Z]],remarkPlugins:[m.Z],allowedElements:["a","p","h1","h2","h3","h4","h5","h6","ol","ul","li","code","pre","strong","em","del","u","img","b","i","blockquote","br","hr","span","table","thead","tbody","tr","th","td","caption","colgroup",...a?[]:["div"]],skipHtml:!0,urlTransform:e=>e,unwrapDisallowed:!0,components:{div({node:e,children:t}){let{type:a,href:n}=e.properties;return"link"===a&&n?s.jsx(i.default,{href:n,isExternal:!0,className:"w-full cursor-pointer",children:t}):s.jsx("div",{children:t})},code({node:e,inline:t,className:a,children:n,...r}){let l=a?.replaceAll("language-",""),i=o.a2.find(e=>e.value===l),c=String(n);return"undefined"===c?null:!t&&a?s.jsx(K,{language:i?.label??l??"",value:c}):s.jsx(d.z,{size:"sm",className:"whitespace-break-spaces",children:c})},a:({node:e,children:t})=>s.jsx("span",{"attr-type":"link","attr-href":e.url,children:t})},children:e})})},24805:(e,t,a)=>{"use strict";a.d(t,{p:()=>tk,default:()=>tw});var s=a(10326),n=a(98161),r=a(45541),l=a(35047),i=a(58838);let o=async({provider:e,port:t})=>new Promise(async a=>{setTimeout(async()=>{let s={maxTokens:512,temperature:0,windowMemory:10},n=await fetch(`http://localhost:54112/${t}/api/${e}/config`).then(e=>e.json()).catch(()=>s);a({...s,...n})},500)});function d(){let e=(0,r.Y)(e=>e.selectedProvider),t=(0,l.usePathname)().split("/")[1],{data:a,mutate:s,isLoading:n,isValidating:d}=(0,i.ZP)(`/api/agents/${e}/config`,()=>o({provider:e,port:t}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:0});return{configuration:a,isLoading:n??d,mutate:()=>new Promise(e=>{setTimeout(()=>{s().then(t=>{e(t)})},300)})}}var c=a(60114);let m=(0,c.Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}));var u=a(17948),p=a(75231),h=a(26799),g=a(9422),x=a(73181),f=a(77247),b=a(77710),j=a(15245),v=a(39207),k=a(17577),w=a(85999),y=a(71206),N=a(56602),C=a(95759);let P={codegptplus:{name:"CodeGPT Plus (legacy)",OAuthLogin:e=>(0,s.jsxs)(s.Fragment,{children:[s.jsx(C.A,{color:"primary",variant:"bordered",onClick:async()=>{await (0,n.Yo)("https://account.codegpt.co/external-signin"),e(!1)},children:"Connect to CodeGPT Plus (legacy)"}),s.jsx(b.j,{})]}),apikey:!0,apikey_placeholder:"CodeGPT Plus (legacy) ApiKey",connection_info_link:[{label:"Read more about CodeGPT Plus (legacy) apikey",link:"https://plus.codegpt.co/settings/apikey"}],max_tokens:!0,temperature:!0},codegptplusbeta:{name:"CodeGPT Plus",OAuthLogin:e=>{let{loginFromEventSource:t}=(0,N.R)();return s.jsx(s.Fragment,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 content-stretch items-center justify-center gap-2",children:[s.jsx(C.A,{color:"primary",fullWidth:!0,onPress:async()=>{let a=crypto.randomUUID();await (0,n.Yo)(`${y.Ft}/signup?source=vscode&distinct_id=${await (0,N.k)()}&connection_id=${a}`),t(a),e(!1)},children:"Sign Up"}),s.jsx(C.A,{variant:"bordered",fullWidth:!0,className:"border",onPress:async()=>{let a=crypto.randomUUID();await (0,n.Yo)(`${y.Ft}/login?source=vscode&distinct_id=${await (0,N.k)()}&connection_id=${a}`),t(a),e(!1)},children:"Sign In"})]})})},apikey:!0,apikey_placeholder:"CodeGPT Plus ApiKey",org:!0,connection_info_link:[{label:"Read more about CodeGPT Plus apikey",link:`${y.Ft}/en/apikeys`}],max_tokens:!0,temperature:!0},codegptenterprise:{name:"CodeGPT Enterprise",apikey:!0,apikey_placeholder:"CodeGPT Enterprise ApiKey",org:!0,connection_info_link:[{label:"Read more about CodeGPT Plus apikey",link:`${y.Ft}/en/apikeys`}],customLink:!0,customLink_placeholder:"Custom Link (https://{API URL}/api/v1)",max_tokens:!0,temperature:!0},openai:{name:"OpenAI",apikey:!0,org:!0,connection_info_link:[{label:"Read more about OpenAI apikey",link:"https://platform.openai.com/api-keys"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about OpenAI config",link:"https://platform.openai.com/docs/api-reference/chat/create"}]},azure:{name:"Azure",apikey:!0,customLink:!0,connection_info_link:[{label:"Read more about Azure apikey",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Azure (OpenAI) config",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#chat-completions"}]},cohere:{name:"Cohere",apikey:!0,connection_info_link:[{label:"Read more about Cohere apikey",link:"https://dashboard.cohere.com/api-keys"}],temperature:!0,config_info_link:[{label:"Read more about Cohere config",link:"https://docs.cohere.com/docs/cochat-beta#define-the-model-settings"}]},anthropic:{name:"Anthropic",apikey:!0,connection_info_link:[{label:"Read more about Anthropic apikey",link:"https://console.anthropic.com/login"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Anthropic config",link:"https://docs.anthropic.com/claude/reference/messages_post"}]},googleaistudio:{name:"Google AI Studio",apikey:!0,apikey_placeholder:"ApiKey (Google-AI-Studio models)",connection_info_link:[{label:"Read more about Google-Ai-Studio",link:"https://makersuite.google.com/app/apikey"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Google-Ai-Studio config",link:"https://ai.google.dev/docs/gemini_api_overview"}]},vertex:{name:"Vertex",customLink:!0,customLink_placeholder:"Custom Link (Vertex models)",oAuthFile:!0,oAuthFile_placeholder:'Upload JSON file ↑ (Vertex "apikey" (credentials.json))',connection_info_link:[{label:"Read more about Vertex credentials",link:"https://developers.google.com/workspace/guides/create-credentials"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Vertex config",link:"https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/gemini?hl=es-419#request_body"}]},ollama:{name:"Ollama",disableConnection:!0},fireworksai:{name:"FireworksAI",apikey:!0,connection_info_link:[{label:"Read more about FireworksAI apikey",link:"https://app.fireworks.ai/users?tab=apps"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about FireworksAI config",link:"https://readme.fireworks.ai/reference/createchatcompletion"}]},mistral:{name:"Mistral",apikey:!0,connection_info_link:[{label:"Read more about Mistral apikey",link:"https://console.mistral.ai/user/api-keys/"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Mistral config",link:"https://docs.mistral.ai/api"}]},huggingface:{name:"HuggingFace",apikey:!0,connection_info_link:[{label:"Read more about HuggingFace apikey",link:"https://huggingface.co/settings/tokens"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about HuggingFace config",link:"https://huggingface.co/docs/api-inference/detailed_parameters?code=js"}]},custom:{name:"Custom",apikey:!0,customLink:!0,max_tokens:!0,temperature:!0},bedrock:{name:"Bedrock",region:!0,access_key_id:!0,secret_access_key:!0,session_token:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Bedrock connection info",link:"https://aws.amazon.com/bedrock/"}]},perplexity:{name:"Perplexity",apikey:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Perplexity apikey",link:"https://docs.perplexity.ai/reference/post_chat_completions"}]},lmstudio:{name:"LM Studio",max_tokens:!0,temperature:!0,disableConnection:!0},groq:{name:"Groq",apikey:!0,connection_info_link:[{label:"Read more about Groq apikey",link:"https://wow.groq.com/"}],max_tokens:!0,temperature:!0},nvidia:{name:"Nvidia",apikey:!0,connection_info_link:[{label:"Read more about Nvidia apikey",link:"https://build.nvidia.com/"}],max_tokens:!0,temperature:!0},deepseek:{name:"DeepSeek",apikey:!0,connection_info_link:[{label:"Read more about DeepSeek apikey",link:"https://platform.deepseek.com/"}],max_tokens:!0,temperature:!0}};function A(){let{configuration:e,mutate:t}=d(),a=P[(0,r.Y)(e=>e.selectedProvider)],l=e?.temperature??0,i=e?.windowMemory??10,[o,c]=(0,k.useState)(!1),[y,N]=(0,k.useState)(l?l>.7?"creative":l>.2?"balanced":"precise":"precise"),[C,A]=(0,k.useState)(!1),{isOpen:S,setOpen:_}=m(),z=async(e,a)=>{c(!0),(0,u.q)({eventName:"changeValue",target:a,value:e.toString()}),"MaxTokens"===a&&await (0,n.af)(e.toString()),"Temperature"===a&&await (0,n.MQ)(e.toString()),"WindowMemory"===a&&await (0,n.Dz)(e.toString()),t().then(()=>{w.A.success("Configuration updated"),c(!1)})};return s.jsx(s.Fragment,{children:s.jsx(g.R,{isOpen:S,placement:"top",scrollBehavior:"inside",size:"xl",classNames:{body:"px-8 pt-8 pb-10",closeButton:"h-10 w-10 p-0 flex items-center justify-center rounded-full absolute top-3 right-6 bg-content2 dark:bg-content2"},onOpenChange:async()=>{t(),_(!1)},children:s.jsx(x.A,{children:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(f.I,{children:[(0,s.jsxs)("div",{className:"grid gap-2 border-0 pb-4 font-normal",children:[(0,s.jsxs)("div",{className:"flex select-none items-center gap-2",children:[s.jsx(p.Z,{className:"h-6 w-6 shrink-0 text-default-500"}),(0,s.jsxs)("p",{children:[s.jsx("span",{children:a.name})," "," Settings"]})]}),s.jsx("p",{className:"text-sm text-default-500",children:"Ensure to properly configure your providers parameters here"})]}),s.jsx(b.j,{}),(0,s.jsxs)("div",{className:"grid gap-8 pt-4",children:[a.temperature&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(j.L,{isDisabled:o,label:(0,s.jsxs)("p",{className:"flex items-center justify-between gap-2",children:[s.jsx("span",{children:"Conversation Style"}),s.jsx("span",{children:"|"}),s.jsx("span",{children:y})]}),"aria-label":"Temperature",color:"primary",minValue:0,maxValue:1,step:.01,defaultValue:l,classNames:{label:"capitalize"},onChangeEnd:e=>{N(Number(e)?Number(e)>.7?"creative":Number(e)>.2?"balanced":"precise":"precise"),z(Number(e),"Temperature")}}),(0,s.jsxs)("p",{className:"flex gap-1 text-xs text-default-500",children:[s.jsx(h.Z,{className:"h-4 w-4 shrink-0"}),"Temperature or creativity of the AI model. Higher values can lead to more creative responses, but may also lead to more unaccurate responses."]})]}),s.jsx(b.j,{})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[s.jsx(j.L,{isDisabled:o,label:"Memory","aria-label":"windowMemory",minValue:0,maxValue:C?10:100,defaultValue:i,onChangeEnd:e=>z(Number(e),"WindowMemory")}),(0,s.jsxs)("p",{className:"flex gap-1 text-xs text-default-500",children:[s.jsx(h.Z,{className:"h-4 w-4 shrink-0"}),"Number of previous messages to consider when generating a response."]})]})]})]}),a.config_info_link&&a.config_info_link.length>0&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(b.j,{}),s.jsx(v.R,{children:s.jsx("p",{className:"mx-auto w-full text-center text-xs text-default-500",children:a.config_info_link?.map((e,t)=>s.jsx("span",{children:e.label&&s.jsx("a",{href:e.link,target:"_blank",rel:"noreferrer",onClick:()=>n.Yo(e.link),children:e.label})},t))})})]})]})})})})}var S=a(96424),_=a(12523),z=a(43955),T=a(11184),$=a(32170),M=a(35953),I=a(96229),O=a(39258),R=a(15232),F=a(98736),L=a(23351),D=a(11573),Z=a(77017),U=a(33350),E=a(23920);function V(){let{isOpen:e,setOpen:t}=(0,T.U)(),[a,l]=(0,k.useState)(""),[i,o]=(0,k.useState)(""),[d,c]=(0,k.useState)(""),[m,u]=(0,k.useState)(""),[p,h]=(0,k.useState)(""),[b,j]=(0,k.useState)(""),[y,N]=(0,k.useState)(""),[A,V]=(0,k.useState)(!1),{isConnected:q,mutate:Y}=(0,z.T)(),K=async e=>{let t=e[0];if("json"!==t.name.split(".").pop()){w.A.error("File type not supported",{position:"top-center",dismissible:!0,duration:5e3});return}try{let e=await t.text();(await (0,n.vC)(e)).ok?w.A.success("File uploaded",{position:"top-center"}):w.A.error("Error uploading file",{position:"top-center"})}catch(e){w.A.error("Error processing json")}},{getRootProps:G,getInputProps:B}=(0,E.uI)({onDrop:K,multiple:!1,useFsAccessApi:!1}),W=(0,r.Y)(e=>e.selectedProvider),H=P[W],J=(0,k.useCallback)(async()=>{await Promise.all([a?(0,n.Lb)(a).then(()=>l("")):null,i?(0,n.CG)(i).then(()=>o("")):null,d?(0,n.rM)(d).then(()=>c("")):null,m?(0,n.TF)(m).then(()=>u("")):null,p?(0,n.NV)(p).then(()=>h("")):null,b?(0,n.lk)(b).then(()=>j("")):null,y?(0,n.W0)(y).then(()=>N("")):null]),Y(),t(!1)},[p,a,d,Y,i,m,b,y,t]),X=()=>{H.apikey&&(0,n.Lb)("").then(()=>l("")),H.org&&(0,n.CG)("").then(()=>o("")),H.customLink&&(0,n.rM)("").then(()=>c("")),H.region&&(0,n.TF)("").then(()=>u("")),H.access_key_id&&(0,n.NV)("").then(()=>h("")),H.secret_access_key&&(0,n.lk)("").then(()=>j("")),H.session_token&&(0,n.W0)("").then(()=>N("")),"CodeGPT Plus"===H.name&&(0,S.j)({accessToken:"",refreshToken:"",expiresAt:""}),Y()},Q=(e,t)=>{let a=e.target.value;if(("x"===e.key.toLowerCase()||"KeyX"===e.code)&&(e.metaKey||e.ctrlKey)&&e.target instanceof HTMLInputElement){e.preventDefault();let s=e.target,{selectionStart:r,selectionEnd:i}=s;if(null!==r&&null!==i&&r!==i){let e=s.value.substring(r,i);(0,n.zp)(e).then(()=>{let e=a.substring(0,r)+a.substring(i);"apikey"===t&&l(e),"orgid"===t&&o(e),"customlink"===t&&c(e),"region"===t&&u(e),"accesskeyid"===t&&h(e),"secretaccesskey"===t&&j(e),"sessiontoken"===t&&N(e)})}}("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,n.M1)().then(s=>{let{selectionStart:n,selectionEnd:r}=e.target,i=a.substring(0,n??a.length)+s+a.substring(r??a.length);"apikey"===t&&l(i),"orgid"===t&&o(i),"customlink"===t&&c(i),"region"===t&&u(i),"accesskeyid"===t&&h(i),"secretaccesskey"===t&&j(i),"sessiontoken"===t&&N(i)})),(0,$.g)(e)};return s.jsx(s.Fragment,{children:s.jsx(g.R,{isOpen:e,placement:"center",scrollBehavior:"inside",onOpenChange:()=>{Y(),t(!1)},children:s.jsx(x.A,{children:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(Z.k,{className:"flex flex-row items-center gap-4",children:[s.jsx("div",{className:"size-fit",children:s.jsx(_.T,{provider:W,width:48,height:48,className:"rounded-lg border border-default-200"})}),(0,s.jsxs)("div",{className:"flex flex-col font-normal",children:[(0,s.jsxs)("span",{className:"select-none",children:["Connect to ",H.name]}),s.jsx("span",{className:"text-small text-default-500",children:"CodeGPT Plus"!==H.name?"Before engaging with this model, ensure proper configuration or connection.":"Connect to CodeGPT Plus to use the latest features for free."})]})]}),s.jsx(f.I,{children:q?s.jsx(C.A,{color:"danger",variant:"flat",className:"border border-danger-500/20",onPress:X,children:"CodeGPT Plus"===H.name?"Disconnect from CodeGPT Plus":"Disconnect"}):(0,s.jsxs)(s.Fragment,{children:[H.OAuthLogin&&H.OAuthLogin(t),"CodeGPT Plus"!==H.name&&(0,s.jsxs)(s.Fragment,{children:[H.apikey&&s.jsx(U.Y,{value:a,onChange:e=>l(e.target.value),onKeyDown:e=>Q(e,"apikey"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:H.apikey_placeholder??"ApiKey",startContent:s.jsx(M.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,s.jsxs)(s.Fragment,{children:[s.jsx(C.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onPress:()=>V(!A),children:A?s.jsx(I.Z,{className:"size-5"}):s.jsx(O.Z,{className:"size-5"})}),s.jsx(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,n.M1)().then(e=>l(e)),children:"Paste"})]}),type:A?"text":"password",isRequired:!0}),H.org&&s.jsx(U.Y,{value:i,onChange:e=>o(e.target.value),onKeyDown:e=>Q(e,"orgid"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Organization ID (optional)",startContent:s.jsx(R.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:s.jsx(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,n.M1)().then(e=>o(e)),children:"Paste"}),type:"search"}),H.customLink&&s.jsx(U.Y,{value:d,onChange:e=>c(e.target.value),onKeyDown:e=>Q(e,"customlink"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:H.customLink_placeholder??"Custom Link",startContent:s.jsx(F.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:s.jsx(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,n.M1)().then(e=>c(e)),children:"Paste"}),type:"search"}),H.region&&s.jsx(U.Y,{value:m,onChange:e=>u(e.target.value),onKeyDown:e=>Q(e,"region"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Region",startContent:s.jsx(L.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:s.jsx(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,n.M1)().then(e=>u(e)),children:"Paste"}),type:"search"}),H.access_key_id&&s.jsx(U.Y,{value:p,onChange:e=>h(e.target.value),onKeyDown:e=>Q(e,"accesskeyid"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Access Key ID",startContent:s.jsx(M.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:s.jsx(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,n.M1)().then(e=>h(e)),children:"Paste"}),type:"search"}),H.secret_access_key&&s.jsx(U.Y,{value:b,onChange:e=>j(e.target.value),onKeyDown:e=>Q(e,"secretaccesskey"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Secret Access Key",startContent:s.jsx(M.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,s.jsxs)(s.Fragment,{children:[s.jsx(C.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>V(!A),className:"cursor-pointer",children:A?s.jsx(I.Z,{className:"size-5"}):s.jsx(O.Z,{className:"size-5"})}),s.jsx(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,n.M1)().then(e=>j(e)),children:"Paste"})]}),type:A?"text":"password"}),H.session_token&&s.jsx(U.Y,{value:y,onChange:e=>N(e.target.value),onKeyDown:e=>Q(e,"sessiontoken"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Session Token",startContent:s.jsx(M.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,s.jsxs)(s.Fragment,{children:[s.jsx(C.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>V(!A),className:"cursor-pointer",children:A?s.jsx(I.Z,{className:"size-5"}):s.jsx(O.Z,{className:"size-5"})}),s.jsx(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,n.M1)().then(e=>N(e)),children:"Paste"})]}),type:A?"text":"password"}),H.oAuthFile&&(0,s.jsxs)("div",{...G(),children:[s.jsx("input",{...B(),className:"hidden"}),s.jsx("div",{className:"cursor-pointer select-none",children:s.jsx(U.Y,{value:"","aria-label":"oAuthFile",size:"lg",labelPlacement:"outside",variant:"bordered",className:"pointer-events-none",classNames:{input:"pointer-events-none text-sm"},placeholder:H.oAuthFile_placeholder??`Upload JSON file \u{2191}`,startContent:s.jsx(D.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:s.jsx(C.A,{variant:"bordered",color:"default",size:"sm",className:"border",onPress:()=>{},children:"Upload"})})})]}),s.jsx(C.A,{type:"submit",color:"default",onPress:J,children:"Connect"})]})]})}),s.jsx(v.R,{className:"justify-center",children:s.jsx("p",{className:"flex flex-col text-small text-default-500",children:"CodeGPT Plus"!==H.name&&H.connection_info_link?.map((e,t)=>s.jsx("span",{children:e.label&&s.jsx("a",{className:"text-primary-500 hover:underline",href:e.link,target:"_blank",rel:"noreferrer",onClick:()=>n.Yo(e.link),children:e.label})},t))})})]})})})})}var q=a(21328),Y=a(77863),K=a(20129),G=a(36902),B=a(84625),W=a(2505),H=a(1481),J=a(33175),X=a(77736),Q=a(19395),ee=a(48987),et=a(51773),ea=a(23661),es=a(86013),en=a(948),er=a(29414),el=a(14185),ei=a(88309),eo=a(65158),ed=a(40135);let ec=(0,k.forwardRef)((e,t)=>{let[a,n]=(0,k.useState)(0),r=t=>{let a=e.items[t];a&&e.command({id:a.id,label:a.label})},l=()=>{n((a+e.items.length-1)%e.items.length)},i=()=>{n((a+1)%e.items.length)},o=()=>{r(a)};return(0,k.useEffect)(()=>{n(0)},[e.items]),(0,k.useImperativeHandle)(t,()=>({onKeyDown:({event:e})=>"ArrowUp"===e.key?(l(),!0):"ArrowDown"===e.key?(i(),!0):"Enter"===e.key&&(o(),!0)})),s.jsx("ul",{className:"items grid w-80 rounded-xl bg-content3 p-1 text-sm text-default-500 shadow-lg",children:e.items?.length?e.items.map((e,t)=>s.jsx("li",{className:`item flex cursor-pointer items-center justify-between gap-1 rounded-lg border p-1 hover:border-content4 hover:bg-content4 hover:text-foreground ${t===a?"border-content4 bg-content4 text-foreground":"border-transparent bg-transparent"}`,children:(0,s.jsxs)("div",{onClick:()=>r(t),className:"flex items-center gap-1 transition-all",children:["command"===e.type?s.jsx(ed.Z,{className:"h-4 w-4 shrink-0"}):s.jsx("span",{className:"command command-with-icon relative h-6 items-center gap-1 overflow-hidden border-content4 p-0 text-2xl","data-language":e.label.split(".")[1]}),e.label]},t)},t)):s.jsx("div",{className:"item flex items-center gap-1 rounded-lg border px-2 py-1",children:"No result"})})});ec.displayName="SuggestionList";let em={items:({query:e})=>{let t=ei.X.getState().agents,{currentProviderModel:a}=r.o.getState(),{selectedProvider:s}=r.Y.getState(),n=a[s];return[...t.find(e=>e?.id===n?.id)?.tools?.includes("stackoverflow")?[{id:"stackOverflow",label:"Stack Overflow",type:"command"}]:[],{id:"findProblems",label:"Fix",type:"command"},{id:"explain",label:"Explain",type:"command"},{id:"refactor",label:"Refactor",type:"command"},{id:"document",label:"Document",type:"command"},{id:"unitTest",label:"Unit Test",type:"command"}].filter(t=>t.label.toLowerCase().startsWith(e.toLowerCase())).slice(0,6)},render:()=>{let e,t;return{onStart:a=>{a.clientRect&&(e=new en.M_(ec,{props:a,editor:a.editor}),t=(0,eo.ZP)("body",{getReferenceClientRect:a.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"top-start",maxWidth:`${window.innerWidth-24}px`}))},onUpdate(a){e.updateProps(a),a.clientRect&&t[0].setProps({getReferenceClientRect:a.clientRect})},onKeyDown:a=>"Escape"===a.event.key?(t[0].hide(),!0):e.ref?.onKeyDown(a),onExit(){t[0].destroy(),e.destroy()}}}},eu=null,ep=null;async function eh(){return ep&&clearTimeout(ep),eu?ep=setTimeout(async()=>{console.log("CACHE UPDATED ALLPATHS"),eu=await (0,n.yR)()},350):eu=await (0,n.yR)(),eu}let eg={items:async({query:e})=>[...await eh()].map(e=>{let t=e.split("/");return{label:t.length>3?`.../${t[t.length-3]}/${t[t.length-2]}/${t[t.length-1]}`:e,id:e,type:"path"}}).filter(t=>t.label.toLowerCase().includes(e.toLowerCase())).slice(0,10),render:()=>{let e,t;return{onStart:a=>{a.clientRect&&(e=new en.M_(ec,{props:a,editor:a.editor}),t=(0,eo.ZP)("body",{getReferenceClientRect:a.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"top-start",maxWidth:`${window.innerWidth-24}px`}))},onUpdate(a){e.updateProps(a),a.clientRect&&t[0].setProps({getReferenceClientRect:a.clientRect})},onKeyDown:a=>"Escape"===a.event.key?(t[0].hide(),!0):e.ref?.onKeyDown(a),onExit(){t[0].destroy(),e.destroy()}}}};var ex=a(7261);function ef({size:e=4,color:t="current",className:a,label:n}){let r=`w-${e} h-${e}`;return s.jsx("div",{className:"flex items-center justify-center gap-1 text-xs text-default-500",children:s.jsx(ex.c,{size:"sm",color:"current",label:n,className:a,classNames:{base:r,wrapper:r,circle1:r,circle2:r}})})}var eb=a(60162);let ej=(0,c.Ue)(e=>({image:{base64:"",name:""},setImage:({base64:t,name:a})=>e({image:{base64:t,name:a}}),showTooltip:!1,setShowTooltip:t=>e({showTooltip:t})}));var ev=a(72278),ek=a(73891),ew=a(96345),ey=a(11299),eN=a(26092);function eC({isLoading:e}){let{selectedProvider:t,setSelectedProvider:a}=(0,r.Y)(),{userData:l}=(0,eb.v)(),{mutate:i}=(0,z.T)(),o=(0,T.U)(e=>e.setOpen),{image:d,setImage:c,setShowTooltip:m}=ej(),{loginFromEventSource:p}=(0,N.R)(),h=async e=>{let t=e[0],a=t.name.split(".").pop(),s=t.name;if(["png","jpg","jpeg","webp"].includes("image/"+a)){w.A.error("File type not supported",{position:"top-center",dismissible:!0,duration:5e3});return}try{let e=await new Promise((e,a)=>{let s=new FileReader;s.readAsDataURL(t),s.onload=()=>e(s.result),s.onerror=e=>a(e)});c({base64:e,name:s}),m(!0)}catch(e){w.A.error("Error uploading file")}},g=()=>{(0,u.q)({eventName:"clickOver",target:"uploadImage"})},{getInputProps:x,open:f}=(0,E.uI)({onDrop:h,multiple:!1,useFsAccessApi:!1,noClick:!0,accept:{"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],..."ollama"!==t&&{"image/webp":[".webp"]}}});return["codegptplusbeta","ollama"].includes(t)?l?.plan?.toLowerCase()!=="free"?(0,s.jsxs)(C.A,{size:"sm",isIconOnly:!0,variant:"bordered",onPress:()=>{g(),d.base64?c({base64:"",name:""}):f()},isDisabled:e,className:"border",children:[s.jsx("input",{...x(),className:"hidden"}),d.base64?s.jsx("div",{className:"relative h-full w-full overflow-hidden",style:{backgroundImage:`url(${d.base64})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}):s.jsx(ek.Z,{className:"h-4 w-4 shrink-0"})]}):s.jsx(ew.e,{classNames:{content:"bg-content2",base:"p-4 bg-transparent"},offset:0,content:(0,s.jsxs)("div",{className:"grid max-w-xs gap-4 px-1 py-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-xs font-bold uppercase",children:"Vision"}),s.jsx(ey.z,{variant:"flat",size:"sm",color:"primary",startContent:s.jsx(eN.Z,{className:"mb-px aspect-square size-3 shrink-0 text-primary-500"}),classNames:{content:"text-primary-500"},children:"Plus"})]}),s.jsx("span",{className:"text-md text-default-500",children:"Upload an image to use as a prompt for the model. Only available in CodeGPT and Ollama model providers."}),(0,s.jsxs)("div",{className:"mt-1 flex gap-2",children:[s.jsx(C.A,{className:"w-fit",size:"sm",onPress:async()=>{let e=crypto.randomUUID();await (0,n.Yo)(`${y.Ft}/signup?source=vscode&distinct_id=${await (0,N.k)()}&connection_id=${e}`),p(e),(0,u.q)({eventName:"ads",object:"adButton",message:`Vision ${l?.plan?.includes("trial")?"Upgrade":"SignUp"}`})},children:l?.plan?.includes("trial")?"Upgrade":"Sign Up"}),s.jsx(C.A,{variant:"bordered",className:"w-fit border",size:"sm",onPress:()=>{(0,n.os)("https://docs.codegpt.co/docs/tutorial-features/vision")},children:"Learn more"})]})]}),children:s.jsx(C.A,{size:"sm",onPress:()=>{g(),"codegptplusbeta"!==t&&((0,ev.$)(),a("codegptplusbeta"),i().then(()=>{o(!0)}))},variant:"bordered",isIconOnly:!0,className:"border",startContent:s.jsx(ek.Z,{className:"h-4 w-4 shrink-0"})})}):null}let eP=new el.H$("userCommand"),eA=new el.H$("userFile"),eS=J.hj.create({name:"keyboardHandler"});function e_(e){let t=q.a2.find(t=>t.value===e);return t?.label??e}function ez({onSubmit:e,isLoading:t,stop:a,clearChat:l,currentModel:i,modelState:o,providerState:d}){let[c,h]=(0,k.useState)(!1),[g,x]=(0,k.useState)(""),f=(0,k.useRef)(""),[b,j]=(0,k.useState)(!1),[v,y]=(0,k.useState)(!1),[N,P]=(0,k.useState)("");(0,er.Nr)(N,500);let[A,S]=(0,k.useState)(null),_=(0,k.useRef)(""),z=m(e=>e.setOpen),[T,$]=(0,k.useState)(!1),{isPopoverOpen:M,setIsPopoverOpen:I}=(0,r.Y)(),O=(0,en.jE)({extensions:[X.Z,es.Z,Q.Z,et.Z.extend({name:"paragraph",addKeyboardShortcuts(){return{"Shift-Enter":()=>this.editor.commands.first(({commands:e})=>[()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()])}}}),ea.Z.configure({placeholder:"'/' for slash commands: /Fix, /Explain. @document for file mentions"}),ee.ZP.extend({name:"userCommand"}).configure({HTMLAttributes:{class:"command command-bordered command-with-icon","data-command":"command"},renderText:({options:e,node:t})=>`${e.suggestion.char}${t.attrs.label??t.attrs.id}`,renderHTML:({options:e,node:t})=>`${t.attrs.label??t.attrs.id}`,suggestion:{decorationClass:"command",char:"/",pluginKey:eP,items:em.items,render:em.render,startOfLine:!0},deleteTriggerWithBackspace:!0}),ee.ZP.extend({name:"userFile"}).configure({renderText:({options:e,node:t})=>`${e.suggestion.char}${t.attrs.label??t.attrs.id}`,renderHTML:({options:e,node:t})=>["span",{class:"command command-bordered command-with-icon animate-slideIn relative h-auto items-center gap-1 overflow-hidden","data-language":t.attrs.label.split(".")[1]},`${t.attrs.label?.replace("/","")??t.attrs.id}`],suggestion:{decorationClass:"command",char:"@",pluginKey:eA,items:eg.items,render:eg.render,startOfLine:!1}}),eS.extend({addKeyboardShortcuts(){return{Enter:()=>{if(0===this.editor.getText().length)return w.A.error("Please write some text or select a command",{duration:5e3}),!0;let e=this.editor.state?.userCommand$,t=e?.active,a=this.editor.state?.userFile$,s=a?.active;if(t||s)return j(!0),!1},"Mod-Enter":()=>{if(t)return a(),!0},"Mod-r":()=>{y(!1),x(""),P(""),this.editor.commands.setContent(""),this.editor.commands.clearContent(!0)},"Mod-n":()=>{l()},"Mod-v":()=>{h(!0),(0,n.M1)().then(e=>{if(navigator.platform.toLowerCase().includes("win"))return;let t=e;"object"==typeof t&&(t=JSON.stringify(t)),this.editor.commands.insertContent(String(t))}).finally(()=>{h(!1)})},"Mod-x":()=>{h(!0);let e=this.editor.state.selection;if(e){let{from:t,to:a}=e,s=this.editor.state.doc.textBetween(t,a);(0,n.zp)(s),this.editor.commands.deleteRange({from:t,to:a})}h(!1)}}}})],content:""},[t,a]),R=async()=>{await (0,n.$c)().then(async e=>{if(console.log("getIdeSelection",e),!e.selectedCode?.ok){w.A.error("Code Selection not found");return}$(!0);let t=e.selectedCode;t?.selectedText?.trim()?(S(t),_.current=await (0,n.UO)()):(S(null),_.current="")}),O?.commands.focus(),$(!1)};if(!O)return null;O.on("update",({editor:e})=>{P(e.getText({blockSeparator:"\n\n"})),y(!0)});let F=async()=>{if(t)return;let a=A?.selectedText?.trim().length>0,s=`\`\`\`${A?.language??"md"}
${A?.selectedText?.replaceAll(/\t/g,"")?.trim()}
\`\`\`
`;e({...a?{codeSelection:s}:{},externalInput:A?.selectedText?.trim().length>0?`${N}
`:N??"",chatRequestOptions:{options:{headers:{"Content-Type":"application/json",...g?{promptType:g}:{},..._.current?{fileName:_.current}:{},...f.current?{filePath:f.current}:{}}}}}),x(""),O.commands.focus()},L=()=>{let e=O.getJSON().content?.[0]?.content,t=O.getJSON().content?.flatMap(e=>e?.content?.flatMap(e=>"text"===e.type&&e?.text.trim()||null)).filter(e=>null!=e).join(",").length||0,a=e?.map(e=>"userCommand"===e.type?e.attrs.id:null).filter(e=>null!==e),s=e?.map(e=>"userFile"===e.type?e.attrs.id:null).filter(e=>null!==e);if(s?.[0]?f.current=s[0]:f.current="",a?.[0]?(x(a[0]),j(!0)):(x(""),j(!1)),b){j(!1);return}let n=a?.[0]?.length>0,r=A?.selectedText?.trim().length>0,l=t>0;if(l||!l&&n&&r||f.current){F();return}if(n&&(!l||!r)){w.A.error("Write some text or select code from your document"),O.commands.focus();return}!r||l&&n||(w.A.error("Write some text or select a command"),O.commands.focus())};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex h-full w-full flex-col items-center justify-center gap-2 text-sm transition-all",children:(0,s.jsxs)("div",{className:"relative grid h-full w-full grid-rows-[auto_1fr_auto] border-t border-content3 bg-content2 text-foreground transition-all",children:[(0,s.jsxs)("div",{className:"relative z-10 flex h-10 w-full items-center gap-2 p-2 text-xs text-default-500 backdrop-blur-sm transition-all",children:[s.jsx(C.A,{variant:"bordered",className:"command command-bordered command-with-icon animate-slideIn flex h-8 min-h-8 cursor-pointer items-center justify-start gap-1 text-xs text-foreground",isDisabled:M||t,startContent:t?s.jsx(ef,{size:3,color:"current"}):o[d]?.label?s.jsx("div",{className:"h-3.5 w-3.5 shrink-0 rounded-full",children:s.jsx(H.J,{loading:"eager",disableSkeleton:!0,src:o[d]&&o[d]?.image?o[d]?.image:(0,Y.k)(o[d]?.label),alt:o[d]?.label??"model",className:"h-3.5 w-3.5 shrink-0 rounded-full"})}):s.jsx(K.Z,{className:"w-4 shrink-0"}),onPress:()=>{I(!0)},children:s.jsx("div",{className:"relative grid w-full justify-start overflow-hidden text-start",children:s.jsx("span",{className:"w-full truncate text-xs",children:o[d]?.label.length>0?o[d]?.label:"Select Your AI"})})}),A?(0,s.jsxs)(C.A,{"data-type":"userFile",className:"command command-bordered command-with-icon animate-slideIn relative h-8 min-h-8 items-center gap-1 overflow-hidden","data-id":e_(A?.language??"md"),"data-language":e_(A?.language??"md"),variant:"bordered",children:[s.jsx("span",{className:"max-w-24 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-xs text-foreground",children:`${A?.fileName}.${e_(A?.language)}`}),s.jsx("span",{className:"ml-auto flex items-center gap-1 font-mono text-xs",children:s.jsx("span",{onClick:()=>{S(null),_.current=""},children:s.jsx(G.Z,{className:"h-4 w-4 shrink-0 cursor-pointer"})})})]}):s.jsx(C.A,{isDisabled:t,variant:"bordered",className:"command command-bordered command-with-icon animate-slideIn flex h-8 min-h-8 cursor-pointer items-center justify-start gap-1 font-mono text-xs text-foreground",onPress:()=>{R()},startContent:T?s.jsx(ef,{size:3,color:"current"}):s.jsx(B.Z,{className:"h-4 w-4 shrink-0"}),children:T?"Getting Code":"Import selection"}),(0,s.jsxs)("div",{className:"ml-auto flex",children:[s.jsx("div",{className:"flex h-8 min-h-8 w-8 min-w-8 items-center justify-center rounded-lg",children:s.jsx("span",{className:"col-span-1 flex justify-start gap-2",children:s.jsx("span",{className:"m-auto text-xs text-default-500",children:N.length>0?v&&c?s.jsx(ef,{size:4,color:"current"}):"":null})})}),i&&!i?.fromMarketplace&&s.jsx(C.A,{className:"h-8 min-h-8 w-8 min-w-8 rounded-lg border border-content3 p-0 text-foreground opacity-100",isIconOnly:!0,startContent:s.jsx(p.Z,{className:"h-4 w-4 shrink-0"}),size:"sm",color:"default",variant:"bordered",isDisabled:t,onPress:()=>{(0,u.q)({eventName:"clickOver",target:"openProviderSettingsTextarea"}),z(!0)}})]})]}),s.jsx(en.kg,{editor:O,className:"editor absolute left-0 top-0 h-full w-full overflow-auto transition-all",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||L()}}),s.jsx("div",{className:"absolute bottom-0 right-0 flex justify-end gap-2 p-2",children:s.jsx("div",{className:"col-span-1 ml-auto flex justify-end gap-2",children:t?t&&s.jsx(C.A,{size:"sm",color:"danger",variant:"flat",className:"w-fit",isDisabled:!t,onPress:async()=>{a(),x("")},startContent:s.jsx(W.Z,{className:"h-4 w-4 shrink-0"}),children:"Stop [⌘ ↩]"}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(eC,{isLoading:t}),s.jsx(C.A,{size:"sm",onPress:()=>L(),color:N?"primary":"default",variant:"solid",isDisabled:t||!N,startContent:s.jsx("span",{children:"↩"}),children:"Send"})]})})})]})})})}var eT=a(24490);let e$=async({provider:e,port:t})=>{try{let a=await eT.Z.get(`http://localhost:54112/${t}/api/${e}`);return a.data?{...a.data}:{agents:[],marketplace:[]}}catch(e){return console.error("error fetching agents",e),{agents:[],marketplace:[]}}};function eM(){let e=(0,r.Y)(e=>e.selectedProvider),t=(0,l.usePathname)().split("/")[1],{data:a,mutate:s,isLoading:n,isValidating:o}=(0,i.ZP)("/api/agents/",()=>e$({provider:e,port:t}),{shouldRetryOnError:!0,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:0});return{agents:a,isLoading:n||o,mutate:s}}var eI=a(29409),eO=a(49894);let eR=eO.fC,eF=eO.xz;eO.ee;let eL=k.forwardRef(({className:e,align:t="center",sideOffset:a=4,...n},r)=>s.jsx(eO.h_,{children:s.jsx(eO.VY,{ref:r,align:t,sideOffset:a,className:(0,Y.cn)("PopoverContent bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-none",e),...n})}));eL.displayName=eO.VY.displayName;var eD=a(39939),eZ=a(60982),eU=a(81367),eE=a(19018),eV=a(87699),eq=a(83401),eY=a(37740),eK=a(34370),eG=a(63750),eB=a(64700),eW=a(42719),eH=a(43686);function eJ({isLoading:e,clearChat:t,selectedModel:a,messages:l}){let{currentProviderModel:i,setCurrentProviderModel:o}=(0,r.o)(),{providers:d,mutate:c}=(0,eI.k)(),h=(0,T.U)(e=>e.setOpen),{selectedProvider:g,setSelectedProvider:x,isPopoverOpen:f,setIsPopoverOpen:j,isProviderSelectOpen:v,setIsProviderSelectOpen:y}=(0,r.Y)(),{agents:N,mutate:P,isLoading:A}=eM(),{isConnected:S}=(0,z.T)(),[$,I]=(0,k.useState)(!1),[O,R]=(0,k.useState)(0),[F,L]=(0,k.useState)(""),D=d.find(e=>e.link===g)?.models.map(e=>({label:e,value:e})),Z=d.find(e=>e.link===g)?.installedModels?.map(e=>({label:e,value:e}))||[],U=D?.filter(e=>!Z.find(t=>t.value===e.value))||[],E=-1!==Z.findIndex(e=>e.value===i[g]?.id),V=N?.agents?N.agents?.map(e=>({label:e.name,value:e.id,image:e.image,description:e.description,welcome:e.welcome})):[],q=N?.marketplace?N?.marketplace.map(e=>({label:e.name,value:e.id,image:e.image,description:e.description,welcome:e.welcome})):[],K=d.find(e=>e.link===g)?.editable,G=async({model:e,newProvider:t})=>{let a=[...Z?.length?Z:[],...D?.length?D:[],...V,...q].find(t=>t.label===e),s=a?.value??e??i[t]?.id,n=a?.label??e??i[t]?.label;(!s||""===s&&K)&&(n=s=d.find(e=>e.link===t)?.installedModels?.[0]??d.find(e=>e.link===t)?.models[0]??"");let r=!!q.find(t=>t.label===e);(s||""===s)&&o(t??g,{label:n,id:s,fromMarketplace:r,image:a?.image,description:a?.description,welcome:a?.welcome})},B=async e=>{if(!await (0,n._f)()){w.A.error("Ollama is not running,",{duration:3e3,action:s.jsx(C.A,{color:"default",variant:"light",size:"sm",className:"h-auto p-1 underline",onPress:()=>{(0,n.Yo)("https://docs.codegpt.co/docs/tutorial-ai-providers/ollama")},children:"Learn More"})});return}I(!0),L(e);let t=await fetch("http://localhost:11434/api/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}),a=t.body?.getReader();if(!a)throw Error("No reader available");let r=new TextDecoder;(async()=>{for(w.A.success("Downloading model",{duration:3e3});;){let{done:e,value:t}=await a.read();if(e)break;let s=r.decode(t);try{let e=JSON.parse(s);e?.status==="success"&&(w.A.success("Model installed successfully",{duration:3e3}),c(),I(!1),R(0),L(""));let{completed:t,total:a}=e;if(t&&a){let e=Math.floor(parseInt(t)/parseInt(a)*100);e!==O&&R(e)}}catch{}}})()},W=e=>{let t=e.currentTarget.value;("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,n.M1)().then(a=>{let{selectionStart:s,selectionEnd:n}=e.target,r=t.substring(0,s??t.length)+a+t.substring(n??t.length);o(g,{label:r,id:r,fromMarketplace:!!q.find(e=>e.label===a.trim()),image:"",description:"",welcome:""})}))},J=m(e=>e.setOpen),X="codegptplusbeta"===g,Q=({agent:e,comment:t})=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(H.J,{src:e.image??(0,Y.k)(e.label),alt:e.label??e.name??"agent",loading:"eager",disableSkeleton:!0,classNames:{img:"h-6 w-6 rounded-full border border-content3 shrink-0 opacity-100 block"},className:"h-[20px] w-[20px] rounded-full"}),(0,s.jsxs)("p",{className:"relative grid max-w-80 overflow-hidden",children:[s.jsx("span",{className:"text-ellipsis",children:e.label??e.name}),s.jsx("span",{className:"text-xs text-default-500",children:t??e.model??e.welcome})]})]},e.value??e.id),ee=(0,ei.X)(e=>e.groups),et=ee.flatMap(e=>e.agents),ea=ee.find(e=>"llm"===e.id)?.agents??[],es=ee.map(e=>e.agents).flat().filter(e=>!ea.find(t=>t.id===e.id));return s.jsx("div",{"attr-role":"chat-header",className:"grid h-14 w-screen grid-flow-col items-center justify-between p-2",children:(0,s.jsxs)("div",{className:"col-span-2 flex w-full items-center gap-2",children:[0!==l||a?.length!==0?s.jsx(C.A,{isIconOnly:!0,startContent:s.jsx(eZ.Z,{className:"w-5"}),variant:"bordered",className:"border",isDisabled:e,onClick:()=>{x("codegptplusbeta"),(0,ev.$)(),o("codegptplusbeta",{label:"",id:"",fromMarketplace:!1,image:"",description:"",welcome:""}),t()}}):null,(0,s.jsxs)(eR,{onOpenChange:j,open:f,children:[s.jsx(eF,{asChild:!0,children:s.jsx(C.A,{className:"w-52 content-start items-center justify-start truncate border",variant:"bordered",isDisabled:e,startContent:i[g]?.label?s.jsx("div",{className:"h-6 w-6 shrink-0 rounded-full",children:s.jsx(H.J,{loading:"eager",disableSkeleton:!0,src:i[g]&&i[g]?.image?i[g]?.image:(0,Y.k)(i[g]?.label),alt:i[g]?.label??"model",classNames:{wrapper:"h-6 w-6 shrink-0 rounded-full border border-content3 bg-content3",img:"h-6 w-6 shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block"},className:"h-6 w-6 shrink-0 rounded-full"})}):s.jsx(eU.Z,{className:"h-5 w-5 shrink-0"}),endContent:s.jsx(eE.Z,{className:`ml-auto w-4 shrink-0 transition-all ${f?"-rotate-180":""}`}),children:s.jsx("div",{className:"relative grid w-full justify-start overflow-hidden text-start",children:s.jsx("span",{className:"w-full truncate text-sm capitalize",children:i[g]?.label.length>0?i[g]?.label:"Select Your AI"})})})}),(0,s.jsxs)(eL,{align:"start",sideOffset:8,autoFocus:!1,className:"grid w-96 grid-cols-1 gap-4 rounded-xl border-0 bg-content2 px-4 py-6 text-sm shadow-lg backdrop-blur-sm",children:[(0,s.jsxs)(eK.g,{variant:"bordered",label:s.jsx("span",{className:"text-xs uppercase tracking-wide text-default-500",children:"Provider"}),placeholder:"Provider",selectedKeys:[d.find(e=>e.link===g)?.name],fullWidth:!0,isOpen:v,onChange:e=>{let t=e.target.value;if(!t)return;let a=d.find(e=>e.name===t),s=a?.link??"";G({newProvider:s}),x(s),(0,n.rF)("CodeGPT.apiKey",a?.id??a?.name??""),a?.agents&&setTimeout(()=>{P()},1e3)},onOpenChange:e=>y(e),items:d,classNames:{label:"bottom-[37%]",trigger:["border-content3","focus:border-default-500","focus-within:border-default-500","dark:focus:border-default-500","dark:focus-within:border-default-500","border-1 shadow-none","data-[open=true]:border-default-500"],popoverContent:"h-52 bg-content3"},renderValue:e=>e.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(_.T,{provider:g,className:"rounded-full",width:20,height:20}),s.jsx("div",{className:"relative flex flex-col overflow-hidden",children:s.jsx("span",{className:"truncate text-sm capitalize",children:e.textValue})})]},g)),children:[s.jsx(eG.y,{title:"CodeGPT",children:d.filter(e=>e.link.startsWith("codegptplus")).map(e=>s.jsx(eB.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(_.T,{provider:e.name,className:"rounded-full",width:20,height:20}),s.jsx("div",{className:"relative flex flex-col overflow-hidden",children:s.jsx("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))}),s.jsx(eG.y,{title:"Local Providers",children:d.filter(e=>"ollama"===e.link||"lmstudio"===e.link).map(e=>s.jsx(eB.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(_.T,{provider:e.name,className:"rounded-full",width:20,height:20}),s.jsx("div",{className:"relative flex flex-col overflow-hidden",children:s.jsx("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))}),s.jsx(eG.y,{title:"Third Party",children:d.filter(e=>!e.link.includes("ollama")&&!e.link.includes("lmstudio")&&!e.link.startsWith("codegptplus")).map(e=>s.jsx(eB.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(_.T,{provider:e.name,className:"rounded-full",width:20,height:20}),s.jsx("div",{className:"relative flex flex-col overflow-hidden",children:s.jsx("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))})]}),(0,s.jsxs)(eW.d,{variant:"bordered",fullWidth:!0,allowsCustomValue:"codegptplusbeta"!==g,label:s.jsx("span",{className:"text-xs uppercase tracking-wide text-default-500",children:"Model"}),onInputChange:e=>{let t=et.find(t=>t.name===e.toString());if(t){o("codegptplusbeta",{id:t.id,label:t.name,fromMarketplace:!0,image:t.image,description:t?.description,welcome:t?.welcome}),x("codegptplusbeta"),(0,ev.$)(),(0,u.q)({eventName:"clickOver",target:t.name+"WorkspaceButtonSelector"});return}G({model:e.toString()})},onOpenChange:async()=>{c(),await P(),"ollama"===g&&(console.log("ollama"),await (0,n._f)())},onClose:()=>{j(!1)},onKeyDown:e=>W(e),placeholder:"Search your model",disabledKeys:["loader","disabled"],defaultSelectedKey:i[g]?.label,defaultInputValue:i[g]?.label,inputValue:i[g]?.label,startContent:i[g]?.label?s.jsx("div",{className:"h-6 w-6 shrink-0 rounded-full",children:i[g]?.image?.length!==0?s.jsx(H.J,{loading:"eager",disableSkeleton:!0,src:i[g]&&i[g]?.image?i[g]?.image:(0,Y.k)(i[g]?.label),alt:i[g]?.label??"model",className:"h-6 w-6 shrink-0 rounded-full",classNames:{wrapper:"h-6 w-6 shrink-0 rounded-full border border-content3 bg-content3",img:"h-6 w-6 shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block"}}):s.jsx(_.T,{provider:g,className:"h-6 w-6 shrink-0 rounded-full"})}):s.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-content3",children:s.jsx(eU.Z,{className:"h-4 w-4 shrink-0"})}),inputProps:{classNames:{base:"overflow-hidden relative",input:"mb-[2px] truncate",label:"bottom-[37%]",inputWrapper:["border-content3","focus:border-default-500","focus-within:border-default-500","dark:focus:border-default-500","dark:focus-within:border-default-500","border-1 shadow-none","data-[open=true]:border-default-500"]}},popoverProps:{classNames:{content:"bg-content3"}},scrollShadowProps:{offset:8},shouldCloseOnBlur:!0,allowsEmptyCollection:!1,children:[Z?.length&&s.jsx(eG.y,{title:`Installed Models | (${Z?.length})`,children:Z?.map(e=>s.jsx(eB.R,{value:e.value,textValue:e.label,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:s.jsx(Q,{agent:e})},e.value))}),!X&&s.jsx(eG.y,{title:D?.length?"ollama"===g?"Available for install":"Models":"",showDivider:!0,children:U?.map(e=>s.jsx(eB.R,{value:e.value,textValue:e.label,selectedIcon:!1,endContent:!1,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:s.jsx(Q,{agent:e})},e.value))??[]}),V.length&&s.jsx(eG.y,{title:"My Agents",showDivider:!0,children:V?.map(e=>s.jsx(eB.R,{value:e.value,textValue:e.label,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:s.jsx(Q,{agent:e})},e.value))}),q.length&&s.jsx(eG.y,{title:"My Favorites from marketplace",showDivider:!0,children:q?.map(e=>s.jsx(eB.R,{value:e.value,textValue:e.label,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:s.jsx(Q,{agent:e})},e.value))}),A&&0===V.length&&0===q.length&&s.jsx(eG.y,{title:"My Agents",showDivider:!0,children:s.jsx(eB.R,{children:s.jsx(C.A,{isLoading:!0,fullWidth:!0,variant:"bordered",className:"border",children:"Loading Agents"})},"loader")}),"codegptplusbeta"===g&&es?.length!==0&&s.jsx(eG.y,{title:"Marketplace LLMs",showDivider:!0,children:ea.map(e=>s.jsx(eB.R,{value:e.name,textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:s.jsx(Q,{agent:e})},`marketplace-${e.name}`))}),"codegptplusbeta"===g&&es?.length!==0&&s.jsx(eG.y,{title:"Marketplace Agents",children:es.map(e=>s.jsx(eB.R,{value:e.name,textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:s.jsx(Q,{agent:e})},`marketplace-${e.name}`))})]}),"ollama"===g&&(0,s.jsxs)("div",{className:"flex gap-2",children:[!E&&!$&&i[g]?.id&&s.jsx("div",{children:s.jsx(C.A,{color:"primary",size:"sm",className:"border border-primary/20",onPress:()=>{B(i[g]?.label),(0,u.q)({eventName:"clickOver",target:"downloadOllamaModel",model:i[g]?.label})},startContent:s.jsx(eV.Z,{className:"h-5 w-5"}),children:"Download Model"},"downloadModel")}),$&&100!==O?(0,s.jsxs)("div",{className:"flex w-full items-start gap-2 px-1",children:[s.jsx(ef,{size:3,className:"mt-1"}),s.jsx(eH.W,{label:`Downloading ${F}`,"aria-label":"Downloading...",size:"sm",autoFocus:!0,value:O,color:"primary",showValueLabel:!0,className:"my-auto w-full"})]}):O>99.9?(0,s.jsxs)("div",{className:"my-auto grid gap-2 px-1",children:[(0,s.jsxs)("span",{className:"flex gap-2 text-xs uppercase text-default-500",children:[s.jsx(eq.Z,{className:"h-4 w-4"})," Model downloaded successfully."]}),(0,s.jsxs)("span",{className:"flex gap-3 text-xs uppercase",children:[s.jsx(ef,{size:3}),"Installing ",F,". Please wait..."]})]}):null]}),"ollama"!==g&&"lmstudio"!==g&&(0,s.jsxs)(s.Fragment,{children:[s.jsx(b.j,{}),(0,s.jsxs)("div",{className:"grid justify-between gap-4 px-1 pb-4",children:[s.jsx("div",{className:"flex items-center gap-1 text-default-500",children:S?(0,s.jsxs)(s.Fragment,{children:[s.jsx(eY.Z,{className:"w-4 shrink-0 text-success"}),s.jsx("p",{className:"text-xs uppercase",children:"Connected"})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(M.Z,{className:"w-4 shrink-0"}),s.jsx("p",{className:"text-xs uppercase",children:"Set Connection"})]})}),(0,s.jsxs)("div",{className:"flex justify-between gap-4",children:[s.jsx("p",{className:"pr-4",children:(0,s.jsxs)("span",{className:"hyphens-none",children:["Set your"," ",s.jsx("span",{className:"capitalize",children:g.includes("codegpt")?"CodeGPT account":`${g} API key`})," ","to enable the model selection"]})}),s.jsx(C.A,{size:"md",variant:S?"bordered":"solid",color:S?"default":"primary",className:"shrink-0",onPress:()=>{h(!0)},children:S?"Disconnect":"Connect"},"setConnection")]})]})]})]})]}),!i[g]?.fromMarketplace&&s.jsx(ew.e,{content:"Chat Settings",placement:"bottom",children:s.jsx(C.A,{isDisabled:e,startContent:s.jsx(p.Z,{className:"h-5 w-5"}),onPress:()=>{(0,u.q)({eventName:"clickOver",target:"openProviderSettings"}),J(!0)},isIconOnly:!0,variant:"bordered",className:"border"},"settings")}),s.jsx("div",{className:"ml-auto flex items-center justify-end gap-2",children:!e&&l>0&&s.jsx(C.A,{onPress:()=>t(),className:"text-default-500",variant:"light",isDisabled:e,startContent:s.jsx(eD.Lm,{className:"h-5 w-5 shrink-0 text-default-500"}),children:"New Chat"})})]})})}let eX=e=>s.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...e,children:s.jsx("polyline",{points:"20 6 9 17 4 12"})});var eQ=a(30967),e0=a(98618),e1=a(99137);function e2(){let[e,t]=(0,k.useState)(""),[a,r]=(0,k.useState)(!1),[l,i]=(0,k.useState)(0),[o,d]=(0,k.useState)(""),{providers:c,mutate:m}=(0,eI.k)(),{configuration:u,mutate:p}=(0,eQ.E)(),{isOpen:h,setOpen:v}=(0,e0.w)(),[y,N]=(0,k.useState)(u?.maxTokens??128),P=-1!==c.findIndex(e=>e.link===u?.provider.toLowerCase()&&e.installedModels?.includes(u?.model)),A=c.filter(e=>e?.autocompleteModels?.length).flatMap(e=>e?.autocompleteModels?.map(t=>({provider:e.name,model:t,link:e.link}))),S=async(e,a)=>{t(a),"Model"===a&&await (0,n.wb)(e.currentKey),"Enabled"===a&&await (0,n.mt)(e),"MaxTokens"===a&&await (0,n.Fc)(e),"Delay"===a&&await (0,n.$v)(e),p().then(()=>t(""))},z=async e=>{if(!await (0,n._f)()){w.A.error("Ollama is not running,",{duration:3e3,action:s.jsx(C.A,{color:"default",variant:"light",size:"sm",className:"h-auto p-1 underline",onPress:()=>{(0,n.Yo)("https://docs.codegpt.co/docs/tutorial-ai-providers/ollama")},children:"Learn More"})});return}r(!0),d(e);let t=w.A.loading((0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-foreground",children:[(0,s.jsxs)("span",{children:["Downloading ",e," model"]}),s.jsx("button",{onClick:()=>w.A.dismiss(t),children:"x"})]})),a=await fetch("http://localhost:11434/api/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}),o=a.body?.getReader();if(!o)throw Error("No reader available");let c=new TextDecoder;(async()=>{for(;;){let{done:e,value:a}=await o.read();if(e)break;let s=c.decode(a);try{s.includes('{"status":"success"}')&&(w.A.success("Model downloaded successfully"),100!==l&&i(100),m(),w.A.dismiss(t),setTimeout(()=>{r(!1),i(0),d("")},5e3));let{completed:e,total:a}=JSON.parse(s);if(e&&a){let t=Math.floor(parseInt(e)/parseInt(a)*100);t!==l&&i(t)}}catch{}}})()};return s.jsx(s.Fragment,{children:s.jsx(g.R,{isOpen:h,placement:"top",size:"lg",scrollBehavior:"inside",classNames:{body:"pt-8 px-8 pb-10",closeButton:"h-10 w-10 p-0 flex items-center justify-center rounded-full absolute top-3 right-6 bg-content2 dark:bg-content2"},onOpenChange:()=>{v(!1)},children:s.jsx(x.A,{children:(0,s.jsxs)(f.I,{className:"grid gap-6",children:[(0,s.jsxs)("section",{className:"grid gap-2 border-0 font-normal",children:[(0,s.jsxs)("div",{className:"flex select-none items-center gap-2",children:[s.jsx(L.Z,{className:"h-6 w-6 shrink-0 text-default-500"}),s.jsx("p",{children:"AI code auto-completion"})]}),s.jsx("p",{className:"text-sm text-default-500",children:"Predict and offer code suggestions as you program in the editor"})]}),s.jsx(b.j,{}),(0,s.jsxs)("section",{className:"grid gap-2",children:[s.jsx("p",{className:"text-sm",children:"AI Model"}),s.jsx(eK.g,{placeholder:"Completion Model",selectedKeys:[`${u?.provider} - ${u?.model}`],className:"w-full",fullWidth:!0,classNames:{label:"text-sm relative bottom-0 -translate-y-2"},isLoading:"Model"===e,onSelectionChange:e=>S(e,"Model"),renderValue:()=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(_.T,{provider:u?.provider??"codegpt",className:"border-0",width:24,height:24}),(0,s.jsxs)("p",{className:"grid",children:[s.jsx("span",{className:"text-sm",children:u?.model}),s.jsx("span",{className:"text-xs text-default-500",children:u?.provider})]})]},u?.provider),children:A.map(e=>s.jsx(eB.R,{value:`${e.provider} - ${e.model}`,textValue:e.model,startContent:s.jsx(_.T,{provider:e.link,width:24,height:24}),children:(0,s.jsxs)("p",{className:"grid",children:[s.jsx("span",{className:"text-sm",children:e?.model}),s.jsx("span",{className:"text-xs text-default-500",children:e?.provider})]})},`${e.provider} - ${e.model}`))}),u?.provider==="Ollama"&&!P&&!a&&s.jsx(C.A,{color:"default",variant:"bordered",size:"md",className:"border- border bg-content4 shadow-md",onPress:()=>{console.log("download model"),u?.model&&z(u?.model)},children:"Download Model"},"downloadModel"),a&&s.jsx(eH.W,{label:`Downloading ${o} model`,"aria-label":"Downloading...",size:"sm",autoFocus:!0,value:l,color:"primary",showValueLabel:!0,className:"my-auto max-w-md"}),u?.provider!=="Ollama"&&s.jsx("div",{className:"mt-2 flex items-center justify-between gap-8 rounded-xl border border-content3 p-3",children:(0,s.jsxs)("p",{className:"text-xs text-default-500",children:["The model to use for code auto-completion. Remember connect your"," ",s.jsx("u",{children:u?.provider})," service."]})})]}),s.jsx(b.j,{}),s.jsx("section",{className:"grid",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"grid text-sm",children:[s.jsx("span",{children:"Status"}),s.jsx("span",{className:"text-xs text-default-500",children:u?.isEnabled?"Enabled":"Disabled"})]}),"Enabled"===e?s.jsx(C.A,{size:"sm",variant:"bordered",isLoading:"Enabled"===e,endContent:s.jsx("span",{children:"Loading"})}):s.jsx(e1.i,{isDisabled:"Enabled"===e,color:"primary",onValueChange:()=>S(!u?.isEnabled,"Enabled"),isSelected:u?.isEnabled,startContent:s.jsx(eX,{className:"h-3 shrink-0"})})]})}),s.jsx(b.j,{}),(0,s.jsxs)("section",{className:"grid gap-2",children:[s.jsx(j.L,{isDisabled:"MaxTokens"===e,color:"primary",maxValue:1024,minValue:16,step:8,defaultValue:u?.maxTokens??128,getValue:e=>`${e} Tokens  (~${y/4*3} words)`,onChangeEnd:e=>{S(Number(e),"MaxTokens")},onChange:e=>N(Number(e)),label:"Max Tokens","aria-label":"Max Tokens",className:"max-w-md"}),(0,s.jsxs)("p",{className:"text-xs text-default-500",children:["The maximum number of tokens the autocomplete will generate, for example,"," ",y," tokens, is equivalent to approximately ",y/4*3," words."]})]}),s.jsx(b.j,{}),(0,s.jsxs)("section",{className:"grid gap-2",children:[s.jsx(j.L,{isDisabled:"Delay"===e,color:"primary",maxValue:1e4,minValue:100,step:100,getValue:e=>`${Number(e)/1e3} Seconds`,defaultValue:u?.delay??1e3,onChangeEnd:e=>S(Number(e),"Delay"),label:"Suggestion Delay","aria-label":"Suggestion Delay",className:"max-w-md",name:"delay",id:"delay"}),s.jsx("p",{className:"text-xs text-default-500",children:"How long should we wait before giving you auto completion suggestions"})]})]})})})})}var e4=a(52377),e5=a(97045);let e3=({className:e,...t})=>s.jsx(e5.eh,{className:(0,Y.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),e6=e5.s_,e8=({withHandle:e,className:t,...a})=>s.jsx(e5.OT,{className:(0,Y.cn)("focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0",t),...a,children:e&&s.jsx("div",{className:"z-20 flex h-4 w-8 items-center justify-center rounded-lg border border-content4 bg-content2/50 backdrop-blur-sm",children:s.jsx(eD.Vn,{className:"h-4 w-4"})})});var e9=a(98287),e7=a(38205),te=a(83082),tt=a(94870),ta=a(10498),ts=a(34899);function tn({id:e,name:t,description:a,image:n,welcome:l,fromMarketplace:i}){let{isConnected:o}=(0,z.T)(),d=(0,T.U)(e=>e.setOpen),c=(0,r.Y)(e=>e.selectedProvider),{agents:m}=(0,ei.X)(e=>e),[u,p]=(0,k.useState)(null);return(0,s.jsxs)("div",{className:"relative pt-16 mx-auto grid w-full max-w-md select-none content-center items-center justify-center gap-4 text-center",children:[(0,s.jsxs)("div",{className:"agent-avatar relative mx-auto h-16 w-16 select-none rounded-full",children:[n?s.jsx(H.J,{src:n,alt:"agent",loading:"eager",disableSkeleton:!0,radius:"full",classNames:{wrapper:"agent-avatar shrink-0 rounded-full bg-content3",img:"agent-avatar shrink-0 rounded-full bg-content3 opacity-100 block"}}):s.jsx(_.T,{provider:c,className:"mx-auto h-16 w-16 select-none rounded-full"}),!c.includes("anthropic")&&!c.includes("openai")&&!c.includes("mistral")&&!c.includes("cohere")&&s.jsx("div",{className:"absolute -bottom-1 -right-1 z-10 grid size-8 items-center justify-center rounded-full",children:s.jsx(_.T,{provider:c,className:"mx-auto aspect-square select-none rounded-full border-2 border-white shadow-sm dark:border-content1"})})]}),(0,s.jsxs)("div",{className:"grid select-none items-center justify-center gap-2",children:[s.jsx("p",{className:"animate-slideIn relative w-full overflow-hidden truncate text-xl capitalize opacity-0",children:t}),s.jsx("p",{className:"animate-slideIn delay-2 relative w-full hyphens-none text-center text-lg text-default-500 opacity-0",children:l||a||"Your new AI Code Assistant"}),u?u?.tools&&u?.tools?.length>0&&s.jsx("p",{className:"animate-slideIn delay-3 relative mt-2 flex w-full justify-center text-center text-lg text-default-500 opacity-0",children:(0,s.jsxs)("span",{className:"flex items-center gap-1 rounded-lg border border-content3 px-1.5 py-0.5 text-default-500",children:[u?.tools.includes("code-interpreter")?s.jsx(ta.Z,{className:"h-4 w-4 shrink-0"}):s.jsx(ts.Z,{className:"h-4 w-4 shrink-0"}),s.jsx("span",{className:"text-sm capitalize",children:u?.tools&&u?.tools.join(", ").replaceAll("-"," ")})]})}):""]}),!c.includes("codegpt")&&!c.includes("ollama")&&(o?s.jsx(ey.z,{size:"sm",variant:"dot",color:"success",className:"mx-auto border",children:"Connected"}):s.jsx(C.A,{size:"sm",className:"animate-slideIn delay-3 mx-auto w-fit border opacity-0",variant:"bordered",onPress:()=>d(!0),children:"Set Connection"}))]},e)}function tr(){let{currentProviderModel:e}=(0,r.o)(),t=e[(0,r.Y)(e=>e.selectedProvider)];if(t?.id)return s.jsx(tn,{id:t.id,name:t.label,image:t.image??(0,Y.k)(t.label),description:t.description,welcome:t.welcome,fromMarketplace:t.fromMarketplace})}var tl=a(4088),ti=a(47165),to=a(459),td=a(85614),tc=a(88004);function tm({port:e}){let{groups:t,agents:a}=(0,ei.X)(e=>e),{languages:l}=(0,td.F)(e=>e),{setCurrentProviderModel:i}=(0,r.o)(),o=(0,r.Y)(e=>e.setSelectedProvider),{agents:d,isLoading:c}=eM(),[m,p]=(0,k.useState)([]),[h,g]=(0,te._)("tabSelected","llm"),x=({agent:e,index:t})=>(0,s.jsxs)("div",{className:`relative flex h-14 w-full shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-xl bg-content2 px-3 transition-all ${t}`,onClick:()=>{i("codegptplusbeta",{id:e.id,label:e.name,fromMarketplace:!0,image:e.image,description:"",welcome:e?.welcome}),o("codegptplusbeta"),(0,ev.$)(),(0,u.q)({eventName:"clickOver",target:e.name+"WorkspaceButtonHome"})},children:[s.jsx(H.J,{disableSkeleton:!0,src:e.image,alt:e.name,loading:"eager",classNames:{wrapper:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"}}),(0,s.jsxs)("p",{className:"relative grid w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:[e.name,e&&e?.tools&&e?.tools?.length>0&&s.jsx("span",{className:"text-xs capitalize text-default-500",children:e?.tools?.join(", ").replaceAll("-"," ")})]})]});return s.jsx(s.Fragment,{children:(0,s.jsxs)("section",{className:"grid w-full gap-2",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between px-2",children:[s.jsx("h3",{className:"text-xs uppercase tracking-wider text-default-500",children:"AI Teams"}),s.jsx("div",{"attr-role":"tabs-buttons-wrapper",className:"flex items-center",children:s.jsx("div",{"attr-role":"tabs-button-group",className:"flex items-center gap-2 text-xs",children:s.jsx(tl.g,{variant:"light",size:"sm",className:"border-transparent data-[hover=true]:bg-transparent",children:m&&m?.length>0?m?.map(e=>s.jsx(C.A,{onPress:()=>{g(e.id),u.q({eventName:"clickOver",target:e.id+"WorkspaceButtonSelectedTab"})},startContent:"related"===e.id?s.jsx(L.Z,{className:"h-3 w-3 shrink-0"}):null,className:`h-6 bg-transparent capitalize data-[hover=true]:bg-transparent data-[hover=true]:text-foreground ${h===e.id?"underline":"text-default-500"}`,children:e.name},e.id)):s.jsx(tl.g,{variant:"light",size:"sm",className:"border-transparent data-[hover=true]:bg-transparent",children:Array.from({length:3}).map((e,t)=>(0,s.jsxs)(C.A,{className:"flex h-6 w-24 items-center gap-2 border border-content3 px-2 data-[hover=true]:bg-transparent",children:[s.jsx(e9.X,{className:"h-2 w-2 shrink-0 rounded-full"}),s.jsx(e9.X,{className:"h-2 w-24 rounded-full"})]},t))})})})})]}),s.jsx("div",{children:m&&m?.length>0?s.jsx(ti.n,{"aria-label":"Teams",selectedKey:h,onSelectionChange:e=>g(e),classNames:{tabList:"hidden",base:"hidden p-0",panel:"p-0"},children:m?.map(t=>s.jsx(to.r,{title:t.name,children:s.jsxs("div",{className:"grid grid-cols-2 gap-2 px-2 sm:grid-cols-3",children:[t&&t.agents&&t.agents.map((e,t)=>s.jsx(x,{agent:e,index:t},`${t}-${e.id}`)),e.length>1&&s.jsx(C.A,{className:"relative flex h-14 w-full shrink-0 cursor-pointer select-none items-center justify-start gap-2 overflow-hidden rounded-xl px-3 transition-all",variant:"bordered",onPress:async()=>{u.q({eventName:"clickOver",target:"LoadMoreAgentsFromMarketplace"}),n.Cl(`http://localhost:54112/${e}/marketplace`)},startContent:s.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:s.jsx(tc.Z,{className:"h-4 w-4 shrink-0"})}),children:"Load more agents"})]})},t.id))}):s.jsx("div",{className:"grid grid-cols-2 gap-2 px-2 sm:grid-cols-3",children:Array.from({length:3}).map((e,t)=>(0,s.jsxs)("div",{className:"flex h-14 w-full items-center gap-2 rounded-xl border border-content3 bg-content1 px-3",children:[s.jsx(e9.X,{className:"h-6 w-6 shrink-0 rounded-full"}),s.jsx(e9.X,{className:"h-4 w-24 rounded-full"})]},t))})})]})})}function tu(){let{setCurrentProviderModel:e}=(0,r.o)(),{setSelectedProvider:t,selectedProvider:a}=(0,r.Y)(),{agents:l,mutate:i,isLoading:o}=eM(),{isConnected:d}=(0,z.T)(),{loginFromEventSource:c}=(0,N.R)(),m=({agent:a,index:n})=>(0,s.jsxs)("div",{className:`relative flex h-14 w-40 shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-xl bg-content2 px-3 transition-all ${n}`,onClick:()=>{a?.is_frozen||(e("codegptplusbeta",{id:a.id,label:a.name,fromMarketplace:!1,image:a.image,description:"",welcome:a?.welcome}),t("codegptplusbeta"),(0,ev.$)(),(0,u.q)({eventName:"clickOver",target:a.name+"WorkspaceUserAgent"}))},children:[s.jsx(H.J,{disableSkeleton:!0,src:a.image||"/logotypes/custom.png",alt:a.name,loading:"eager",classNames:{wrapper:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"}}),s.jsx("p",{className:"relative w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:a.name})]});return s.jsx(s.Fragment,{children:s.jsx("div",{className:"grid gap-4",children:(0,s.jsxs)("section",{className:"grid gap-2 px-2",children:[s.jsx("h3",{className:"text-xs uppercase tracking-wider text-default-500",children:"My Agents"}),!d&&s.jsx("div",{className:"relative flex h-14 w-full items-center justify-between gap-2 rounded-xl border border-dashed border-content3 p-3",children:a?(0,s.jsxs)(s.Fragment,{children:[s.jsx("p",{className:"text-sm",children:"Customize and improve your experience by creating an AI Agent Assistant"}),s.jsx(C.A,{variant:"flat",color:"primary",size:"sm",onPress:d?async()=>{await (0,n.Yo)(`${y.Ft}/signup?source=vscode`),(0,u.q)({eventName:"clickOver",target:"WorkspaceCreateFirstAgent"})}:async()=>{let e=crypto.randomUUID();await (0,n.Yo)(`${y.Ft}/signup?source=vscode&distinct_id=${await (0,N.k)()}&connection_id=${e}`),c(e),(0,u.q)({eventName:"ads",object:"adOnInputText",message:"Customize and improve your experience by creating an AI Agent Assistant"})},className:"shrink-0 border border-primary-400/10 text-foreground",startContent:s.jsx(tc.Z,{className:"h-4 w-4 shrink-0 rounded-full"}),children:"Create"})]}):s.jsx(s.Fragment,{children:s.jsx(e9.X,{className:"h-4 w-1/3 rounded-full"})})}),d?(0,s.jsxs)(e7.o,{orientation:"horizontal",className:"relative flex w-full items-center gap-2 overflow-x-auto",hideScrollBar:!0,children:[s.jsx(C.A,{className:"relative flex h-14 w-40 shrink-0 cursor-pointer items-center gap-2 rounded-xl px-3",variant:"bordered",onPress:async()=>{await (0,n.Yo)(`${y.Ft}/signup?source=vscode`),(0,u.q)({eventName:"clickOver",target:"WorkspaceCreateAgent"})},startContent:s.jsx(tc.Z,{className:"h-6 w-6 shrink-0 rounded-full"}),children:"Create"}),!o&&l?.agents?.length>0?l?.agents?.map((e,t)=>s.jsx(m,{agent:e,index:t},e.id)):Array.from({length:3}).map((e,t)=>(0,s.jsxs)("div",{className:"flex h-14 w-full items-center gap-2 rounded-xl border border-content3 bg-content1 px-3",children:[s.jsx(e9.X,{className:"h-6 w-6 shrink-0 rounded-full"}),s.jsx(e9.X,{className:"h-4 w-24 rounded-full"})]},t))]}):null]})})})}function tp({activeSignIn:e=!1}){let{userData:t}=(0,eb.v)(),{loginFromEventSource:a}=(0,N.R)();return s.jsx(s.Fragment,{children:t&&!t?.loggedIn?(0,s.jsxs)("div",{className:"fadeIn cta mb-2 flex select-none items-center justify-between px-3",children:[s.jsx("p",{className:"grid max-w-full gap-1 pr-6",children:s.jsx("span",{className:"text-sm",children:"Sign Up and get 10 Free Daily Interactions"})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(C.A,{variant:"flat",size:"sm",onPress:async()=>{let e=crypto.randomUUID();await (0,n.Yo)(`${y.Ft}/signup?source=vscode&distinct_id=${await (0,N.k)()}&connection_id=${e}`),a(e),(0,u.q)({eventName:"ads",object:"adOnInputText",message:"Sign Up and get 10 Free Daily Interactions"})},className:"border border-primary-400/10",children:"Sign Up"})})]}):(0,s.jsxs)("div",{className:"fadeIn cta mb-2 flex select-none items-center justify-between px-3",children:[t&&t?.plan.toLowerCase()==="free"&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("p",{className:"grid max-w-full gap-1 pl-1 pr-6",children:s.jsx("span",{className:"hyphens-none pr-6 text-sm",children:"Try out CodeGPT Plus for free and enjoy 50 daily interactions for 10 days"})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(C.A,{variant:"flat",size:"sm",className:"border border-primary-400/10",onPress:()=>{(0,n.Yo)(`${y.Ft}/en/plans`),(0,u.q)({eventName:"ads",object:"adOnInputText",message:"Try out CodeGPT Plus for free and enjoy 50 daily interactions for 10 days"})},children:"Upgrade"})})]}),t&&t?.plan.toLowerCase()==="free trial"&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("p",{className:"grid max-w-full gap-1 pl-1 pr-6",children:s.jsx("span",{className:"text-sm",children:"Unlock unlimited interactions and full features with CodeGPT Plus"})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(C.A,{variant:"flat",color:"primary",size:"sm",onPress:()=>{(0,n.Yo)(`${y.Ft}/en/plans`),(0,u.q)({eventName:"ads",object:"adOnInputText",message:"Unlock unlimited interactions and full features with CodeGPT Plus"})},children:"Upgrade"})})]})]})})}var th=a(95920);function tg({isLoading:e,currentModel:t,clearChat:a}){let{setCurrentProviderModel:n}=(0,r.o)();(0,ei.X)(e=>e.groups);let[l,i]=(0,k.useState)({id:"",name:"",rows:[],agents:[]}),{setSelectedProvider:o}=(0,r.Y)();return s.jsx(s.Fragment,{children:!e&&(0,s.jsxs)(e7.o,{orientation:"horizontal",className:"mb-1 flex gap-2 px-2",hideScrollBar:!0,children:[s.jsx(C.A,{isIconOnly:!0,startContent:s.jsx(th.Z,{className:"w-4"}),variant:"bordered",size:"sm",isDisabled:e,onClick:()=>{o("codegptplusbeta"),(0,ev.$)(),n("codegptplusbeta",{label:"",id:"",fromMarketplace:!1,image:"",description:"",welcome:""}),a()}}),!e&&l.agents.map((a,r)=>s.jsx(C.A,{variant:a.id===t.id?"flat":"bordered",isDisabled:e||a.id===t.id,className:`animate-slideIn delay-${r+1} h-8 min-h-8 w-36 shrink-0 justify-start px-2 text-sm opacity-0 transition-none ${a.id===t.id?"order -10 border border-transparent":`order -${r+2}`}`,startContent:s.jsx("div",{className:"shrink-0",children:s.jsx(H.J,{loading:"eager",disableSkeleton:!0,src:a.image,alt:a.name,className:"h-3.5 w-3.5 rounded-full",classNames:{wrapper:"agent-avatar"}})}),endContent:s.jsx("span",{className:` ${a.id===t.id?"":"text-default-500"} grow-0 truncate text-sm`,children:a.name}),onPress:()=>{(0,u.q)({eventName:"clickOver",target:a.name+"WorkspaceButton"}),n("codegptplusbeta",{label:a.name,id:a.id,image:a.image,fromMarketplace:!0,description:a.description})}},a.id))]})})}var tx=a(14555),tf=a(60882),tb=a(56386);function tj({label:e}){let{userData:t}=(0,eb.v)(),{loginFromEventSource:a}=(0,N.R)(),l=(0,r.Y)(e=>e.selectedProvider),i=t?.dailyUsage||0,o=t?.dailyMaxUsage||-1;return -1===o||"codegptplusbeta"!==l?null:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(ey.z,{variant:"dot",size:"sm",classNames:{base:"border border-content2 bg-content2 text-default-500"},color:0===i?"success":i/o>.6&&i/o<1?"warning":i===o?"danger":"success",children:s.jsx("div",{children:(0,s.jsxs)("p",{children:[i," of ",o]})})}),i===o&&!t.loggedIn&&(0,s.jsxs)("div",{className:"flex items-center gap-1 rounded-xl text-sm",children:[s.jsx("span",{className:"cursor-pointer text-sm text-primary underline",onClick:async()=>{let e=crypto.randomUUID();await (0,n.Yo)(`${y.Ft}/signup?source=vscode&distinct_id=${await (0,N.k)()}&connection_id=${e}`),a(e),(0,u.q)({eventName:"ads",object:"adOnInputText",message:"maxInteractions widget"})},children:"Sign Up"}),s.jsx("p",{className:"text-default-500",children:s.jsx("span",{children:"to get more interactions"})})]}),i>=o&&t.loggedIn&&(0,s.jsxs)("div",{className:"flex items-center gap-1 rounded-xl text-sm",children:[s.jsx("span",{className:"cursor-pointer text-sm text-primary underline",onClick:()=>{(0,n.Yo)(`${y.Ft}/en/plans`),(0,u.q)({eventName:"ads",object:"adOnInputText",message:"maxInteractions"})},children:"Upgrade your plan"}),s.jsx("p",{className:"text-default-500",children:s.jsx("span",{children:"to get unlimited interactions"})})]})]})}let tv=({role:e,content:t,status:a,index:n,isLastMessage:l,isLoading:i,providerState:o,modelHistory:d,reload:c,image:m,codeSelection:u})=>{let{userData:p}=(0,eb.v)(),{currentProviderModel:h}=(0,r.o)();return s.jsx(s.Fragment,{children:(({role:e,username:t,content:a,avatar:r,loader:o,fromMarketplace:d=!1,image:m,codeSelection:u,status:p})=>(0,s.jsxs)("div",{className:`mx-auto grid w-full grid-cols-1 items-start justify-start gap-3 place-self-stretch text-pretty text-foreground ${e} ${i?"streaming":"quiet"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-start gap-2",children:["assistant"===e&&s.jsx(H.J,{src:r||(0,Y.k)(t),alt:t||"assistant",width:24,height:24,loading:"eager",disableSkeleton:!0,className:"size-6 shrink-0 overflow-hidden rounded-full border-1 border-content2 shadow-md",classNames:{wrapper:"agent-avatar select-none size-6"}}),"user"===e&&(r?s.jsx(H.J,{src:r,alt:"user",width:24,height:24,loading:"eager",disableSkeleton:!0,className:"size-6 shrink-0 overflow-hidden rounded-full border-1 border-content2 shadow-md",classNames:{wrapper:"agent-avatar select-none size-6 border"}}):s.jsx("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-indigo-500",children:s.jsx(tf.Z,{className:"h-4 w-4 shrink-0 rounded-full"})})),(0,s.jsxs)("p",{className:"grid tracking-wide",children:["assistant"===e&&d&&s.jsx("span",{className:"text-xs capitalize text-default-400",children:"CodeGPT"}),s.jsx("span",{className:"text-sm capitalize",children:t})]})]}),s.jsx("div",{children:a?(0,s.jsxs)("div",{className:`markdown flex flex-col gap-4 ${e}`,children:[m?.base64&&s.jsx("div",{className:"grid gap-2",children:s.jsx("div",{className:"grid max-w-48 gap-4",children:(0,s.jsxs)("div",{className:"relative grid grid-flow-col items-center justify-start gap-2 overflow-hidden rounded-lg border border-content3 p-2",children:[s.jsx("div",{className:"relative size-8 overflow-hidden rounded-lg",children:s.jsx("div",{className:"relative h-full w-full overflow-hidden",style:{backgroundImage:`url(${m.base64})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})}),(0,s.jsxs)("p",{className:"relative grid w-full gap-0.5 overflow-hidden truncate",children:[(0,s.jsxs)("span",{className:"text-xs text-default-500",children:[s.jsx("span",{className:"uppercase",children:m.name&&m.name.includes(".")?m.name?.split(".")[1]:""})," ","Image"]}),s.jsx("span",{className:"justify-end overflow-hidden text-ellipsis text-left text-xs",children:m.name})]})]})})}),"user"===e?s.jsx(s.Fragment,{children:u?(0,s.jsxs)(s.Fragment,{children:[a.replaceAll(u,""),s.jsx(tx.J,{content:u,codeBlockClassName:"max-h-80"})]}):a.split("\n\n").length>1?a.split("\n\n").map((e,t)=>{if(e.trim())return s.jsx("p",{children:e},t)}):null}):s.jsx(tx.J,{content:a,isLoading:i},"md"+n+String(i))]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(e9.X,{className:"mb-2 h-4 w-full rounded-lg"}),s.jsx(e9.X,{className:"mb-2 h-4 w-2/3 rounded-lg"})]})}),s.jsx("footer",{className:"flex gap-2",children:l&&"assistant"===e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(tj,{}),p&&!p?.done&&(0,s.jsxs)(C.A,{variant:"light",size:"sm",className:"capitalize text-default-500",children:[s.jsx(ef,{size:4}),p?.message??"Writing response..."]})]}),!i&&s.jsx(C.A,{onPress:()=>c&&c(),className:"group:hover:bg-transparent dark:group:hover:bg-transparent w-fit bg-transparent p-0 text-default-500 hover:bg-transparent hover:text-default-900 group-hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent dark:group-hover:bg-transparent",variant:"light",size:"sm",isLoading:i,startContent:!i&&s.jsx(tb.Z,{className:"w-4 shrink-0"}),children:"Reload"})]})})]}))("assistant"===e?i&&l&&"assistant"===e&&!t?{role:e,username:`${d?.[o]?.[n]?.model||h?.[o]?.label||""}`,avatar:m??d?.[o]?.[n]?.avatar,fromMarketplace:h?.[o]?.fromMarketplace??!1,status:a}:{role:e,content:t,username:`${d?.[o]?.[n]?.model||h?.[o]?.label||""}`,avatar:m??d?.[o]?.[n]?.avatar,fromMarketplace:h?.[o]?.fromMarketplace??!1}:{role:e,content:t,username:p?.loggedIn?p?.user?.username??p?.user?.fullName??"User":"User",avatar:p?.loggedIn?p?.user?.avatarUrl:"",image:m,codeSelection:u})})},tk=(0,k.createContext)({append:(e,t)=>Promise.resolve(void 0),error:void 0,handleInputChange(e){},handleSubmit(e,t){},input:"",isLoading:!1,messages:[],reload:e=>Promise.resolve(void 0),setInput(e){},setMessages(e){},stop(){},scrollToBottom(){}});function tw(){let[e,t]=(0,k.useState)({}),[a,i]=(0,k.useState)({message:"",done:!1}),{selectedProvider:o}=(0,r.Y)(),{setOpen:c}=(0,T.U)(),{currentProviderModel:m,setCurrentProviderModel:p}=(0,r.o)(),h=m[o]?.id,g=m[o]?.fromMarketplace??!1,{isLoading:x}=d(),{image:f,setImage:b,setShowTooltip:j}=ej(),v=(0,l.usePathname)().split("/")[1],{setOpen:w,setErrorMessage:y}=(0,e4.c)(),N=(0,eI.k)(e=>e.providers),P=(0,tt.RJ)({api:`/${v}/api/${o}`,headers:{"Content-Type":"application/json",...h?{model:h}:{},...g?{fromMarketplace:"true"}:{}},sendExtraMessageFields:!0,onError:e=>{let t=e.message,a=500;try{let s=JSON.parse(e.message);t=s.message??t,a=Number(s.status)??a}catch{}401===a?c(!0):(w(!0),console.log("useChat Error Provider",o),y({title:o.includes("codegpt")?"Interaction Limit Reached":"Alert",subtitle:`${o.includes("codegpt")?"CodeGPT Plus":`${o} Message`}`,provider:`${o.includes("codegpt")?"/logotypes/codegpt.png":`/logotypes/${o.toLowerCase()??"codegpt"}.png`}`,description:t?.replaceAll('"',""),type:"alert",actions:o.includes("codegpt")?s.jsx(tp,{}):s.jsx(C.A,{size:"sm",variant:"light",className:"text-default-500",onPress:()=>{(0,u.q)({eventName:"clickOver",target:"goToModelsDocsButtonFromErrorCard"}),(0,n.Yo)("https://docs.codegpt.co/docs/category/ai-providers")},children:"Click here for more info about models"})}))},onFinish:()=>{setTimeout(()=>{let e=document.querySelectorAll(".assistant"),t=e[e.length-1],a=t?.querySelectorAll(".language-label"),s=a?.length;for(let e=0;e<s;e++){let t=a[e].textContent;(0,u.q)({eventName:"codeBlock",...t?{code_language:t}:{}})}},500)}}),{messages:S,setMessages:_,input:z,isLoading:$,stop:M,reload:I}=P,O=async({event:e,externalInput:a,chatRequestOptions:s,codeSelection:n="",fileName:r})=>{D.current?.scrollIntoView({behavior:"smooth",block:"end"});let l=m[o]?.label||N.find(e=>e.link===o).models[0],d=S.length+1,c=m[o]?.image;j(!1),m[o]?.label===""&&(console.log('modelState[providerState]?.label === ""'),p("codegptplusbeta",{label:"gpt-3.5-turbo",id:"gpt-3.5-turbo",image:"logotypes/openai.png",fromMarketplace:!1,description:"CodeGPT OpenAI GPT-3.5 Turbo"}),l="gpt-3.5-turbo",c="logotypes/openai.png"),t(e=>({...e,[o]:{...e[o],[d]:{model:l,avatar:c}}}));let u=["codegptplusbeta","ollama"].includes(o),h="codegptplusbeta"===o;if(e?.preventDefault(),!z&&!a)return;let g=[...S],x=crypto.randomUUID(),v={...u?{id:crypto.randomUUID()}:{},role:"user",content:a?`${a}
${n}`:z,...""!==f.base64&&u?{attachment:f}:{},...""!==f.base64&&u?{image:f.base64}:{},...h?{statusId:x}:{},...n?{codeSelection:n}:{}};g.push(v),h&&fetch(`https://api.codegpt.co/api/v1/chat/status/${x}`).then(async e=>{let t=e.body?.getReader();if(!t)return;let a=new TextDecoder;for(;;){let{done:e,value:s}=await t?.read();if(e)break;let n=a.decode(s).replaceAll("retry 1000\n\n",'{"message":"Connecting...","done":false}').replaceAll("data: ","").replaceAll("\n\n",""),r=JSON.parse(n)?.message;if(i({message:r,done:r?.done}),r.done)break}}),_(g),I(s).then(()=>b({base64:"",name:""}))},R=S[S.length-1]?.role==="assistant",F=()=>{_([]),t(e=>({...e,[o]:{}}))},L=(0,k.useRef)(null),D=(0,k.useRef)(null),{inView:Z}=(0,te.S1)(L);return S[S.length-1]?.content?.length,(0,s.jsxs)(tk.Provider,{value:{...P,scrollToBottom:()=>{L.current&&L.current?.scrollIntoView({behavior:"smooth",block:"end"})}},children:[s.jsx("div",{className:"relative flex h-screen max-h-[calc(100vh-3rem)] overflow-hidden",children:(0,s.jsxs)("div",{className:"grid grid-rows-[auto_1fr_auto]",children:[o?s.jsx(eJ,{clearChat:F,isLoading:$,selectedModel:h,messages:S.length}):(0,s.jsxs)("div",{className:"grid h-14 w-screen grid-flow-col items-center justify-start gap-2 p-2",children:[s.jsx(C.A,{variant:"bordered",className:"w-52",startContent:s.jsx(e9.X,{className:"h-5 w-5 shrink-0 rounded-full"}),children:s.jsx(e9.X,{className:"h-3 w-full rounded-full"})}),s.jsx(C.A,{variant:"bordered",startContent:s.jsx(e9.X,{className:"h-5 w-5 shrink-0 rounded-full"}),isIconOnly:!0})]}),(0,s.jsxs)(e3,{direction:"vertical",className:"",children:[s.jsx(e6,{defaultSize:75,minSize:25,maxSize:85,children:(0,s.jsxs)(e7.o,{hideScrollBar:!0,className:"h-full gap-6 pt-4",size:16,ref:D,children:[s.jsx("div",{className:"mx-auto w-full max-w-3xl",children:o&&m?.[o]?.label!==""&&S.length>0?(0,s.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-8 px-4 py-2",children:[S.map((t,n)=>s.jsx(tv,{role:t.role,content:t.content,image:t.attachment,index:n,isLastMessage:n===S.length-1,isLoading:$,providerState:o,modelHistory:e,reload:I,codeSelection:t.codeSelection,status:a},`msg-${n}`)),$&&!R&&s.jsx(tv,{role:"assistant",content:"",index:S.length,isLastMessage:!0,isLoading:!0,providerState:o,modelHistory:e,reload:I,status:a})]}):s.jsx("div",{className:"grid gap-4",children:o&&m[o]?.id?s.jsx(tr,{}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(tu,{}),s.jsx(tm,{port:v})]})})}),s.jsx("div",{className:"select-none",style:{background:"transparent",width:"100%",height:"12px",marginTop:"0.2rem"},ref:L})]})}),s.jsx(tp,{}),o&&h&&g?s.jsx(tg,{isLoading:$,currentModel:m[o],clearChat:F}):null,s.jsx(e8,{withHandle:!0}),s.jsx(e6,{defaultSize:25,minSize:15,children:s.jsx("footer",{className:"relative mx-auto flex h-full w-full flex-col gap-2 bg-content2",children:o?s.jsx(ez,{currentModel:m[o],modelState:m,providerState:o,onSubmit:O,isLoading:$,stop:M,clearChat:F}):null})})]})]})}),o?(0,s.jsxs)(s.Fragment,{children:[!x&&s.jsx(V,{},o),s.jsx(A,{}),s.jsx(e2,{})]}):null]})}},12523:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});var s=a(10326),n=a(1481);let r=({provider:e,width:t=40,height:a=40,className:r=""})=>{let l=e.toLowerCase().replaceAll(" ",""),i=l.includes("codegpt")?"codegpt":l??"custom";return s.jsx(n.J,{radius:"full",disableSkeleton:!0,loading:"lazy",src:`/logotypes/${i}.png`,width:t,height:a,className:`agent-avatar ${r}`,alt:i,classNames:{wrapper:"shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block",img:"rounded-full border border-content3 bg-content3 opacity-100 block"}})}},30967:(e,t,a)=>{"use strict";a.d(t,{E:()=>l});var s=a(35047),n=a(58838);let r=async({port:e})=>new Promise(async t=>{setTimeout(async()=>{let a={isEnabled:!1,maxTokens:500,provider:"CodeGPT Plus",model:"Plus",delay:1200},s=await fetch(`http://localhost:54112/${e}/api/autocomplete/config`).then(e=>e.json()).catch(()=>a);t({...a,...s})},500)});function l(){let e=(0,s.usePathname)().split("/")[1],{data:t,mutate:a,isLoading:l,isValidating:i}=(0,n.ZP)("/api/autocomplete/config",()=>r({port:e}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:5e3});return{configuration:t,isLoading:l??i,mutate:()=>new Promise(e=>{setTimeout(()=>{a().then(t=>{e(t)})},300)})}}},43955:(e,t,a)=>{"use strict";a.d(t,{T:()=>o});var s=a(60162),n=a(45541),r=a(35047),l=a(58838);let i=async({provider:e,port:t})=>new Promise(async a=>{setTimeout(async()=>{a((await fetch(`http://localhost:54112/${t}/api/${e}`,{method:"HEAD"})).ok)},500)});function o(){let e=(0,n.Y)(e=>e.selectedProvider),t=(0,r.usePathname)().split("/")[1],{mutate:a}=(0,s.v)(),{data:o,mutate:d}=(0,l.ZP)(`/api/agents/${e}`,()=>i({provider:e,port:t}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:1e3});return{isConnected:o,mutate:()=>(setTimeout(()=>a(),1e3),new Promise(e=>{setTimeout(()=>{d().then(t=>{e(t)})},300)}))}}},98618:(e,t,a)=>{"use strict";a.d(t,{w:()=>s});let s=(0,a(60114).Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}))},52377:(e,t,a)=>{"use strict";a.d(t,{c:()=>s});let s=(0,a(60114).Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t})),message:{title:"",description:"",subtitle:"",actions:null,provider:"",type:"alert"},setErrorMessage:({title:t,description:a,subtitle:s,actions:n,type:r,provider:l})=>e(()=>({message:{title:t||"System Message",description:a||"",subtitle:s||"",actions:n||null,provider:l||"",type:r||"alert"}}))}))},39939:(e,t,a)=>{"use strict";a.d(t,{Lm:()=>r,Vn:()=>l,YS:()=>i});var s=a(10326);let n=({children:e,className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",width:"24px",viewBox:"0 -960 960 960",className:t,fill:"currentColor",stroke:"currentColor",children:e}),r=({className:e})=>n({className:e,children:s.jsx("path",{d:"M451-404h58v-134h134v-58H509v-134h-58v134H317v58h134v134ZM104-130.92v-654.46q0-35.05 23.79-58.83Q151.57-868 186.62-868h586.76q35.05 0 58.83 23.79Q856-820.43 856-785.38v438.76q0 35.05-23.79 58.83Q808.43-264 773.38-264h-536.3L104-130.92ZM214-322h559.38q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93v-438.76q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H186.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v517.15L214-322Zm-52 0v-488 488Z"})}),l=({className:e})=>n({className:e,children:s.jsx("path",{d:"M160-360v-80h640v80H160Zm0-160v-80h640v80H160Z"})}),i=({className:e})=>n({className:e,children:s.jsx("path",{d:"m40-200 210-560h100l210 560h-96l-51-143H187l-51 143H40Zm176-224h168l-82-232h-4l-82 232Zm504 104v-120H600v-80h120v-120h80v120h120v80H800v120h-80Z"})})},17948:(e,t,a)=>{"use strict";a.d(t,{q:()=>s}),a(15424);var s=(0,a(46242).$)("395448ad66a04a8ccb5507391feafc0ccded9c25")},56865:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var s=a(45551),n=a(97656),r=a(93641),l=a(53973);async function i(){let e=n.settings?.secrets?.vicunaSession,t=e?JSON.parse(e):void 0,a=t?.accessToken;if(a&&parseInt(t.expiresAt+"000")<Date.now()){let e=(0,r.supabaseServer)((0,l.cookies)()),{data:n,error:i}=await e.auth.refreshSession({refresh_token:t.refreshToken});i?(console.log("vicu\xf1a refreshSession error: ",i.message),(i.message.includes("Refresh Token Not Found")||i.message.includes("Already Used"))&&await (0,s.setVicunaSession)({accessToken:"",refreshToken:"",expiresAt:""})):(await (0,s.setVicunaSession)({accessToken:n.session.access_token,refreshToken:n.session.refresh_token,expiresAt:String(n.session.expires_at)}),a=n.session.access_token)}return a}},65594:(e,t,a)=>{"use strict";a.r(t),a.d(t,{sendEvent:()=>o});var s=a(27745);a(26461);var n=a(56865),r=a(4012),l=a(24843),i=a(85723);let o=async({eventName:e,provider:t,model:a,promptTokens:s,completionTokens:n,totalTokens:l,target:i,value:o,statusCode:c,object:m,message:u,code_language:p,functionName:h})=>{let[g,x,f,b,j]=await Promise.all([r.default.getIsAnonymous(),r.default.getIdeLanguage(),r.default.getUserId(),r.default.getVersion(),a?r.default.getLanguage():""]);d({event:e||"Chat",data:{...{userType:"false"===g?"anonymous":"registered",...t?{provider:t}:{},...a?{model:a}:{},...s?{prompt_tokens:s}:{},...n?{completion_tokens:n}:{},...l?{total_tokens:l}:{},...i?{target:i}:{},...o?{value:o}:{},...m?{object:m}:{},...u?{message:u}:{},...j?{language_code:j}:{},...p?{code_language:p}:{},...h?{function_name:h}:{},language:x,source:process.env.SOURCE||"vscode",codeGPTVersion:b},...c?{statusCode:c}:{}},userId:f})};async function d({event:e,data:t,userId:a}){let s=[{event:e,properties:{...t,time:Date.now(),distinct_id:a,$insert_id:crypto.randomUUID()}}],r=await (0,n.default)();await l.default.post("https://api.codegpt.co/api/v1/telemetry",s,{headers:{"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{}}}).catch(e=>{console.error("Error sending telemetry",e)})}(0,i.ensureServerEntryExports)([o]),(0,s.registerServerReference)("395448ad66a04a8ccb5507391feafc0ccded9c25",o)},80839:()=>{},48607:()=>{}};