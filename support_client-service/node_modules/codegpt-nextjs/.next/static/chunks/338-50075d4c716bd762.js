(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{63726:function(e,t,a){"use strict";a.d(t,{j:function(){return n}}),a(74590);var n=(0,a(58064).$)("cb8707d39cee2d6b73f7d2a0c3a37eb9243fb61d")},50940:function(e,t,a){"use strict";a.d(t,{J:function(){return H}});var n=a(57437),l=a(2265),s=a(21363);let r=(0,l.memo)(s.U,(e,t)=>e.children===t.children&&e.className===t.className);var o=a(53898),i=a(45958),d=a(90207),c=a(22824),u=a(19997),m=a(83047),p=a(82688),h=a(58128),g=a(27393),v=a(92992),x=a(96038),f=a(37440),b=a(70654);a(40400),a(97046);var j=a(2436),w=a(12428),k=a(89651),y=a(38227),N=a(38919),C=a(15767),P=a(25968),A=a(18199),S=a(85707),_=a(22468),z=a(62140),T=a(79512),M=a(16463),I=a(27776),O=a(63074),R=a(4867);let L=O.fC,F=O.xz,D=O.h_;O.x8;let E=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(O.aV,{ref:t,className:(0,f.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",a),...l})});E.displayName=O.aV.displayName;let Z=l.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,n.jsxs)(D,{children:[(0,n.jsx)(E,{}),(0,n.jsxs)(O.VY,{ref:t,className:(0,f.cn)("data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 fixed left-1/2 top-1/2 z-50 mx-auto grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 rounded-xl bg-content2 p-6 shadow-lg duration-200 dark:shadow-none",a),...s,children:[l,(0,n.jsxs)(O.x8,{className:"close focus:ring-ring data-[state=open]:text-muted-foreground absolute right-6 top-6 flex h-7 w-7 items-center justify-center rounded-lg border border-content3 opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[(0,n.jsx)(R.Pxu,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});Z.displayName=O.VY.displayName;let U=e=>{let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};U.displayName="DialogHeader";let V=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(O.Dx,{ref:t,className:(0,f.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});V.displayName=O.Dx.displayName;let q=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,n.jsx)(O.dk,{ref:t,className:(0,f.cn)("text-muted-foreground text-sm",a),...l})});function Y(e){let{title:t,content:a,children:l,open:s,onOpenChange:r}=e;return(0,n.jsxs)(L,{open:s,onOpenChange:r,children:[(0,n.jsx)(F,{children:l}),(0,n.jsx)(Z,{children:(0,n.jsxs)(U,{children:[t&&(0,n.jsx)(V,{children:t}),(0,n.jsx)(q,{children:a})]})})]})}q.displayName=O.dk.displayName;let K=["javascript","typescript","js","ts","typescriptreact"],G=(0,l.memo)(e=>{var t;let a,{language:s,value:r,className:o}=e,[d,c]=(0,l.useState)(!1),[u,O]=(0,l.useState)(!1),{messages:R,setMessages:L,scrollToBottom:F}=(0,l.useContext)(p.p),D=(0,v.Y)(e=>e.selectedProvider),E=(0,M.usePathname)().split("/")[1],[Z,U]=(0,l.useState)(!1),[V,q]=(0,l.useState)(!1),{loginFromEventSource:G}=(0,j.R)(),{userData:H}=(0,h.v)(),{currentProviderModel:W}=(0,v.o)(),B=W[D],J=(0,g.X)(e=>e.agents);(0,l.useEffect)(()=>{if(B.fromMarketplace){var e;let t=J.find(e=>e.id===B.id);(null==t?void 0:null===(e=t.tools)||void 0===e?void 0:e[0])==="code-interpreter"&&q(!0)}},[J,B.fromMarketplace,B.id]);let{theme:X}=(0,T.F)(),$=()=>{(0,m.zp)(r).then(()=>{c(!0),setTimeout(()=>{c(!1)},2e3)})},Q=["python","py"].includes(s.toLowerCase())&&"codegptplusbeta"===D&&V,ee=async()=>{O(!0);let e=[...R],t=e.length-1,a=async e=>{let{times:t}=e;0!==t&&console.log("trying to run code ".concat(t," times"));let n=await fetch("http://localhost:54112/".concat(E,"/api/").concat(D,"/code_interpreter"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r})});if(!n.ok){let e=await n.json();if(console.log({responseData:e}),t>=1)throw I.A.error("".concat(e.message)),O(!1),Error("Error running code");return a({times:t+1})}return n.json()},n=await a({times:0}),l="";if(n.logs.stdout.length>0){let e=n.logs.stdout[0];l+="\n\nResult:\n".concat("```zsh\n"+e+"```")}if(n.results.length>0){var s,o,i;let e=(null==n?void 0:null===(s=n.results[0])||void 0===s?void 0:s.png)||(null==n?void 0:null===(o=n.results[0])||void 0===o?void 0:o.jpeg)||(null==n?void 0:null===(i=n.results[0])||void 0===i?void 0:i.svg);l+="\n\nImage Result:\n\n"+"![Code Interpreter Result](data:image/png;base64,".concat(e,")")}e[t].content+=l,L([]),L(e),O(!1),setTimeout(()=>{F()},300)},et=(0,n.jsxs)("div",{className:"grid gap-6",children:[(0,n.jsx)("section",{className:"mt-0.5",children:(0,n.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[(0,n.jsxs)("div",{className:"flex select-none items-center gap-2",children:[(0,n.jsx)(w.Z,{className:"h-6 w-6 shrink-0 text-default-500"}),(0,n.jsx)("p",{className:"text-lg",children:"Code Interpreter"})]}),(0,n.jsx)(y.z,{variant:"flat",size:"sm",startContent:(0,n.jsx)(k.Z,{className:"mb-px aspect-square size-4 shrink-0 text-default-500"}),classNames:{content:"text-default-500 text-xs",base:"px-2"},children:"Sign-in required"})]})}),(0,n.jsx)("section",{className:"grid gap-2",children:(0,n.jsx)("article",{className:"grid gap-4",children:(0,n.jsx)("p",{className:"text-medium",children:'The "code interpreter" function executes code and performs calculations, enabling interactive technical queries and data analysis in python.'})})}),(0,n.jsxs)("section",{className:"grid gap-4",children:[(0,n.jsx)(N.j,{}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(C.A,{className:"w-fit border border-primary-400/10 text-primary-400",variant:"flat",color:"primary",onPress:async()=>{var e;let t=crypto.randomUUID();await (0,m.Yo)("".concat(x.Ft,"/signup?source=vscode&distinct_id=").concat(await (0,j.k)(),"&connection_id=").concat(t)),G(t),(0,b.q)({eventName:"ads",object:"adButton",message:"Interpreter ".concat((null==H?void 0:null===(e=H.plan)||void 0===e?void 0:e.includes("trial"))?"Upgrade":"SignUp")})},children:(null==H?void 0:null===(t=H.plan)||void 0===t?void 0:t.includes("trial"))?"Upgrade":"Sign Up"}),(0,n.jsx)(C.A,{variant:"bordered",className:"w-fit border",onPress:()=>{(0,m.os)("https://docs.codegpt.co/docs/tutorial-features/code_interpreter")},children:"Learn more"})]})]})]});try{a=P.Z.highlight(r,{language:K.includes(s.toLowerCase())?"tsx":s}).value}catch(e){a=P.Z.highlight(r,{language:"plaintext"}).value}return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:(0,f.cn)("chat codeblock w-full overflow-auto whitespace-pre-wrap break-words text-sm","dark"===X?"darkmode":"lightmode"),children:[(0,n.jsxs)("header",{className:"sticky -top-4 z-10 flex items-center justify-between border-b border-content3 bg-content1/90 px-2 py-1.5 text-xs text-default-500 backdrop-blur-sm",children:[(0,n.jsx)("span",{className:"language-label text-sm capitalize",children:function(e){var t;let a=i.a2.find(t=>t.value===e||t.label===e);return(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{style:{height:"1rem"},"data-language":null==a?void 0:a.label}),(0,n.jsx)("span",{className:"text-xs",children:null!==(t=null==a?void 0:a.label)&&void 0!==t?t:e})]})}(s)}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[Q?(null==H?void 0:H.loggedIn)?(0,n.jsx)(C.A,{size:"sm",variant:"light",className:"text-default-500",isLoading:u,onPress:()=>{ee(),(0,I.A)("Running Code"),(0,b.q)({eventName:"clickOver",target:"RunCodeInterpreter"})},startContent:u?null:(0,n.jsx)(A.Z,{className:"h-4 w-4 shrink-0"}),children:"Run code"}):(0,n.jsx)(Y,{open:Z,onOpenChange:U,content:et,children:(0,n.jsx)(C.A,{size:"sm",variant:"light",className:"text-default-500",startContent:(0,n.jsx)(A.Z,{className:"h-4 w-4 shrink-0"}),onPress:()=>{U(!0),(0,b.q)({eventName:"clickOver",target:"RunCodeInterpreterModalWithoutAccount"})},children:"Run code"})}):null,(0,n.jsxs)(C.A,{size:"sm",variant:"light",className:"text-default-500",onPress:()=>{(0,m.Nq)(r).catch(()=>{console.error("Error inserting code")}),(0,b.q)({eventName:"insertCode",code_language:s}),I.A.success("Code inserted",{duration:3e3,dismissible:!0,closeButton:!0})},children:[(0,n.jsx)(S.Z,{className:"h-4 w-4 shrink-0"}),"Insert code"]}),(0,n.jsx)(C.A,{size:"sm",variant:"light",className:"text-default-500",isIconOnly:!0,startContent:d?(0,n.jsx)(_.Z,{className:"h-4 w-4 shrink-0"}):(0,n.jsx)(z.Z,{className:"h-4 w-4 shrink-0"}),onPress:()=>{$(),(0,b.q)({eventName:"copyCode",code_language:s}),I.A.success("Code copied to clipboard",{duration:3e3,dismissible:!0,closeButton:!0})}})]})]}),(0,n.jsx)("pre",{className:"direction-ltr word-spacing-normal word-break-normal tab-size[2] z-0 m-0 overflow-auto hyphens-none whitespace-pre p-3 text-left leading-6",children:(0,n.jsx)("code",{className:"direction-ltr word-spacing-normal word-break-normal tab-size[2] hyphens-none whitespace-pre text-left leading-6 ",dangerouslySetInnerHTML:{__html:a}})})]})})});G.displayName="CodeBlock";let H=e=>{let{content:t,codeBlockClassName:a,isLoading:l}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(r,{rehypePlugins:[[c.Z]],remarkPlugins:[u.Z],allowedElements:["a","p","h1","h2","h3","h4","h5","h6","ol","ul","li","code","pre","strong","em","del","u","img","b","i","blockquote","br","hr","span","table","thead","tbody","tr","th","td","caption","colgroup",...l?[]:["div"]],skipHtml:!0,urlTransform:e=>e,unwrapDisallowed:!0,components:{div(e){let{node:t,children:a}=e,{type:l,href:s}=t.properties;return"link"===l&&s?(0,n.jsx)(o.default,{href:s,isExternal:!0,className:"w-full cursor-pointer",children:a}):(0,n.jsx)("div",{children:a})},code(e){var t,a;let{node:l,inline:s,className:r,children:o,...c}=e,u=null==r?void 0:r.replaceAll("language-",""),m=i.a2.find(e=>e.value===u),p=String(o);return"undefined"===p?null:!s&&r?(0,n.jsx)(G,{language:null!==(a=null!==(t=null==m?void 0:m.label)&&void 0!==t?t:u)&&void 0!==a?a:"",value:p}):(0,n.jsx)(d.z,{size:"sm",className:"whitespace-break-spaces",children:p})},a(e){let{node:t,children:a}=e;return(0,n.jsx)("span",{"attr-type":"link","attr-href":t.url,children:a})}},children:t})})}},82688:function(e,t,a){"use strict";a.d(t,{p:function(){return ty},default:function(){return tN}});var n=a(57437),l=a(83047),s=a(92992),r=a(16463),o=a(29039);let i=async e=>{let{provider:t,port:a}=e;return new Promise(async e=>{setTimeout(async()=>{let n={maxTokens:512,temperature:0,windowMemory:10},l=await fetch("http://localhost:54112/".concat(a,"/api/").concat(t,"/config")).then(e=>e.json()).catch(()=>n);e({...n,...l})},500)})};function d(){let e=(0,s.Y)(e=>e.selectedProvider),t=(0,r.usePathname)().split("/")[1],{data:a,mutate:n,isLoading:l,isValidating:d}=(0,o.ZP)("/api/agents/".concat(e,"/config"),()=>i({provider:e,port:t}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:0});return{configuration:a,isLoading:null!=l?l:d,mutate:()=>new Promise(e=>{setTimeout(()=>{n().then(t=>{e(t)})},300)})}}var c=a(39099);let u=(0,c.Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}));var m=a(70654),p=a(73541),h=a(13934),g=a(74934),v=a(88068),x=a(81887),f=a(38919),b=a(51531),j=a(47971),w=a(2265),k=a(27776),y=a(96038),N=a(2436),C=a(15767);let P={codegptplus:{name:"CodeGPT Plus (legacy)",OAuthLogin:e=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.A,{color:"primary",variant:"bordered",onClick:async()=>{await (0,l.Yo)("https://account.codegpt.co/external-signin"),e(!1)},children:"Connect to CodeGPT Plus (legacy)"}),(0,n.jsx)(f.j,{})]}),apikey:!0,apikey_placeholder:"CodeGPT Plus (legacy) ApiKey",connection_info_link:[{label:"Read more about CodeGPT Plus (legacy) apikey",link:"https://plus.codegpt.co/settings/apikey"}],max_tokens:!0,temperature:!0},codegptplusbeta:{name:"CodeGPT Plus",OAuthLogin:e=>{let{loginFromEventSource:t}=(0,N.R)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 content-stretch items-center justify-center gap-2",children:[(0,n.jsx)(C.A,{color:"primary",fullWidth:!0,onPress:async()=>{let a=crypto.randomUUID();await (0,l.Yo)("".concat(y.Ft,"/signup?source=vscode&distinct_id=").concat(await (0,N.k)(),"&connection_id=").concat(a)),t(a),e(!1)},children:"Sign Up"}),(0,n.jsx)(C.A,{variant:"bordered",fullWidth:!0,className:"border",onPress:async()=>{let a=crypto.randomUUID();await (0,l.Yo)("".concat(y.Ft,"/login?source=vscode&distinct_id=").concat(await (0,N.k)(),"&connection_id=").concat(a)),t(a),e(!1)},children:"Sign In"})]})})},apikey:!0,apikey_placeholder:"CodeGPT Plus ApiKey",org:!0,connection_info_link:[{label:"Read more about CodeGPT Plus apikey",link:"".concat(y.Ft,"/en/apikeys")}],max_tokens:!0,temperature:!0},codegptenterprise:{name:"CodeGPT Enterprise",apikey:!0,apikey_placeholder:"CodeGPT Enterprise ApiKey",org:!0,connection_info_link:[{label:"Read more about CodeGPT Plus apikey",link:"".concat(y.Ft,"/en/apikeys")}],customLink:!0,customLink_placeholder:"Custom Link (https://{API URL}/api/v1)",max_tokens:!0,temperature:!0},openai:{name:"OpenAI",apikey:!0,org:!0,connection_info_link:[{label:"Read more about OpenAI apikey",link:"https://platform.openai.com/api-keys"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about OpenAI config",link:"https://platform.openai.com/docs/api-reference/chat/create"}]},azure:{name:"Azure",apikey:!0,customLink:!0,connection_info_link:[{label:"Read more about Azure apikey",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Azure (OpenAI) config",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#chat-completions"}]},cohere:{name:"Cohere",apikey:!0,connection_info_link:[{label:"Read more about Cohere apikey",link:"https://dashboard.cohere.com/api-keys"}],temperature:!0,config_info_link:[{label:"Read more about Cohere config",link:"https://docs.cohere.com/docs/cochat-beta#define-the-model-settings"}]},anthropic:{name:"Anthropic",apikey:!0,connection_info_link:[{label:"Read more about Anthropic apikey",link:"https://console.anthropic.com/login"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Anthropic config",link:"https://docs.anthropic.com/claude/reference/messages_post"}]},googleaistudio:{name:"Google AI Studio",apikey:!0,apikey_placeholder:"ApiKey (Google-AI-Studio models)",connection_info_link:[{label:"Read more about Google-Ai-Studio",link:"https://makersuite.google.com/app/apikey"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Google-Ai-Studio config",link:"https://ai.google.dev/docs/gemini_api_overview"}]},vertex:{name:"Vertex",customLink:!0,customLink_placeholder:"Custom Link (Vertex models)",oAuthFile:!0,oAuthFile_placeholder:'Upload JSON file ↑ (Vertex "apikey" (credentials.json))',connection_info_link:[{label:"Read more about Vertex credentials",link:"https://developers.google.com/workspace/guides/create-credentials"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Vertex config",link:"https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/gemini?hl=es-419#request_body"}]},ollama:{name:"Ollama",disableConnection:!0},fireworksai:{name:"FireworksAI",apikey:!0,connection_info_link:[{label:"Read more about FireworksAI apikey",link:"https://app.fireworks.ai/users?tab=apps"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about FireworksAI config",link:"https://readme.fireworks.ai/reference/createchatcompletion"}]},mistral:{name:"Mistral",apikey:!0,connection_info_link:[{label:"Read more about Mistral apikey",link:"https://console.mistral.ai/user/api-keys/"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Mistral config",link:"https://docs.mistral.ai/api"}]},huggingface:{name:"HuggingFace",apikey:!0,connection_info_link:[{label:"Read more about HuggingFace apikey",link:"https://huggingface.co/settings/tokens"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about HuggingFace config",link:"https://huggingface.co/docs/api-inference/detailed_parameters?code=js"}]},custom:{name:"Custom",apikey:!0,customLink:!0,max_tokens:!0,temperature:!0},bedrock:{name:"Bedrock",region:!0,access_key_id:!0,secret_access_key:!0,session_token:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Bedrock connection info",link:"https://aws.amazon.com/bedrock/"}]},perplexity:{name:"Perplexity",apikey:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Perplexity apikey",link:"https://docs.perplexity.ai/reference/post_chat_completions"}]},lmstudio:{name:"LM Studio",max_tokens:!0,temperature:!0,disableConnection:!0},groq:{name:"Groq",apikey:!0,connection_info_link:[{label:"Read more about Groq apikey",link:"https://wow.groq.com/"}],max_tokens:!0,temperature:!0},nvidia:{name:"Nvidia",apikey:!0,connection_info_link:[{label:"Read more about Nvidia apikey",link:"https://build.nvidia.com/"}],max_tokens:!0,temperature:!0},deepseek:{name:"DeepSeek",apikey:!0,connection_info_link:[{label:"Read more about DeepSeek apikey",link:"https://platform.deepseek.com/"}],max_tokens:!0,temperature:!0}};function A(){var e,t;let{configuration:a,mutate:r}=d(),o=(0,s.Y)(e=>e.selectedProvider),i=P[o],c=null!==(e=null==a?void 0:a.temperature)&&void 0!==e?e:0,y=null!==(t=null==a?void 0:a.windowMemory)&&void 0!==t?t:10,[N,C]=(0,w.useState)(!1),[A,S]=(0,w.useState)(c?c>.7?"creative":c>.2?"balanced":"precise":"precise"),[_,z]=(0,w.useState)(!1),{isOpen:T,setOpen:M}=u();(0,w.useEffect)(()=>{z(o.toLowerCase().includes("codegpt"))},[o]);let I=async(e,t)=>{C(!0),(0,m.q)({eventName:"changeValue",target:t,value:e.toString()}),"MaxTokens"===t&&await (0,l.af)(e.toString()),"Temperature"===t&&await (0,l.MQ)(e.toString()),"WindowMemory"===t&&await (0,l.Dz)(e.toString()),r().then(()=>{k.A.success("Configuration updated"),C(!1)})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g.R,{isOpen:T,placement:"top",scrollBehavior:"inside",size:"xl",classNames:{body:"px-8 pt-8 pb-10",closeButton:"h-10 w-10 p-0 flex items-center justify-center rounded-full absolute top-3 right-6 bg-content2 dark:bg-content2"},onOpenChange:async()=>{r(),M(!1)},children:(0,n.jsx)(v.A,{children:()=>{var e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(x.I,{children:[(0,n.jsxs)("div",{className:"grid gap-2 border-0 pb-4 font-normal",children:[(0,n.jsxs)("div",{className:"flex select-none items-center gap-2",children:[(0,n.jsx)(p.Z,{className:"h-6 w-6 shrink-0 text-default-500"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{children:i.name})," "," Settings"]})]}),(0,n.jsx)("p",{className:"text-sm text-default-500",children:"Ensure to properly configure your providers parameters here"})]}),(0,n.jsx)(f.j,{}),(0,n.jsxs)("div",{className:"grid gap-8 pt-4",children:[i.temperature&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(b.L,{isDisabled:N,label:(0,n.jsxs)("p",{className:"flex items-center justify-between gap-2",children:[(0,n.jsx)("span",{children:"Conversation Style"}),(0,n.jsx)("span",{children:"|"}),(0,n.jsx)("span",{children:A})]}),"aria-label":"Temperature",color:"primary",minValue:0,maxValue:1,step:.01,defaultValue:c,classNames:{label:"capitalize"},onChangeEnd:e=>{S(Number(e)?Number(e)>.7?"creative":Number(e)>.2?"balanced":"precise":"precise"),I(Number(e),"Temperature")}}),(0,n.jsxs)("p",{className:"flex gap-1 text-xs text-default-500",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 shrink-0"}),"Temperature or creativity of the AI model. Higher values can lead to more creative responses, but may also lead to more unaccurate responses."]})]}),(0,n.jsx)(f.j,{})]}),(0,n.jsxs)("div",{className:"grid gap-2",children:[(0,n.jsx)(b.L,{isDisabled:N,label:"Memory","aria-label":"windowMemory",minValue:0,maxValue:_?10:100,defaultValue:y,onChangeEnd:e=>I(Number(e),"WindowMemory")}),(0,n.jsxs)("p",{className:"flex gap-1 text-xs text-default-500",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4 shrink-0"}),"Number of previous messages to consider when generating a response."]})]})]})]}),i.config_info_link&&i.config_info_link.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.j,{}),(0,n.jsx)(j.R,{children:(0,n.jsx)("p",{className:"mx-auto w-full text-center text-xs text-default-500",children:null===(e=i.config_info_link)||void 0===e?void 0:e.map((e,t)=>(0,n.jsx)("span",{children:e.label&&(0,n.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",onClick:()=>(0,l.Yo)(e.link),children:e.label})},t))})})]})]})}})})})}var S=a(63726),_=a(36833),z=a(2193),T=a(42631),M=a(43107),I=a(69992),O=a(52985),R=a(47193),L=a(47713),F=a(64954),D=a(68760),E=a(69012),Z=a(95256),U=a(59856),V=a(38746);function q(){let{isOpen:e,setOpen:t}=(0,T.U)(),[a,r]=(0,w.useState)(""),[o,i]=(0,w.useState)(""),[d,c]=(0,w.useState)(""),[u,m]=(0,w.useState)(""),[p,h]=(0,w.useState)(""),[f,b]=(0,w.useState)(""),[y,N]=(0,w.useState)(""),[A,q]=(0,w.useState)(!1),{isConnected:Y,mutate:K}=(0,z.T)(),G=async e=>{let t=e[0];if("json"!==t.name.split(".").pop()){k.A.error("File type not supported",{position:"top-center",dismissible:!0,duration:5e3});return}try{let e=await t.text();(await (0,l.vC)(e)).ok?k.A.success("File uploaded",{position:"top-center"}):k.A.error("Error uploading file",{position:"top-center"})}catch(e){k.A.error("Error processing json")}},{getRootProps:H,getInputProps:W}=(0,V.uI)({onDrop:G,multiple:!1,useFsAccessApi:!1}),B=(0,s.Y)(e=>e.selectedProvider),J=P[B],X=(0,w.useCallback)(async()=>{await Promise.all([a?(0,l.Lb)(a).then(()=>r("")):null,o?(0,l.CG)(o).then(()=>i("")):null,d?(0,l.rM)(d).then(()=>c("")):null,u?(0,l.TF)(u).then(()=>m("")):null,p?(0,l.NV)(p).then(()=>h("")):null,f?(0,l.lk)(f).then(()=>b("")):null,y?(0,l.W0)(y).then(()=>N("")):null]),K(),t(!1)},[p,a,d,K,o,u,f,y,t]),$=()=>{J.apikey&&(0,l.Lb)("").then(()=>r("")),J.org&&(0,l.CG)("").then(()=>i("")),J.customLink&&(0,l.rM)("").then(()=>c("")),J.region&&(0,l.TF)("").then(()=>m("")),J.access_key_id&&(0,l.NV)("").then(()=>h("")),J.secret_access_key&&(0,l.lk)("").then(()=>b("")),J.session_token&&(0,l.W0)("").then(()=>N("")),"CodeGPT Plus"===J.name&&(0,S.j)({accessToken:"",refreshToken:"",expiresAt:""}),K()},Q=(e,t)=>{let a=e.target.value;if(("x"===e.key.toLowerCase()||"KeyX"===e.code)&&(e.metaKey||e.ctrlKey)&&e.target instanceof HTMLInputElement){e.preventDefault();let n=e.target,{selectionStart:s,selectionEnd:o}=n;if(null!==s&&null!==o&&s!==o){let e=n.value.substring(s,o);(0,l.zp)(e).then(()=>{let e=a.substring(0,s)+a.substring(o);"apikey"===t&&r(e),"orgid"===t&&i(e),"customlink"===t&&c(e),"region"===t&&m(e),"accesskeyid"===t&&h(e),"secretaccesskey"===t&&b(e),"sessiontoken"===t&&N(e)})}}("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,l.M1)().then(n=>{let{selectionStart:l,selectionEnd:s}=e.target,o=a.substring(0,null!=l?l:a.length)+n+a.substring(null!=s?s:a.length);"apikey"===t&&r(o),"orgid"===t&&i(o),"customlink"===t&&c(o),"region"===t&&m(o),"accesskeyid"===t&&h(o),"secretaccesskey"===t&&b(o),"sessiontoken"===t&&N(o)})),(0,M.g)(e)};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g.R,{isOpen:e,placement:"center",scrollBehavior:"inside",onOpenChange:()=>{K(),t(!1)},children:(0,n.jsx)(v.A,{children:()=>{var e,s,g,v;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Z.k,{className:"flex flex-row items-center gap-4",children:[(0,n.jsx)("div",{className:"size-fit",children:(0,n.jsx)(_.T,{provider:B,width:48,height:48,className:"rounded-lg border border-default-200"})}),(0,n.jsxs)("div",{className:"flex flex-col font-normal",children:[(0,n.jsxs)("span",{className:"select-none",children:["Connect to ",J.name]}),(0,n.jsx)("span",{className:"text-small text-default-500",children:"CodeGPT Plus"!==J.name?"Before engaging with this model, ensure proper configuration or connection.":"Connect to CodeGPT Plus to use the latest features for free."})]})]}),(0,n.jsx)(x.I,{children:Y?(0,n.jsx)(C.A,{color:"danger",variant:"flat",className:"border border-danger-500/20",onPress:$,children:"CodeGPT Plus"===J.name?"Disconnect from CodeGPT Plus":"Disconnect"}):(0,n.jsxs)(n.Fragment,{children:[J.OAuthLogin&&J.OAuthLogin(t),"CodeGPT Plus"!==J.name&&(0,n.jsxs)(n.Fragment,{children:[J.apikey&&(0,n.jsx)(U.Y,{value:a,onChange:e=>r(e.target.value),onKeyDown:e=>Q(e,"apikey"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:null!==(s=J.apikey_placeholder)&&void 0!==s?s:"ApiKey",startContent:(0,n.jsx)(I.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onPress:()=>q(!A),children:A?(0,n.jsx)(O.Z,{className:"size-5"}):(0,n.jsx)(R.Z,{className:"size-5"})}),(0,n.jsx)(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,l.M1)().then(e=>r(e)),children:"Paste"})]}),type:A?"text":"password",isRequired:!0}),J.org&&(0,n.jsx)(U.Y,{value:o,onChange:e=>i(e.target.value),onKeyDown:e=>Q(e,"orgid"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Organization ID (optional)",startContent:(0,n.jsx)(L.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,l.M1)().then(e=>i(e)),children:"Paste"}),type:"search"}),J.customLink&&(0,n.jsx)(U.Y,{value:d,onChange:e=>c(e.target.value),onKeyDown:e=>Q(e,"customlink"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:null!==(g=J.customLink_placeholder)&&void 0!==g?g:"Custom Link",startContent:(0,n.jsx)(F.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,l.M1)().then(e=>c(e)),children:"Paste"}),type:"search"}),J.region&&(0,n.jsx)(U.Y,{value:u,onChange:e=>m(e.target.value),onKeyDown:e=>Q(e,"region"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Region",startContent:(0,n.jsx)(D.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,l.M1)().then(e=>m(e)),children:"Paste"}),type:"search"}),J.access_key_id&&(0,n.jsx)(U.Y,{value:p,onChange:e=>h(e.target.value),onKeyDown:e=>Q(e,"accesskeyid"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Access Key ID",startContent:(0,n.jsx)(I.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,l.M1)().then(e=>h(e)),children:"Paste"}),type:"search"}),J.secret_access_key&&(0,n.jsx)(U.Y,{value:f,onChange:e=>b(e.target.value),onKeyDown:e=>Q(e,"secretaccesskey"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Secret Access Key",startContent:(0,n.jsx)(I.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>q(!A),className:"cursor-pointer",children:A?(0,n.jsx)(O.Z,{className:"size-5"}):(0,n.jsx)(R.Z,{className:"size-5"})}),(0,n.jsx)(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,l.M1)().then(e=>b(e)),children:"Paste"})]}),type:A?"text":"password"}),J.session_token&&(0,n.jsx)(U.Y,{value:y,onChange:e=>N(e.target.value),onKeyDown:e=>Q(e,"sessiontoken"),"aria-label":"Password",labelPlacement:"outside",variant:"bordered",size:"lg",classNames:{input:"pointer-events-none text-sm"},placeholder:"Session Token",startContent:(0,n.jsx)(I.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>q(!A),className:"cursor-pointer",children:A?(0,n.jsx)(O.Z,{className:"size-5"}):(0,n.jsx)(R.Z,{className:"size-5"})}),(0,n.jsx)(C.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,l.M1)().then(e=>N(e)),children:"Paste"})]}),type:A?"text":"password"}),J.oAuthFile&&(0,n.jsxs)("div",{...H(),children:[(0,n.jsx)("input",{...W(),className:"hidden"}),(0,n.jsx)("div",{className:"cursor-pointer select-none",children:(0,n.jsx)(U.Y,{value:"","aria-label":"oAuthFile",size:"lg",labelPlacement:"outside",variant:"bordered",className:"pointer-events-none",classNames:{input:"pointer-events-none text-sm"},placeholder:null!==(v=J.oAuthFile_placeholder)&&void 0!==v?v:"Upload JSON file ↑",startContent:(0,n.jsx)(E.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(C.A,{variant:"bordered",color:"default",size:"sm",className:"border",onPress:()=>{},children:"Upload"})})})]}),(0,n.jsx)(C.A,{type:"submit",color:"default",onPress:X,children:"Connect"})]})]})}),(0,n.jsx)(j.R,{className:"justify-center",children:(0,n.jsx)("p",{className:"flex flex-col text-small text-default-500",children:"CodeGPT Plus"!==J.name&&(null===(e=J.connection_info_link)||void 0===e?void 0:e.map((e,t)=>(0,n.jsx)("span",{children:e.label&&(0,n.jsx)("a",{className:"text-primary-500 hover:underline",href:e.link,target:"_blank",rel:"noreferrer",onClick:()=>(0,l.Yo)(e.link),children:e.label})},t)))})})]})}})})})}var Y=a(45958),K=a(37440),G=a(9086),H=a(39519),W=a(78357),B=a(58151),J=a(70075),X=a(29572),$=a(1679),Q=a(4),ee=a(42170),et=a(72100),ea=a(98041),en=a(75665),el=a(23705),es=a(43061),er=a(82804),eo=a(27393),ei=a(85726),ed=a(85427);let ec=(0,w.forwardRef)((e,t)=>{var a;let[l,s]=(0,w.useState)(0),r=t=>{let a=e.items[t];a&&e.command({id:a.id,label:a.label})},o=()=>{s((l+e.items.length-1)%e.items.length)},i=()=>{s((l+1)%e.items.length)},d=()=>{r(l)};return(0,w.useEffect)(()=>{s(0)},[e.items]),(0,w.useImperativeHandle)(t,()=>({onKeyDown:e=>{let{event:t}=e;return"ArrowUp"===t.key?(o(),!0):"ArrowDown"===t.key?(i(),!0):"Enter"===t.key&&(d(),!0)}})),(0,n.jsx)("ul",{className:"items grid w-80 rounded-xl bg-content3 p-1 text-sm text-default-500 shadow-lg",children:(null===(a=e.items)||void 0===a?void 0:a.length)?e.items.map((e,t)=>(0,n.jsx)("li",{className:"item flex cursor-pointer items-center justify-between gap-1 rounded-lg border p-1 hover:border-content4 hover:bg-content4 hover:text-foreground ".concat(t===l?"border-content4 bg-content4 text-foreground":"border-transparent bg-transparent"),children:(0,n.jsxs)("div",{onClick:()=>r(t),className:"flex items-center gap-1 transition-all",children:["command"===e.type?(0,n.jsx)(ed.Z,{className:"h-4 w-4 shrink-0"}):(0,n.jsx)("span",{className:"command command-with-icon relative h-6 items-center gap-1 overflow-hidden border-content4 p-0 text-2xl","data-language":e.label.split(".")[1]}),e.label]},t)},t)):(0,n.jsx)("div",{className:"item flex items-center gap-1 rounded-lg border px-2 py-1",children:"No result"})})});ec.displayName="SuggestionList";let eu=e=>{var t,a;let{query:n}=e,l=eo.X.getState().agents,{currentProviderModel:r}=s.o.getState(),{selectedProvider:o}=s.Y.getState(),i=r[o];return[...(null===(a=l.find(e=>(null==e?void 0:e.id)===(null==i?void 0:i.id)))||void 0===a?void 0:null===(t=a.tools)||void 0===t?void 0:t.includes("stackoverflow"))?[{id:"stackOverflow",label:"Stack Overflow",type:"command"}]:[],{id:"findProblems",label:"Fix",type:"command"},{id:"explain",label:"Explain",type:"command"},{id:"refactor",label:"Refactor",type:"command"},{id:"document",label:"Document",type:"command"},{id:"unitTest",label:"Unit Test",type:"command"}].filter(e=>e.label.toLowerCase().startsWith(n.toLowerCase())).slice(0,6)},em=()=>{let e,t;return{onStart:a=>{a.clientRect&&(e=new el.M_(ec,{props:a,editor:a.editor}),t=(0,ei.ZP)("body",{getReferenceClientRect:a.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"top-start",maxWidth:"".concat(window.innerWidth-24,"px")}))},onUpdate(a){e.updateProps(a),a.clientRect&&t[0].setProps({getReferenceClientRect:a.clientRect})},onKeyDown(a){var n;return"Escape"===a.event.key?(t[0].hide(),!0):null===(n=e.ref)||void 0===n?void 0:n.onKeyDown(a)},onExit(){t[0].destroy(),e.destroy()}}},ep=null,eh=null;async function eg(){return eh&&clearTimeout(eh),ep?eh=setTimeout(async()=>{console.log("CACHE UPDATED ALLPATHS"),ep=await (0,l.yR)()},350):ep=await (0,l.yR)(),ep}let ev=async e=>{let{query:t}=e;return[...await eg()].map(e=>{let t=e.split("/");return{label:t.length>3?".../".concat(t[t.length-3],"/").concat(t[t.length-2],"/").concat(t[t.length-1]):e,id:e,type:"path"}}).filter(e=>e.label.toLowerCase().includes(t.toLowerCase())).slice(0,10)},ex=()=>{let e,t;return{onStart:a=>{a.clientRect&&(e=new el.M_(ec,{props:a,editor:a.editor}),t=(0,ei.ZP)("body",{getReferenceClientRect:a.clientRect,appendTo:()=>document.body,content:e.element,showOnCreate:!0,interactive:!0,trigger:"manual",placement:"top-start",maxWidth:"".concat(window.innerWidth-24,"px")}))},onUpdate(a){e.updateProps(a),a.clientRect&&t[0].setProps({getReferenceClientRect:a.clientRect})},onKeyDown(a){var n;return"Escape"===a.event.key?(t[0].hide(),!0):null===(n=e.ref)||void 0===n?void 0:n.onKeyDown(a)},onExit(){t[0].destroy(),e.destroy()}}};var ef=a(24146);function eb(e){let{size:t=4,color:a="current",className:l,label:s}=e,r="w-".concat(t," h-").concat(t);return(0,n.jsx)("div",{className:"flex items-center justify-center gap-1 text-xs text-default-500",children:(0,n.jsx)(ef.c,{size:"sm",color:"current",label:s,className:l,classNames:{base:r,wrapper:r,circle1:r,circle2:r}})})}var ej=a(58128);let ew=(0,c.Ue)(e=>({image:{base64:"",name:""},setImage:t=>{let{base64:a,name:n}=t;return e({image:{base64:a,name:n}})},showTooltip:!1,setShowTooltip:t=>e({showTooltip:t})}));var ek=a(64091),ey=a(69954),eN=a(96211),eC=a(38227),eP=a(957);function eA(e){var t,a;let{isLoading:r}=e,{selectedProvider:o,setSelectedProvider:i}=(0,s.Y)(),{userData:d}=(0,ej.v)(),{mutate:c}=(0,z.T)(),u=(0,T.U)(e=>e.setOpen),{image:p,setImage:h,setShowTooltip:g}=ew(),{loginFromEventSource:v}=(0,N.R)(),x=async e=>{let t=e[0],a=t.name.split(".").pop(),n=t.name;if(["png","jpg","jpeg","webp"].includes("image/"+a)){k.A.error("File type not supported",{position:"top-center",dismissible:!0,duration:5e3});return}try{let e=await new Promise((e,a)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=e=>a(e)});h({base64:e,name:n}),g(!0)}catch(e){k.A.error("Error uploading file")}},f=()=>{(0,m.q)({eventName:"clickOver",target:"uploadImage"})},{getInputProps:b,open:j}=(0,V.uI)({onDrop:x,multiple:!1,useFsAccessApi:!1,noClick:!0,accept:{"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],..."ollama"!==o&&{"image/webp":[".webp"]}}});return["codegptplusbeta","ollama"].includes(o)?(null==d?void 0:null===(t=d.plan)||void 0===t?void 0:t.toLowerCase())!=="free"?(0,n.jsxs)(C.A,{size:"sm",isIconOnly:!0,variant:"bordered",onPress:()=>{f(),p.base64?h({base64:"",name:""}):j()},isDisabled:r,className:"border",children:[(0,n.jsx)("input",{...b(),className:"hidden"}),p.base64?(0,n.jsx)("div",{className:"relative h-full w-full overflow-hidden",style:{backgroundImage:"url(".concat(p.base64,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}):(0,n.jsx)(ey.Z,{className:"h-4 w-4 shrink-0"})]}):(0,n.jsx)(eN.e,{classNames:{content:"bg-content2",base:"p-4 bg-transparent"},offset:0,content:(0,n.jsxs)("div",{className:"grid max-w-xs gap-4 px-1 py-2",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("p",{className:"text-xs font-bold uppercase",children:"Vision"}),(0,n.jsx)(eC.z,{variant:"flat",size:"sm",color:"primary",startContent:(0,n.jsx)(eP.Z,{className:"mb-px aspect-square size-3 shrink-0 text-primary-500"}),classNames:{content:"text-primary-500"},children:"Plus"})]}),(0,n.jsx)("span",{className:"text-md text-default-500",children:"Upload an image to use as a prompt for the model. Only available in CodeGPT and Ollama model providers."}),(0,n.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,n.jsx)(C.A,{className:"w-fit",size:"sm",onPress:async()=>{var e;let t=crypto.randomUUID();await (0,l.Yo)("".concat(y.Ft,"/signup?source=vscode&distinct_id=").concat(await (0,N.k)(),"&connection_id=").concat(t)),v(t),(0,m.q)({eventName:"ads",object:"adButton",message:"Vision ".concat((null==d?void 0:null===(e=d.plan)||void 0===e?void 0:e.includes("trial"))?"Upgrade":"SignUp")})},children:(null==d?void 0:null===(a=d.plan)||void 0===a?void 0:a.includes("trial"))?"Upgrade":"Sign Up"}),(0,n.jsx)(C.A,{variant:"bordered",className:"w-fit border",size:"sm",onPress:()=>{(0,l.os)("https://docs.codegpt.co/docs/tutorial-features/vision")},children:"Learn more"})]})]}),children:(0,n.jsx)(C.A,{size:"sm",onPress:()=>{f(),"codegptplusbeta"!==o&&((0,ek.$)(),i("codegptplusbeta"),c().then(()=>{u(!0)}))},variant:"bordered",isIconOnly:!0,className:"border",startContent:(0,n.jsx)(ey.Z,{className:"h-4 w-4 shrink-0"})})}):null}let eS=new er.H$("userCommand"),e_=new er.H$("userFile"),ez=X.hj.create({name:"keyboardHandler"});function eT(e){var t;let a=Y.a2.find(t=>t.value===e);return null!==(t=null==a?void 0:a.label)&&void 0!==t?t:e}function eM(e){var t,a,r,o,i,d,c,h,g,v;let{onSubmit:x,isLoading:f,stop:b,clearChat:j,currentModel:y,modelState:N,providerState:P}=e,[A,S]=(0,w.useState)(!1),[_,z]=(0,w.useState)(""),T=(0,w.useRef)(""),[M,I]=(0,w.useState)(!1),[O,R]=(0,w.useState)(!1),[L,F]=(0,w.useState)(""),D=(0,es.Nr)(L,500),[E,Z]=(0,w.useState)(null),U=(0,w.useRef)(""),V=u(e=>e.setOpen),[q,Y]=(0,w.useState)(!1),{isPopoverOpen:X,setIsPopoverOpen:er}=(0,s.Y)(),eo=(0,el.jE)({extensions:[$.Z,en.Z,Q.Z,et.Z.extend({name:"paragraph",addKeyboardShortcuts(){return{"Shift-Enter":()=>this.editor.commands.first(e=>{let{commands:t}=e;return[()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]})}}}),ea.Z.configure({placeholder:"'/' for slash commands: /Fix, /Explain. @document for file mentions"}),ee.ZP.extend({name:"userCommand"}).configure({HTMLAttributes:{class:"command command-bordered command-with-icon","data-command":"command"},renderText(e){var t;let{options:a,node:n}=e;return"".concat(a.suggestion.char).concat(null!==(t=n.attrs.label)&&void 0!==t?t:n.attrs.id)},renderHTML(e){var t;let{options:a,node:n}=e;return"".concat(null!==(t=n.attrs.label)&&void 0!==t?t:n.attrs.id)},suggestion:{decorationClass:"command",char:"/",pluginKey:eS,items:eu,render:em,startOfLine:!0},deleteTriggerWithBackspace:!0}),ee.ZP.extend({name:"userFile"}).configure({renderText(e){var t;let{options:a,node:n}=e;return"".concat(a.suggestion.char).concat(null!==(t=n.attrs.label)&&void 0!==t?t:n.attrs.id)},renderHTML(e){var t,a;let{options:n,node:l}=e;return["span",{class:"command command-bordered command-with-icon animate-slideIn relative h-auto items-center gap-1 overflow-hidden","data-language":l.attrs.label.split(".")[1]},"".concat(null!==(a=null===(t=l.attrs.label)||void 0===t?void 0:t.replace("/",""))&&void 0!==a?a:l.attrs.id)]},suggestion:{decorationClass:"command",char:"@",pluginKey:e_,items:ev,render:ex,startOfLine:!1}}),ez.extend({addKeyboardShortcuts(){return{Enter:()=>{var e,t;if(0===this.editor.getText().length)return k.A.error("Please write some text or select a command",{duration:5e3}),!0;let a=null===(e=this.editor.state)||void 0===e?void 0:e.userCommand$,n=null==a?void 0:a.active,l=null===(t=this.editor.state)||void 0===t?void 0:t.userFile$,s=null==l?void 0:l.active;if(n||s)return I(!0),!1},"Mod-Enter":()=>{if(f)return b(),!0},"Mod-r":()=>{R(!1),z(""),F(""),this.editor.commands.setContent(""),this.editor.commands.clearContent(!0)},"Mod-n":()=>{j()},"Mod-v":()=>{S(!0),(0,l.M1)().then(e=>{if(navigator.platform.toLowerCase().includes("win"))return;let t=e;"object"==typeof t&&(t=JSON.stringify(t)),this.editor.commands.insertContent(String(t))}).finally(()=>{S(!1)})},"Mod-x":()=>{S(!0);let e=this.editor.state.selection;if(e){let{from:t,to:a}=e,n=this.editor.state.doc.textBetween(t,a);(0,l.zp)(n),this.editor.commands.deleteRange({from:t,to:a})}S(!1)}}}})],content:""},[f,b]),ei=async()=>{await (0,l.$c)().then(async e=>{var t,a;if(console.log("getIdeSelection",e),!(null===(t=e.selectedCode)||void 0===t?void 0:t.ok)){k.A.error("Code Selection not found");return}Y(!0);let n=e.selectedCode;(null==n?void 0:null===(a=n.selectedText)||void 0===a?void 0:a.trim())?(Z(n),U.current=await (0,l.UO)()):(Z(null),U.current="")}),null==eo||eo.commands.focus(),Y(!1)};if((0,w.useEffect)(()=>{let e=async e=>{Z(e.data),U.current=await (0,l.UO)();let{promptType:t}=e.data;if(eo&&(I(!1),"selection"!==t&&"copyFromTerminal"!==t)){var a,n,s;z(t),(null==eo?void 0:null===(s=eo.getJSON().content)||void 0===s?void 0:null===(n=s[0])||void 0===n?void 0:null===(a=n.content)||void 0===a?void 0:a.find(e=>"userCommand"===e.type))&&eo.commands.deleteRange({from:1,to:5});let e='<span data-type="userCommand" class="command command-bordered command-with-icon" data-id="'.concat(t,'" data-label="').concat(t,'" contenteditable="true" />');eo.chain().insertContentAt(1,e).insertContent(" ").focus().run()}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[Z,eo,z,_]),(0,w.useEffect)(()=>{D&&R(!1),0===L.trim().length&&z("")},[D]),(0,w.useEffect)(()=>{null==eo||eo.commands.focus()},[]),!eo)return null;eo.on("update",e=>{let{editor:t}=e;F(t.getText({blockSeparator:"\n\n"})),R(!0)});let ed=async()=>{var e,t,a,n,l;if(f)return;let s=(null==E?void 0:null===(e=E.selectedText)||void 0===e?void 0:e.trim().length)>0,r="```".concat(null!==(l=null==E?void 0:E.language)&&void 0!==l?l:"md","\n").concat(null==E?void 0:null===(a=E.selectedText)||void 0===a?void 0:null===(t=a.replaceAll(/\t/g,""))||void 0===t?void 0:t.trim(),"\n```\n");x({...s?{codeSelection:r}:{},externalInput:(null==E?void 0:null===(n=E.selectedText)||void 0===n?void 0:n.trim().length)>0?"".concat(L,"\n"):null!=L?L:"",chatRequestOptions:{options:{headers:{"Content-Type":"application/json",..._?{promptType:_}:{},...U.current?{fileName:U.current}:{},...T.current?{filePath:T.current}:{}}}}}),z(""),eo.commands.focus()},ec=()=>{var e,t,a,n,l;let s=null===(t=eo.getJSON().content)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.content,r=(null===(a=eo.getJSON().content)||void 0===a?void 0:a.flatMap(e=>{var t;return null==e?void 0:null===(t=e.content)||void 0===t?void 0:t.flatMap(e=>"text"===e.type&&(null==e?void 0:e.text.trim())||null)}).filter(e=>null!=e).join(",").length)||0,o=null==s?void 0:s.map(e=>"userCommand"===e.type?e.attrs.id:null).filter(e=>null!==e),i=null==s?void 0:s.map(e=>"userFile"===e.type?e.attrs.id:null).filter(e=>null!==e);if((null==i?void 0:i[0])?T.current=i[0]:T.current="",(null==o?void 0:o[0])?(z(o[0]),I(!0)):(z(""),I(!1)),M){I(!1);return}let d=(null==o?void 0:null===(n=o[0])||void 0===n?void 0:n.length)>0,c=(null==E?void 0:null===(l=E.selectedText)||void 0===l?void 0:l.trim().length)>0,u=r>0;if(u||!u&&d&&c||T.current){ed();return}if(d&&(!u||!c)){k.A.error("Write some text or select code from your document"),eo.commands.focus();return}!c||u&&d||(k.A.error("Write some text or select a command"),eo.commands.focus())};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-2 text-sm transition-all",children:(0,n.jsxs)("div",{className:"relative grid h-full w-full grid-rows-[auto_1fr_auto] border-t border-content3 bg-content2 text-foreground transition-all",children:[(0,n.jsxs)("div",{className:"relative z-10 flex h-10 w-full items-center gap-2 p-2 text-xs text-default-500 backdrop-blur-sm transition-all",children:[(0,n.jsx)(C.A,{variant:"bordered",className:"command command-bordered command-with-icon animate-slideIn flex h-8 min-h-8 cursor-pointer items-center justify-start gap-1 text-xs text-foreground",isDisabled:X||f,startContent:f?(0,n.jsx)(eb,{size:3,color:"current"}):(null===(t=N[P])||void 0===t?void 0:t.label)?(0,n.jsx)("div",{className:"h-3.5 w-3.5 shrink-0 rounded-full",children:(0,n.jsx)(J.J,{loading:"eager",disableSkeleton:!0,src:N[P]&&(null===(a=N[P])||void 0===a?void 0:a.image)?null===(r=N[P])||void 0===r?void 0:r.image:(0,K.k)(null===(o=N[P])||void 0===o?void 0:o.label),alt:null!==(h=null===(i=N[P])||void 0===i?void 0:i.label)&&void 0!==h?h:"model",className:"h-3.5 w-3.5 shrink-0 rounded-full"})}):(0,n.jsx)(G.Z,{className:"w-4 shrink-0"}),onPress:()=>{er(!0)},children:(0,n.jsx)("div",{className:"relative grid w-full justify-start overflow-hidden text-start",children:(0,n.jsx)("span",{className:"w-full truncate text-xs",children:(null===(d=N[P])||void 0===d?void 0:d.label.length)>0?null===(c=N[P])||void 0===c?void 0:c.label:"Select Your AI"})})}),E?(0,n.jsxs)(C.A,{"data-type":"userFile",className:"command command-bordered command-with-icon animate-slideIn relative h-8 min-h-8 items-center gap-1 overflow-hidden","data-id":eT(null!==(g=null==E?void 0:E.language)&&void 0!==g?g:"md"),"data-language":eT(null!==(v=null==E?void 0:E.language)&&void 0!==v?v:"md"),variant:"bordered",children:[(0,n.jsx)("span",{className:"max-w-24 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-xs text-foreground",children:"".concat(null==E?void 0:E.fileName,".").concat(eT(null==E?void 0:E.language))}),(0,n.jsx)("span",{className:"ml-auto flex items-center gap-1 font-mono text-xs",children:(0,n.jsx)("span",{onClick:()=>{Z(null),U.current=""},children:(0,n.jsx)(H.Z,{className:"h-4 w-4 shrink-0 cursor-pointer"})})})]}):(0,n.jsx)(C.A,{isDisabled:f,variant:"bordered",className:"command command-bordered command-with-icon animate-slideIn flex h-8 min-h-8 cursor-pointer items-center justify-start gap-1 font-mono text-xs text-foreground",onPress:()=>{ei()},startContent:q?(0,n.jsx)(eb,{size:3,color:"current"}):(0,n.jsx)(W.Z,{className:"h-4 w-4 shrink-0"}),children:q?"Getting Code":"Import selection"}),(0,n.jsxs)("div",{className:"ml-auto flex",children:[(0,n.jsx)("div",{className:"flex h-8 min-h-8 w-8 min-w-8 items-center justify-center rounded-lg",children:(0,n.jsx)("span",{className:"col-span-1 flex justify-start gap-2",children:(0,n.jsx)("span",{className:"m-auto text-xs text-default-500",children:L.length>0?O&&A?(0,n.jsx)(eb,{size:4,color:"current"}):"":null})})}),y&&!(null==y?void 0:y.fromMarketplace)&&(0,n.jsx)(C.A,{className:"h-8 min-h-8 w-8 min-w-8 rounded-lg border border-content3 p-0 text-foreground opacity-100",isIconOnly:!0,startContent:(0,n.jsx)(p.Z,{className:"h-4 w-4 shrink-0"}),size:"sm",color:"default",variant:"bordered",isDisabled:f,onPress:()=>{(0,m.q)({eventName:"clickOver",target:"openProviderSettingsTextarea"}),V(!0)}})]})]}),(0,n.jsx)(el.kg,{editor:eo,className:"editor absolute left-0 top-0 h-full w-full overflow-auto transition-all",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||ec()}}),(0,n.jsx)("div",{className:"absolute bottom-0 right-0 flex justify-end gap-2 p-2",children:(0,n.jsx)("div",{className:"col-span-1 ml-auto flex justify-end gap-2",children:f?f&&(0,n.jsx)(C.A,{size:"sm",color:"danger",variant:"flat",className:"w-fit",isDisabled:!f,onPress:async()=>{b(),z("")},startContent:(0,n.jsx)(B.Z,{className:"h-4 w-4 shrink-0"}),children:"Stop [⌘ ↩]"}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eA,{isLoading:f}),(0,n.jsx)(C.A,{size:"sm",onPress:()=>ec(),color:L?"primary":"default",variant:"solid",isDisabled:f||!L,startContent:(0,n.jsx)("span",{children:"↩"}),children:"Send"})]})})})]})})})}var eI=a(42126);let eO=async e=>{let{provider:t,port:a}=e;try{let e=await eI.Z.get("http://localhost:54112/".concat(a,"/api/").concat(t));return e.data?{...e.data}:{agents:[],marketplace:[]}}catch(e){return console.error("error fetching agents",e),{agents:[],marketplace:[]}}};function eR(){let e=(0,s.Y)(e=>e.selectedProvider),t=(0,r.usePathname)().split("/")[1],{data:a,mutate:n,isLoading:l,isValidating:i}=(0,o.ZP)("/api/agents/",()=>eO({provider:e,port:t}),{shouldRetryOnError:!0,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:0});return{agents:a,isLoading:l||i,mutate:n}}var eL=a(34356),eF=a(50348);let eD=eF.fC,eE=eF.xz;eF.ee;let eZ=w.forwardRef((e,t)=>{let{className:a,align:l="center",sideOffset:s=4,...r}=e;return(0,n.jsx)(eF.h_,{children:(0,n.jsx)(eF.VY,{ref:t,align:l,sideOffset:s,className:(0,K.cn)("PopoverContent bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-none",a),...r})})});eZ.displayName=eF.VY.displayName;var eU=a(95634),eV=a(80842),eq=a(84380),eY=a(68906),eK=a(8514),eG=a(85130),eH=a(1435),eW=a(35063),eB=a(85490),eJ=a(8127),eX=a(15619),e$=a(24661);function eQ(e){var t,a,r,o,i,d,c,h,g,v,x,b,j,y,N,P,A,S,M,O,R,L,F,D,E,Z,U,V,q,Y;let{isLoading:G,clearChat:H,selectedModel:W,messages:B}=e,{currentProviderModel:X,setCurrentProviderModel:$}=(0,s.o)(),{providers:Q,mutate:ee}=(0,eL.k)(),et=(0,T.U)(e=>e.setOpen),{selectedProvider:ea,setSelectedProvider:en,isPopoverOpen:el,setIsPopoverOpen:es,isProviderSelectOpen:er,setIsProviderSelectOpen:ei}=(0,s.Y)(),{agents:ed,mutate:ec,isLoading:eu}=eR(),{isConnected:em}=(0,z.T)(),[ep,eh]=(0,w.useState)(!1),[eg,ev]=(0,w.useState)(0),[ex,ef]=(0,w.useState)(""),ej=null===(t=Q.find(e=>e.link===ea))||void 0===t?void 0:t.models.map(e=>({label:e,value:e})),ew=(null===(r=Q.find(e=>e.link===ea))||void 0===r?void 0:null===(a=r.installedModels)||void 0===a?void 0:a.map(e=>({label:e,value:e})))||[],ey=(null==ej?void 0:ej.filter(e=>!ew.find(t=>t.value===e.value)))||[],eC=-1!==ew.findIndex(e=>{var t;return e.value===(null===(t=X[ea])||void 0===t?void 0:t.id)}),eP=(null==ed?void 0:ed.agents)?null===(o=ed.agents)||void 0===o?void 0:o.map(e=>({label:e.name,value:e.id,image:e.image,description:e.description,welcome:e.welcome})):[],eA=(null==ed?void 0:ed.marketplace)?null==ed?void 0:ed.marketplace.map(e=>({label:e.name,value:e.id,image:e.image,description:e.description,welcome:e.welcome})):[],eS=null===(i=Q.find(e=>e.link===ea))||void 0===i?void 0:i.editable,e_=async e=>{var t,a,n,l,s,r,o,i,d,c;let{model:u,newProvider:m}=e,p=[...(null==ew?void 0:ew.length)?ew:[],...(null==ej?void 0:ej.length)?ej:[],...eP,...eA].find(e=>e.label===u),h=null!==(l=null!==(n=null==p?void 0:p.value)&&void 0!==n?n:u)&&void 0!==l?l:null===(t=X[m])||void 0===t?void 0:t.id,g=null!==(r=null!==(s=null==p?void 0:p.label)&&void 0!==s?s:u)&&void 0!==r?r:null===(a=X[m])||void 0===a?void 0:a.label;if(!h||""===h&&eS){let e=null===(i=Q.find(e=>e.link===m))||void 0===i?void 0:null===(o=i.installedModels)||void 0===o?void 0:o[0];g=h=null!==(c=null!=e?e:null===(d=Q.find(e=>e.link===m))||void 0===d?void 0:d.models[0])&&void 0!==c?c:""}let v=!!eA.find(e=>e.label===u);(h||""===h)&&$(null!=m?m:ea,{label:g,id:h,fromMarketplace:v,image:null==p?void 0:p.image,description:null==p?void 0:p.description,welcome:null==p?void 0:p.welcome})},ez=async e=>{var t;if(!await (0,l._f)()){k.A.error("Ollama is not running,",{duration:3e3,action:(0,n.jsx)(C.A,{color:"default",variant:"light",size:"sm",className:"h-auto p-1 underline",onPress:()=>{(0,l.Yo)("https://docs.codegpt.co/docs/tutorial-ai-providers/ollama")},children:"Learn More"})});return}eh(!0),ef(e);let a=null===(t=(await fetch("http://localhost:11434/api/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})})).body)||void 0===t?void 0:t.getReader();if(!a)throw Error("No reader available");let s=new TextDecoder;(async()=>{for(k.A.success("Downloading model",{duration:3e3});;){let{done:e,value:t}=await a.read();if(e)break;let n=s.decode(t);try{let e=JSON.parse(n);(null==e?void 0:e.status)==="success"&&(k.A.success("Model installed successfully",{duration:3e3}),ee(),eh(!1),ev(0),ef(""));let{completed:t,total:a}=e;if(t&&a){let e=Math.floor(parseInt(t)/parseInt(a)*100);e!==eg&&ev(e)}}catch(e){}}})()},eT=e=>{let t=e.currentTarget.value;("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,l.M1)().then(a=>{let{selectionStart:n,selectionEnd:l}=e.target,s=t.substring(0,null!=n?n:t.length)+a+t.substring(null!=l?l:t.length);$(ea,{label:s,id:s,fromMarketplace:!!eA.find(e=>e.label===a.trim()),image:"",description:"",welcome:""})}))},eM=u(e=>e.setOpen),eI="codegptplusbeta"===ea,eO=e=>{var t,a,l,s,r,o;let{agent:i,comment:d}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(J.J,{src:null!==(t=i.image)&&void 0!==t?t:(0,K.k)(i.label),alt:null!==(l=null!==(a=i.label)&&void 0!==a?a:i.name)&&void 0!==l?l:"agent",loading:"eager",disableSkeleton:!0,classNames:{img:"h-6 w-6 rounded-full border border-content3 shrink-0 opacity-100 block"},className:"h-[20px] w-[20px] rounded-full"}),(0,n.jsxs)("p",{className:"relative grid max-w-80 overflow-hidden",children:[(0,n.jsx)("span",{className:"text-ellipsis",children:null!==(s=i.label)&&void 0!==s?s:i.name}),(0,n.jsx)("span",{className:"text-xs text-default-500",children:null!==(r=null!=d?d:i.model)&&void 0!==r?r:i.welcome})]})]},null!==(o=i.value)&&void 0!==o?o:i.id)},eF=(0,eo.X)(e=>e.groups),eQ=eF.flatMap(e=>e.agents),e0=null!==(U=null===(d=eF.find(e=>"llm"===e.id))||void 0===d?void 0:d.agents)&&void 0!==U?U:[],e1=eF.map(e=>e.agents).flat().filter(e=>!e0.find(t=>t.id===e.id));return(0,n.jsx)("div",{"attr-role":"chat-header",className:"grid h-14 w-screen grid-flow-col items-center justify-between p-2",children:(0,n.jsxs)("div",{className:"col-span-2 flex w-full items-center gap-2",children:[0!==B||(null==W?void 0:W.length)!==0?(0,n.jsx)(C.A,{isIconOnly:!0,startContent:(0,n.jsx)(eV.Z,{className:"w-5"}),variant:"bordered",className:"border",isDisabled:G,onClick:()=>{en("codegptplusbeta"),(0,ek.$)(),$("codegptplusbeta",{label:"",id:"",fromMarketplace:!1,image:"",description:"",welcome:""}),H()}}):null,(0,n.jsxs)(eD,{onOpenChange:es,open:el,children:[(0,n.jsx)(eE,{asChild:!0,children:(0,n.jsx)(C.A,{className:"w-52 content-start items-center justify-start truncate border",variant:"bordered",isDisabled:G,startContent:(null===(c=X[ea])||void 0===c?void 0:c.label)?(0,n.jsx)("div",{className:"h-6 w-6 shrink-0 rounded-full",children:(0,n.jsx)(J.J,{loading:"eager",disableSkeleton:!0,src:X[ea]&&(null===(h=X[ea])||void 0===h?void 0:h.image)?null===(g=X[ea])||void 0===g?void 0:g.image:(0,K.k)(null===(v=X[ea])||void 0===v?void 0:v.label),alt:null!==(V=null===(x=X[ea])||void 0===x?void 0:x.label)&&void 0!==V?V:"model",classNames:{wrapper:"h-6 w-6 shrink-0 rounded-full border border-content3 bg-content3",img:"h-6 w-6 shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block"},className:"h-6 w-6 shrink-0 rounded-full"})}):(0,n.jsx)(eq.Z,{className:"h-5 w-5 shrink-0"}),endContent:(0,n.jsx)(eY.Z,{className:"ml-auto w-4 shrink-0 transition-all ".concat(el?"-rotate-180":"")}),children:(0,n.jsx)("div",{className:"relative grid w-full justify-start overflow-hidden text-start",children:(0,n.jsx)("span",{className:"w-full truncate text-sm capitalize",children:(null===(b=X[ea])||void 0===b?void 0:b.label.length)>0?null===(j=X[ea])||void 0===j?void 0:j.label:"Select Your AI"})})})}),(0,n.jsxs)(eZ,{align:"start",sideOffset:8,autoFocus:!1,className:"grid w-96 grid-cols-1 gap-4 rounded-xl border-0 bg-content2 px-4 py-6 text-sm shadow-lg backdrop-blur-sm",children:[(0,n.jsxs)(eW.g,{variant:"bordered",label:(0,n.jsx)("span",{className:"text-xs uppercase tracking-wide text-default-500",children:"Provider"}),placeholder:"Provider",selectedKeys:[null===(y=Q.find(e=>e.link===ea))||void 0===y?void 0:y.name],fullWidth:!0,isOpen:er,onChange:e=>{var t,a,n;let s=e.target.value;if(!s)return;let r=Q.find(e=>e.name===s),o=null!==(t=null==r?void 0:r.link)&&void 0!==t?t:"";e_({newProvider:o}),en(o),(0,l.rF)("CodeGPT.apiKey",null!==(n=null!==(a=null==r?void 0:r.id)&&void 0!==a?a:null==r?void 0:r.name)&&void 0!==n?n:""),(null==r?void 0:r.agents)&&setTimeout(()=>{ec()},1e3)},onOpenChange:e=>ei(e),items:Q,classNames:{label:"bottom-[37%]",trigger:["border-content3","focus:border-default-500","focus-within:border-default-500","dark:focus:border-default-500","dark:focus-within:border-default-500","border-1 shadow-none","data-[open=true]:border-default-500"],popoverContent:"h-52 bg-content3"},renderValue:e=>e.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(_.T,{provider:ea,className:"rounded-full",width:20,height:20}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.textValue})})]},ea)),children:[(0,n.jsx)(eB.y,{title:"CodeGPT",children:Q.filter(e=>e.link.startsWith("codegptplus")).map(e=>(0,n.jsx)(eJ.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(_.T,{provider:e.name,className:"rounded-full",width:20,height:20}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))}),(0,n.jsx)(eB.y,{title:"Local Providers",children:Q.filter(e=>"ollama"===e.link||"lmstudio"===e.link).map(e=>(0,n.jsx)(eJ.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(_.T,{provider:e.name,className:"rounded-full",width:20,height:20}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))}),(0,n.jsx)(eB.y,{title:"Third Party",children:Q.filter(e=>!e.link.includes("ollama")&&!e.link.includes("lmstudio")&&!e.link.startsWith("codegptplus")).map(e=>(0,n.jsx)(eJ.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(_.T,{provider:e.name,className:"rounded-full",width:20,height:20}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))})]}),(0,n.jsxs)(eX.d,{variant:"bordered",fullWidth:!0,allowsCustomValue:"codegptplusbeta"!==ea,label:(0,n.jsx)("span",{className:"text-xs uppercase tracking-wide text-default-500",children:"Model"}),onInputChange:e=>{let t=eQ.find(t=>t.name===e.toString());if(t){$("codegptplusbeta",{id:t.id,label:t.name,fromMarketplace:!0,image:t.image,description:null==t?void 0:t.description,welcome:null==t?void 0:t.welcome}),en("codegptplusbeta"),(0,ek.$)(),(0,m.q)({eventName:"clickOver",target:t.name+"WorkspaceButtonSelector"});return}e_({model:e.toString()})},onOpenChange:async()=>{ee(),await ec(),"ollama"===ea&&(console.log("ollama"),await (0,l._f)())},onClose:()=>{es(!1)},onKeyDown:e=>eT(e),placeholder:"Search your model",disabledKeys:["loader","disabled"],defaultSelectedKey:null===(N=X[ea])||void 0===N?void 0:N.label,defaultInputValue:null===(P=X[ea])||void 0===P?void 0:P.label,inputValue:null===(A=X[ea])||void 0===A?void 0:A.label,startContent:(null===(S=X[ea])||void 0===S?void 0:S.label)?(0,n.jsx)("div",{className:"h-6 w-6 shrink-0 rounded-full",children:(null===(O=X[ea])||void 0===O?void 0:null===(M=O.image)||void 0===M?void 0:M.length)!==0?(0,n.jsx)(J.J,{loading:"eager",disableSkeleton:!0,src:X[ea]&&(null===(R=X[ea])||void 0===R?void 0:R.image)?null===(L=X[ea])||void 0===L?void 0:L.image:(0,K.k)(null===(F=X[ea])||void 0===F?void 0:F.label),alt:null!==(q=null===(D=X[ea])||void 0===D?void 0:D.label)&&void 0!==q?q:"model",className:"h-6 w-6 shrink-0 rounded-full",classNames:{wrapper:"h-6 w-6 shrink-0 rounded-full border border-content3 bg-content3",img:"h-6 w-6 shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block"}}):(0,n.jsx)(_.T,{provider:ea,className:"h-6 w-6 shrink-0 rounded-full"})}):(0,n.jsx)("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-content3",children:(0,n.jsx)(eq.Z,{className:"h-4 w-4 shrink-0"})}),inputProps:{classNames:{base:"overflow-hidden relative",input:"mb-[2px] truncate",label:"bottom-[37%]",inputWrapper:["border-content3","focus:border-default-500","focus-within:border-default-500","dark:focus:border-default-500","dark:focus-within:border-default-500","border-1 shadow-none","data-[open=true]:border-default-500"]}},popoverProps:{classNames:{content:"bg-content3"}},scrollShadowProps:{offset:8},shouldCloseOnBlur:!0,allowsEmptyCollection:!1,children:[(null==ew?void 0:ew.length)&&(0,n.jsx)(eB.y,{title:"Installed Models | (".concat(null==ew?void 0:ew.length,")"),children:null==ew?void 0:ew.map(e=>(0,n.jsx)(eJ.R,{value:e.value,textValue:e.label,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(eO,{agent:e})},e.value))}),!eI&&(0,n.jsx)(eB.y,{title:(null==ej?void 0:ej.length)?"ollama"===ea?"Available for install":"Models":"",showDivider:!0,children:null!==(Y=null==ey?void 0:ey.map(e=>(0,n.jsx)(eJ.R,{value:e.value,textValue:e.label,selectedIcon:!1,endContent:!1,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(eO,{agent:e})},e.value)))&&void 0!==Y?Y:[]}),eP.length&&(0,n.jsx)(eB.y,{title:"My Agents",showDivider:!0,children:null==eP?void 0:eP.map(e=>(0,n.jsx)(eJ.R,{value:e.value,textValue:e.label,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(eO,{agent:e})},e.value))}),eA.length&&(0,n.jsx)(eB.y,{title:"My Favorites from marketplace",showDivider:!0,children:null==eA?void 0:eA.map(e=>(0,n.jsx)(eJ.R,{value:e.value,textValue:e.label,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(eO,{agent:e})},e.value))}),eu&&0===eP.length&&0===eA.length&&(0,n.jsx)(eB.y,{title:"My Agents",showDivider:!0,children:(0,n.jsx)(eJ.R,{children:(0,n.jsx)(C.A,{isLoading:!0,fullWidth:!0,variant:"bordered",className:"border",children:"Loading Agents"})},"loader")}),"codegptplusbeta"===ea&&(null==e1?void 0:e1.length)!==0&&(0,n.jsx)(eB.y,{title:"Marketplace LLMs",showDivider:!0,children:e0.map(e=>(0,n.jsx)(eJ.R,{value:e.name,textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(eO,{agent:e})},"marketplace-".concat(e.name)))}),"codegptplusbeta"===ea&&(null==e1?void 0:e1.length)!==0&&(0,n.jsx)(eB.y,{title:"Marketplace Agents",children:e1.map(e=>(0,n.jsx)(eJ.R,{value:e.name,textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(eO,{agent:e})},"marketplace-".concat(e.name)))})]}),"ollama"===ea&&(0,n.jsxs)("div",{className:"flex gap-2",children:[!eC&&!ep&&(null===(E=X[ea])||void 0===E?void 0:E.id)&&(0,n.jsx)("div",{children:(0,n.jsx)(C.A,{color:"primary",size:"sm",className:"border border-primary/20",onPress:()=>{var e,t;ez(null===(e=X[ea])||void 0===e?void 0:e.label),(0,m.q)({eventName:"clickOver",target:"downloadOllamaModel",model:null===(t=X[ea])||void 0===t?void 0:t.label})},startContent:(0,n.jsx)(eK.Z,{className:"h-5 w-5"}),children:"Download Model"},"downloadModel")}),ep&&100!==eg?(0,n.jsxs)("div",{className:"flex w-full items-start gap-2 px-1",children:[(0,n.jsx)(eb,{size:3,className:"mt-1"}),(0,n.jsx)(e$.W,{label:"Downloading ".concat(ex),"aria-label":"Downloading...",size:"sm",autoFocus:!0,value:eg,color:"primary",showValueLabel:!0,className:"my-auto w-full"})]}):eg>99.9?(0,n.jsxs)("div",{className:"my-auto grid gap-2 px-1",children:[(0,n.jsxs)("span",{className:"flex gap-2 text-xs uppercase text-default-500",children:[(0,n.jsx)(eG.Z,{className:"h-4 w-4"})," Model downloaded successfully."]}),(0,n.jsxs)("span",{className:"flex gap-3 text-xs uppercase",children:[(0,n.jsx)(eb,{size:3}),"Installing ",ex,". Please wait..."]})]}):null]}),"ollama"!==ea&&"lmstudio"!==ea&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.j,{}),(0,n.jsxs)("div",{className:"grid justify-between gap-4 px-1 pb-4",children:[(0,n.jsx)("div",{className:"flex items-center gap-1 text-default-500",children:em?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eH.Z,{className:"w-4 shrink-0 text-success"}),(0,n.jsx)("p",{className:"text-xs uppercase",children:"Connected"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(I.Z,{className:"w-4 shrink-0"}),(0,n.jsx)("p",{className:"text-xs uppercase",children:"Set Connection"})]})}),(0,n.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,n.jsx)("p",{className:"pr-4",children:(0,n.jsxs)("span",{className:"hyphens-none",children:["Set your"," ",(0,n.jsx)("span",{className:"capitalize",children:ea.includes("codegpt")?"CodeGPT account":"".concat(ea," API key")})," ","to enable the model selection"]})}),(0,n.jsx)(C.A,{size:"md",variant:em?"bordered":"solid",color:em?"default":"primary",className:"shrink-0",onPress:()=>{et(!0)},children:em?"Disconnect":"Connect"},"setConnection")]})]})]})]})]}),!(null===(Z=X[ea])||void 0===Z?void 0:Z.fromMarketplace)&&(0,n.jsx)(eN.e,{content:"Chat Settings",placement:"bottom",children:(0,n.jsx)(C.A,{isDisabled:G,startContent:(0,n.jsx)(p.Z,{className:"h-5 w-5"}),onPress:()=>{(0,m.q)({eventName:"clickOver",target:"openProviderSettings"}),eM(!0)},isIconOnly:!0,variant:"bordered",className:"border"},"settings")}),(0,n.jsx)("div",{className:"ml-auto flex items-center justify-end gap-2",children:!G&&B>0&&(0,n.jsx)(C.A,{onPress:()=>H(),className:"text-default-500",variant:"light",isDisabled:G,startContent:(0,n.jsx)(eU.Lm,{className:"h-5 w-5 shrink-0 text-default-500"}),children:"New Chat"})})]})})}let e0=e=>(0,n.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...e,children:(0,n.jsx)("polyline",{points:"20 6 9 17 4 12"})});var e1=a(17019),e4=a(27701),e2=a(59092);function e5(){var e,t,a;let[s,r]=(0,w.useState)(""),[o,i]=(0,w.useState)(!1),[d,c]=(0,w.useState)(0),[u,m]=(0,w.useState)(""),{providers:p,mutate:h}=(0,eL.k)(),{configuration:j,mutate:y}=(0,e1.E)(),{isOpen:N,setOpen:P}=(0,e4.w)(),[A,S]=(0,w.useState)(null!==(e=null==j?void 0:j.maxTokens)&&void 0!==e?e:128),z=-1!==p.findIndex(e=>{var t;return e.link===(null==j?void 0:j.provider.toLowerCase())&&(null===(t=e.installedModels)||void 0===t?void 0:t.includes(null==j?void 0:j.model))}),T=p.filter(e=>{var t;return null==e?void 0:null===(t=e.autocompleteModels)||void 0===t?void 0:t.length}).flatMap(e=>{var t;return null==e?void 0:null===(t=e.autocompleteModels)||void 0===t?void 0:t.map(t=>({provider:e.name,model:t,link:e.link}))}),M=async(e,t)=>{r(t),"Model"===t&&await (0,l.wb)(e.currentKey),"Enabled"===t&&await (0,l.mt)(e),"MaxTokens"===t&&await (0,l.Fc)(e),"Delay"===t&&await (0,l.$v)(e),y().then(()=>r(""))},I=async e=>{var t;if(!await (0,l._f)()){k.A.error("Ollama is not running,",{duration:3e3,action:(0,n.jsx)(C.A,{color:"default",variant:"light",size:"sm",className:"h-auto p-1 underline",onPress:()=>{(0,l.Yo)("https://docs.codegpt.co/docs/tutorial-ai-providers/ollama")},children:"Learn More"})});return}i(!0),m(e);let a=k.A.loading((0,n.jsxs)("div",{className:"flex items-center gap-2 text-sm text-foreground",children:[(0,n.jsxs)("span",{children:["Downloading ",e," model"]}),(0,n.jsx)("button",{onClick:()=>k.A.dismiss(a),children:"x"})]})),s=null===(t=(await fetch("http://localhost:11434/api/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})})).body)||void 0===t?void 0:t.getReader();if(!s)throw Error("No reader available");let r=new TextDecoder;(async()=>{for(;;){let{done:e,value:t}=await s.read();if(e)break;let n=r.decode(t);try{n.includes('{"status":"success"}')&&(k.A.success("Model downloaded successfully"),100!==d&&c(100),h(),k.A.dismiss(a),setTimeout(()=>{i(!1),c(0),m("")},5e3));let{completed:e,total:t}=JSON.parse(n);if(e&&t){let a=Math.floor(parseInt(e)/parseInt(t)*100);a!==d&&c(a)}}catch(e){}}})()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(g.R,{isOpen:N,placement:"top",size:"lg",scrollBehavior:"inside",classNames:{body:"pt-8 px-8 pb-10",closeButton:"h-10 w-10 p-0 flex items-center justify-center rounded-full absolute top-3 right-6 bg-content2 dark:bg-content2"},onOpenChange:()=>{P(!1)},children:(0,n.jsx)(v.A,{children:(0,n.jsxs)(x.I,{className:"grid gap-6",children:[(0,n.jsxs)("section",{className:"grid gap-2 border-0 font-normal",children:[(0,n.jsxs)("div",{className:"flex select-none items-center gap-2",children:[(0,n.jsx)(D.Z,{className:"h-6 w-6 shrink-0 text-default-500"}),(0,n.jsx)("p",{children:"AI code auto-completion"})]}),(0,n.jsx)("p",{className:"text-sm text-default-500",children:"Predict and offer code suggestions as you program in the editor"})]}),(0,n.jsx)(f.j,{}),(0,n.jsxs)("section",{className:"grid gap-2",children:[(0,n.jsx)("p",{className:"text-sm",children:"AI Model"}),(0,n.jsx)(eW.g,{placeholder:"Completion Model",selectedKeys:["".concat(null==j?void 0:j.provider," - ").concat(null==j?void 0:j.model)],className:"w-full",fullWidth:!0,classNames:{label:"text-sm relative bottom-0 -translate-y-2"},isLoading:"Model"===s,onSelectionChange:e=>M(e,"Model"),renderValue:()=>{var e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(_.T,{provider:null!==(e=null==j?void 0:j.provider)&&void 0!==e?e:"codegpt",className:"border-0",width:24,height:24}),(0,n.jsxs)("p",{className:"grid",children:[(0,n.jsx)("span",{className:"text-sm",children:null==j?void 0:j.model}),(0,n.jsx)("span",{className:"text-xs text-default-500",children:null==j?void 0:j.provider})]})]},null==j?void 0:j.provider)},children:T.map(e=>(0,n.jsx)(eJ.R,{value:"".concat(e.provider," - ").concat(e.model),textValue:e.model,startContent:(0,n.jsx)(_.T,{provider:e.link,width:24,height:24}),children:(0,n.jsxs)("p",{className:"grid",children:[(0,n.jsx)("span",{className:"text-sm",children:null==e?void 0:e.model}),(0,n.jsx)("span",{className:"text-xs text-default-500",children:null==e?void 0:e.provider})]})},"".concat(e.provider," - ").concat(e.model)))}),(null==j?void 0:j.provider)==="Ollama"&&!z&&!o&&(0,n.jsx)(C.A,{color:"default",variant:"bordered",size:"md",className:"border- border bg-content4 shadow-md",onPress:()=>{console.log("download model"),(null==j?void 0:j.model)&&I(null==j?void 0:j.model)},children:"Download Model"},"downloadModel"),o&&(0,n.jsx)(e$.W,{label:"Downloading ".concat(u," model"),"aria-label":"Downloading...",size:"sm",autoFocus:!0,value:d,color:"primary",showValueLabel:!0,className:"my-auto max-w-md"}),(null==j?void 0:j.provider)!=="Ollama"&&(0,n.jsx)("div",{className:"mt-2 flex items-center justify-between gap-8 rounded-xl border border-content3 p-3",children:(0,n.jsxs)("p",{className:"text-xs text-default-500",children:["The model to use for code auto-completion. Remember connect your"," ",(0,n.jsx)("u",{children:null==j?void 0:j.provider})," service."]})})]}),(0,n.jsx)(f.j,{}),(0,n.jsx)("section",{className:"grid",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("p",{className:"grid text-sm",children:[(0,n.jsx)("span",{children:"Status"}),(0,n.jsx)("span",{className:"text-xs text-default-500",children:(null==j?void 0:j.isEnabled)?"Enabled":"Disabled"})]}),"Enabled"===s?(0,n.jsx)(C.A,{size:"sm",variant:"bordered",isLoading:"Enabled"===s,endContent:(0,n.jsx)("span",{children:"Loading"})}):(0,n.jsx)(e2.i,{isDisabled:"Enabled"===s,color:"primary",onValueChange:()=>M(!(null==j?void 0:j.isEnabled),"Enabled"),isSelected:null==j?void 0:j.isEnabled,startContent:(0,n.jsx)(e0,{className:"h-3 shrink-0"})})]})}),(0,n.jsx)(f.j,{}),(0,n.jsxs)("section",{className:"grid gap-2",children:[(0,n.jsx)(b.L,{isDisabled:"MaxTokens"===s,color:"primary",maxValue:1024,minValue:16,step:8,defaultValue:null!==(t=null==j?void 0:j.maxTokens)&&void 0!==t?t:128,getValue:e=>"".concat(e," Tokens  (~").concat(A/4*3," words)"),onChangeEnd:e=>{M(Number(e),"MaxTokens")},onChange:e=>S(Number(e)),label:"Max Tokens","aria-label":"Max Tokens",className:"max-w-md"}),(0,n.jsxs)("p",{className:"text-xs text-default-500",children:["The maximum number of tokens the autocomplete will generate, for example,"," ",A," tokens, is equivalent to approximately ",A/4*3," words."]})]}),(0,n.jsx)(f.j,{}),(0,n.jsxs)("section",{className:"grid gap-2",children:[(0,n.jsx)(b.L,{isDisabled:"Delay"===s,color:"primary",maxValue:1e4,minValue:100,step:100,getValue:e=>"".concat(Number(e)/1e3," Seconds"),defaultValue:null!==(a=null==j?void 0:j.delay)&&void 0!==a?a:1e3,onChangeEnd:e=>M(Number(e),"Delay"),label:"Suggestion Delay","aria-label":"Suggestion Delay",className:"max-w-md",name:"delay",id:"delay"}),(0,n.jsx)("p",{className:"text-xs text-default-500",children:"How long should we wait before giving you auto completion suggestions"})]})]})})})})}var e3=a(41042),e6=a(41505);let e8=e=>{let{className:t,...a}=e;return(0,n.jsx)(e6.eh,{className:(0,K.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a})},e9=e6.s_,e7=e=>{let{withHandle:t,className:a,...l}=e;return(0,n.jsx)(e6.OT,{className:(0,K.cn)("focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0",a),...l,children:t&&(0,n.jsx)("div",{className:"z-20 flex h-4 w-8 items-center justify-center rounded-lg border border-content4 bg-content2/50 backdrop-blur-sm",children:(0,n.jsx)(eU.Vn,{className:"h-4 w-4"})})})};var te=a(68292),tt=a(43314),ta=a(53194),tn=a(99837),tl=a(12428),ts=a(84766);function tr(e){var t;let{id:a,name:l,description:r,image:o,welcome:i,fromMarketplace:d}=e,{isConnected:c}=(0,z.T)(),u=(0,T.U)(e=>e.setOpen),m=(0,s.Y)(e=>e.selectedProvider),{agents:p}=(0,eo.X)(e=>e),[h,g]=(0,w.useState)(null);return(0,w.useEffect)(()=>{if(d&&p.length>0){let e=p.find(e=>e.id===a);e?g(e):g(null)}},[p,a]),(0,n.jsxs)("div",{className:"relative pt-16 mx-auto grid w-full max-w-md select-none content-center items-center justify-center gap-4 text-center",children:[(0,n.jsxs)("div",{className:"agent-avatar relative mx-auto h-16 w-16 select-none rounded-full",children:[o?(0,n.jsx)(J.J,{src:o,alt:"agent",loading:"eager",disableSkeleton:!0,radius:"full",classNames:{wrapper:"agent-avatar shrink-0 rounded-full bg-content3",img:"agent-avatar shrink-0 rounded-full bg-content3 opacity-100 block"}}):(0,n.jsx)(_.T,{provider:m,className:"mx-auto h-16 w-16 select-none rounded-full"}),!m.includes("anthropic")&&!m.includes("openai")&&!m.includes("mistral")&&!m.includes("cohere")&&(0,n.jsx)("div",{className:"absolute -bottom-1 -right-1 z-10 grid size-8 items-center justify-center rounded-full",children:(0,n.jsx)(_.T,{provider:m,className:"mx-auto aspect-square select-none rounded-full border-2 border-white shadow-sm dark:border-content1"})})]}),(0,n.jsxs)("div",{className:"grid select-none items-center justify-center gap-2",children:[(0,n.jsx)("p",{className:"animate-slideIn relative w-full overflow-hidden truncate text-xl capitalize opacity-0",children:l}),(0,n.jsx)("p",{className:"animate-slideIn delay-2 relative w-full hyphens-none text-center text-lg text-default-500 opacity-0",children:i||r||"Your new AI Code Assistant"}),h?(null==h?void 0:h.tools)&&(null==h?void 0:null===(t=h.tools)||void 0===t?void 0:t.length)>0&&(0,n.jsx)("p",{className:"animate-slideIn delay-3 relative mt-2 flex w-full justify-center text-center text-lg text-default-500 opacity-0",children:(0,n.jsxs)("span",{className:"flex items-center gap-1 rounded-lg border border-content3 px-1.5 py-0.5 text-default-500",children:[(null==h?void 0:h.tools.includes("code-interpreter"))?(0,n.jsx)(tl.Z,{className:"h-4 w-4 shrink-0"}):(0,n.jsx)(ts.Z,{className:"h-4 w-4 shrink-0"}),(0,n.jsx)("span",{className:"text-sm capitalize",children:(null==h?void 0:h.tools)&&(null==h?void 0:h.tools.join(", ").replaceAll("-"," "))})]})}):""]}),!m.includes("codegpt")&&!m.includes("ollama")&&(c?(0,n.jsx)(eC.z,{size:"sm",variant:"dot",color:"success",className:"mx-auto border",children:"Connected"}):(0,n.jsx)(C.A,{size:"sm",className:"animate-slideIn delay-3 mx-auto w-fit border opacity-0",variant:"bordered",onPress:()=>u(!0),children:"Set Connection"}))]},a)}function to(){let{currentProviderModel:e}=(0,s.o)(),t=e[(0,s.Y)(e=>e.selectedProvider)];if(null==t?void 0:t.id){var a;return(0,n.jsx)(tr,{id:t.id,name:t.label,image:null!==(a=t.image)&&void 0!==a?a:(0,K.k)(t.label),description:t.description,welcome:t.welcome,fromMarketplace:t.fromMarketplace})}}var ti=a(45580),td=a(39069),tc=a(34191),tu=a(58530),tm=a(2023);function tp(e){let{port:t}=e,{groups:a,agents:r}=(0,eo.X)(e=>e),{languages:o}=(0,tu.F)(e=>e),{setCurrentProviderModel:i}=(0,s.o)(),d=(0,s.Y)(e=>e.setSelectedProvider),{agents:c,isLoading:u}=eR(),[p,h]=(0,w.useState)([]),[g,v]=(0,ta._)("tabSelected","llm");(0,w.useEffect)(()=>{var e;if(!u&&(null==c?void 0:null===(e=c.marketplace)||void 0===e?void 0:e.length)>0){let e=[{id:"favorites",name:"Favorites",agents:null==c?void 0:c.marketplace}];(null==p?void 0:p.find(e=>"favorites"===e.id))?h([...p.filter(e=>"favorites"!==e.id),...e]):h([...p,...e])}},[c,u]),(0,w.useEffect)(()=>{h(a)},[a]),(0,w.useEffect)(()=>{if(0!==o.length){let e=[{id:"related",name:"Related Agents",agents:r.filter(e=>o.map(e=>e).some(t=>{var a;return null==e?void 0:null===(a=e.tags)||void 0===a?void 0:a.includes(t)})).sort((e,t)=>e.name.localeCompare(t.name))}];e.length>0&&h([...e,...a])}},[o]);let x=e=>{var t,a;let{agent:l,index:s}=e;return(0,n.jsxs)("div",{className:"relative flex h-14 w-full shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-xl bg-content2 px-3 transition-all ".concat(s),onClick:()=>{i("codegptplusbeta",{id:l.id,label:l.name,fromMarketplace:!0,image:l.image,description:"",welcome:null==l?void 0:l.welcome}),d("codegptplusbeta"),(0,ek.$)(),(0,m.q)({eventName:"clickOver",target:l.name+"WorkspaceButtonHome"})},children:[(0,n.jsx)(J.J,{disableSkeleton:!0,src:l.image,alt:l.name,loading:"eager",classNames:{wrapper:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"}}),(0,n.jsxs)("p",{className:"relative grid w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:[l.name,l&&(null==l?void 0:l.tools)&&(null==l?void 0:null===(t=l.tools)||void 0===t?void 0:t.length)>0&&(0,n.jsx)("span",{className:"text-xs capitalize text-default-500",children:null==l?void 0:null===(a=l.tools)||void 0===a?void 0:a.join(", ").replaceAll("-"," ")})]})]})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("section",{className:"grid w-full gap-2",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between px-2",children:[(0,n.jsx)("h3",{className:"text-xs uppercase tracking-wider text-default-500",children:"AI Teams"}),(0,n.jsx)("div",{"attr-role":"tabs-buttons-wrapper",className:"flex items-center",children:(0,n.jsx)("div",{"attr-role":"tabs-button-group",className:"flex items-center gap-2 text-xs",children:(0,n.jsx)(ti.g,{variant:"light",size:"sm",className:"border-transparent data-[hover=true]:bg-transparent",children:p&&(null==p?void 0:p.length)>0?null==p?void 0:p.map(e=>(0,n.jsx)(C.A,{onPress:()=>{v(e.id),(0,m.q)({eventName:"clickOver",target:e.id+"WorkspaceButtonSelectedTab"})},startContent:"related"===e.id?(0,n.jsx)(D.Z,{className:"h-3 w-3 shrink-0"}):null,className:"h-6 bg-transparent capitalize data-[hover=true]:bg-transparent data-[hover=true]:text-foreground ".concat(g===e.id?"underline":"text-default-500"),children:e.name},e.id)):(0,n.jsx)(ti.g,{variant:"light",size:"sm",className:"border-transparent data-[hover=true]:bg-transparent",children:Array.from({length:3}).map((e,t)=>(0,n.jsxs)(C.A,{className:"flex h-6 w-24 items-center gap-2 border border-content3 px-2 data-[hover=true]:bg-transparent",children:[(0,n.jsx)(te.X,{className:"h-2 w-2 shrink-0 rounded-full"}),(0,n.jsx)(te.X,{className:"h-2 w-24 rounded-full"})]},t))})})})})]}),(0,n.jsx)("div",{children:p&&(null==p?void 0:p.length)>0?(0,n.jsx)(td.n,{"aria-label":"Teams",selectedKey:g,onSelectionChange:e=>v(e),classNames:{tabList:"hidden",base:"hidden p-0",panel:"p-0"},children:null==p?void 0:p.map(e=>(0,n.jsx)(tc.r,{title:e.name,children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 px-2 sm:grid-cols-3",children:[e&&e.agents&&e.agents.map((e,t)=>(0,n.jsx)(x,{agent:e,index:t},"".concat(t,"-").concat(e.id))),t.length>1&&(0,n.jsx)(C.A,{className:"relative flex h-14 w-full shrink-0 cursor-pointer select-none items-center justify-start gap-2 overflow-hidden rounded-xl px-3 transition-all",variant:"bordered",onPress:async()=>{(0,m.q)({eventName:"clickOver",target:"LoadMoreAgentsFromMarketplace"}),(0,l.Cl)("http://localhost:54112/".concat(t,"/marketplace"))},startContent:(0,n.jsx)("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:(0,n.jsx)(tm.Z,{className:"h-4 w-4 shrink-0"})}),children:"Load more agents"})]})},e.id))}):(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2 px-2 sm:grid-cols-3",children:Array.from({length:3}).map((e,t)=>(0,n.jsxs)("div",{className:"flex h-14 w-full items-center gap-2 rounded-xl border border-content3 bg-content1 px-3",children:[(0,n.jsx)(te.X,{className:"h-6 w-6 shrink-0 rounded-full"}),(0,n.jsx)(te.X,{className:"h-4 w-24 rounded-full"})]},t))})})]})})}function th(){var e,t;let{setCurrentProviderModel:a}=(0,s.o)(),{setSelectedProvider:r,selectedProvider:o}=(0,s.Y)(),{agents:i,mutate:d,isLoading:c}=eR(),{isConnected:u}=(0,z.T)(),{loginFromEventSource:p}=(0,N.R)();(0,w.useEffect)(()=>{d().then(e=>{e||d()})},[]);let h=e=>{let{agent:t,index:l}=e;return(0,n.jsxs)("div",{className:"relative flex h-14 w-40 shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-xl bg-content2 px-3 transition-all ".concat(l),onClick:()=>{null!=t&&t.is_frozen||(a("codegptplusbeta",{id:t.id,label:t.name,fromMarketplace:!1,image:t.image,description:"",welcome:null==t?void 0:t.welcome}),r("codegptplusbeta"),(0,ek.$)(),(0,m.q)({eventName:"clickOver",target:t.name+"WorkspaceUserAgent"}))},children:[(0,n.jsx)(J.J,{disableSkeleton:!0,src:t.image||"/logotypes/custom.png",alt:t.name,loading:"eager",classNames:{wrapper:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"}}),(0,n.jsx)("p",{className:"relative w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:t.name})]})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"grid gap-4",children:(0,n.jsxs)("section",{className:"grid gap-2 px-2",children:[(0,n.jsx)("h3",{className:"text-xs uppercase tracking-wider text-default-500",children:"My Agents"}),!u&&(0,n.jsx)("div",{className:"relative flex h-14 w-full items-center justify-between gap-2 rounded-xl border border-dashed border-content3 p-3",children:o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-sm",children:"Customize and improve your experience by creating an AI Agent Assistant"}),(0,n.jsx)(C.A,{variant:"flat",color:"primary",size:"sm",onPress:u?async()=>{await (0,l.Yo)("".concat(y.Ft,"/signup?source=vscode")),(0,m.q)({eventName:"clickOver",target:"WorkspaceCreateFirstAgent"})}:async()=>{let e=crypto.randomUUID();await (0,l.Yo)("".concat(y.Ft,"/signup?source=vscode&distinct_id=").concat(await (0,N.k)(),"&connection_id=").concat(e)),p(e),(0,m.q)({eventName:"ads",object:"adOnInputText",message:"Customize and improve your experience by creating an AI Agent Assistant"})},className:"shrink-0 border border-primary-400/10 text-foreground",startContent:(0,n.jsx)(tm.Z,{className:"h-4 w-4 shrink-0 rounded-full"}),children:"Create"})]}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(te.X,{className:"h-4 w-1/3 rounded-full"})})}),u?(0,n.jsxs)(tt.o,{orientation:"horizontal",className:"relative flex w-full items-center gap-2 overflow-x-auto",hideScrollBar:!0,children:[(0,n.jsx)(C.A,{className:"relative flex h-14 w-40 shrink-0 cursor-pointer items-center gap-2 rounded-xl px-3",variant:"bordered",onPress:async()=>{await (0,l.Yo)("".concat(y.Ft,"/signup?source=vscode")),(0,m.q)({eventName:"clickOver",target:"WorkspaceCreateAgent"})},startContent:(0,n.jsx)(tm.Z,{className:"h-6 w-6 shrink-0 rounded-full"}),children:"Create"}),!c&&(null==i?void 0:null===(e=i.agents)||void 0===e?void 0:e.length)>0?null==i?void 0:null===(t=i.agents)||void 0===t?void 0:t.map((e,t)=>(0,n.jsx)(h,{agent:e,index:t},e.id)):Array.from({length:3}).map((e,t)=>(0,n.jsxs)("div",{className:"flex h-14 w-full items-center gap-2 rounded-xl border border-content3 bg-content1 px-3",children:[(0,n.jsx)(te.X,{className:"h-6 w-6 shrink-0 rounded-full"}),(0,n.jsx)(te.X,{className:"h-4 w-24 rounded-full"})]},t))]}):null]})})})}function tg(e){let{activeSignIn:t=!1}=e,{userData:a}=(0,ej.v)(),{loginFromEventSource:s}=(0,N.R)();return(0,n.jsx)(n.Fragment,{children:!a||(null==a?void 0:a.loggedIn)?(0,n.jsxs)("div",{className:"fadeIn cta mb-2 flex select-none items-center justify-between px-3",children:[a&&(null==a?void 0:a.plan.toLowerCase())==="free"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"grid max-w-full gap-1 pl-1 pr-6",children:(0,n.jsx)("span",{className:"hyphens-none pr-6 text-sm",children:"Try out CodeGPT Plus for free and enjoy 50 daily interactions for 10 days"})}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(C.A,{variant:"flat",size:"sm",className:"border border-primary-400/10",onPress:()=>{(0,l.Yo)("".concat(y.Ft,"/en/plans")),(0,m.q)({eventName:"ads",object:"adOnInputText",message:"Try out CodeGPT Plus for free and enjoy 50 daily interactions for 10 days"})},children:"Upgrade"})})]}),a&&(null==a?void 0:a.plan.toLowerCase())==="free trial"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"grid max-w-full gap-1 pl-1 pr-6",children:(0,n.jsx)("span",{className:"text-sm",children:"Unlock unlimited interactions and full features with CodeGPT Plus"})}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(C.A,{variant:"flat",color:"primary",size:"sm",onPress:()=>{(0,l.Yo)("".concat(y.Ft,"/en/plans")),(0,m.q)({eventName:"ads",object:"adOnInputText",message:"Unlock unlimited interactions and full features with CodeGPT Plus"})},children:"Upgrade"})})]})]}):(0,n.jsxs)("div",{className:"fadeIn cta mb-2 flex select-none items-center justify-between px-3",children:[(0,n.jsx)("p",{className:"grid max-w-full gap-1 pr-6",children:(0,n.jsx)("span",{className:"text-sm",children:"Sign Up and get 10 Free Daily Interactions"})}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(C.A,{variant:"flat",size:"sm",onPress:async()=>{let e=crypto.randomUUID();await (0,l.Yo)("".concat(y.Ft,"/signup?source=vscode&distinct_id=").concat(await (0,N.k)(),"&connection_id=").concat(e)),s(e),(0,m.q)({eventName:"ads",object:"adOnInputText",message:"Sign Up and get 10 Free Daily Interactions"})},className:"border border-primary-400/10",children:"Sign Up"})})]})})}var tv=a(11005);function tx(e){let{isLoading:t,currentModel:a,clearChat:l}=e,{setCurrentProviderModel:r}=(0,s.o)(),o=(0,eo.X)(e=>e.groups),[i,d]=(0,w.useState)({id:"",name:"",rows:[],agents:[]}),c=e=>{let t=o.find(t=>t.agents.find(t=>t.id===e));t&&d(t)},{setSelectedProvider:u}=(0,s.Y)();return(0,w.useEffect)(()=>{c(null==a?void 0:a.id)},[a,o]),(0,n.jsx)(n.Fragment,{children:!t&&(0,n.jsxs)(tt.o,{orientation:"horizontal",className:"mb-1 flex gap-2 px-2",hideScrollBar:!0,children:[(0,n.jsx)(C.A,{isIconOnly:!0,startContent:(0,n.jsx)(tv.Z,{className:"w-4"}),variant:"bordered",size:"sm",isDisabled:t,onClick:()=>{u("codegptplusbeta"),(0,ek.$)(),r("codegptplusbeta",{label:"",id:"",fromMarketplace:!1,image:"",description:"",welcome:""}),l()}}),!t&&i.agents.map((e,l)=>(0,n.jsx)(C.A,{variant:e.id===a.id?"flat":"bordered",isDisabled:t||e.id===a.id,className:"animate-slideIn delay-".concat(l+1," h-8 min-h-8 w-36 shrink-0 justify-start px-2 text-sm opacity-0 transition-none ").concat(e.id===a.id?"order -10 border border-transparent":"order -".concat(l+2)),startContent:(0,n.jsx)("div",{className:"shrink-0",children:(0,n.jsx)(J.J,{loading:"eager",disableSkeleton:!0,src:e.image,alt:e.name,className:"h-3.5 w-3.5 rounded-full",classNames:{wrapper:"agent-avatar"}})}),endContent:(0,n.jsx)("span",{className:" ".concat(e.id===a.id?"":"text-default-500"," grow-0 truncate text-sm"),children:e.name}),onPress:()=>{(0,m.q)({eventName:"clickOver",target:e.name+"WorkspaceButton"}),r("codegptplusbeta",{label:e.name,id:e.id,image:e.image,fromMarketplace:!0,description:e.description})}},e.id))]})})}var tf=a(50940),tb=a(47813),tj=a(64728);function tw(e){let{label:t}=e,{userData:a}=(0,ej.v)(),{loginFromEventSource:r}=(0,N.R)(),o=(0,s.Y)(e=>e.selectedProvider),i=(null==a?void 0:a.dailyUsage)||0,d=(null==a?void 0:a.dailyMaxUsage)||-1;return -1===d||"codegptplusbeta"!==o?null:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(eC.z,{variant:"dot",size:"sm",classNames:{base:"border border-content2 bg-content2 text-default-500"},color:0===i?"success":i/d>.6&&i/d<1?"warning":i===d?"danger":"success",children:(0,n.jsx)("div",{children:(0,n.jsxs)("p",{children:[i," of ",d]})})}),i===d&&!a.loggedIn&&(0,n.jsxs)("div",{className:"flex items-center gap-1 rounded-xl text-sm",children:[(0,n.jsx)("span",{className:"cursor-pointer text-sm text-primary underline",onClick:async()=>{let e=crypto.randomUUID();await (0,l.Yo)("".concat(y.Ft,"/signup?source=vscode&distinct_id=").concat(await (0,N.k)(),"&connection_id=").concat(e)),r(e),(0,m.q)({eventName:"ads",object:"adOnInputText",message:"maxInteractions widget"})},children:"Sign Up"}),(0,n.jsx)("p",{className:"text-default-500",children:(0,n.jsx)("span",{children:"to get more interactions"})})]}),i>=d&&a.loggedIn&&(0,n.jsxs)("div",{className:"flex items-center gap-1 rounded-xl text-sm",children:[(0,n.jsx)("span",{className:"cursor-pointer text-sm text-primary underline",onClick:()=>{(0,l.Yo)("".concat(y.Ft,"/en/plans")),(0,m.q)({eventName:"ads",object:"adOnInputText",message:"maxInteractions"})},children:"Upgrade your plan"}),(0,n.jsx)("p",{className:"text-default-500",children:(0,n.jsx)("span",{children:"to get unlimited interactions"})})]})]})}var tk=e=>{var t,a,l,r,o,i,d,c,u,m,p,h,g,v,x,f,b,j,w;let{role:k,content:y,status:N,index:P,isLastMessage:A,isLoading:S,providerState:_,modelHistory:z,reload:T,image:M,codeSelection:I}=e,{userData:O}=(0,ej.v)(),{currentProviderModel:R}=(0,s.o)();return(0,n.jsx)(n.Fragment,{children:(e=>{var t,a;let{role:l,username:s,content:r,avatar:o,loader:i,fromMarketplace:d=!1,image:c,codeSelection:u,status:m}=e;return(0,n.jsxs)("div",{className:"mx-auto grid w-full grid-cols-1 items-start justify-start gap-3 place-self-stretch text-pretty text-foreground ".concat(l," ").concat(S?"streaming":"quiet"),children:[(0,n.jsxs)("div",{className:"flex items-center justify-start gap-2",children:["assistant"===l&&(0,n.jsx)(J.J,{src:o||(0,K.k)(s),alt:s||"assistant",width:24,height:24,loading:"eager",disableSkeleton:!0,className:"size-6 shrink-0 overflow-hidden rounded-full border-1 border-content2 shadow-md",classNames:{wrapper:"agent-avatar select-none size-6"}}),"user"===l&&(o?(0,n.jsx)(J.J,{src:o,alt:"user",width:24,height:24,loading:"eager",disableSkeleton:!0,className:"size-6 shrink-0 overflow-hidden rounded-full border-1 border-content2 shadow-md",classNames:{wrapper:"agent-avatar select-none size-6 border"}}):(0,n.jsx)("div",{className:"flex h-6 w-6 items-center justify-center rounded-full bg-indigo-500",children:(0,n.jsx)(tb.Z,{className:"h-4 w-4 shrink-0 rounded-full"})})),(0,n.jsxs)("p",{className:"grid tracking-wide",children:["assistant"===l&&d&&(0,n.jsx)("span",{className:"text-xs capitalize text-default-400",children:"CodeGPT"}),(0,n.jsx)("span",{className:"text-sm capitalize",children:s})]})]}),(0,n.jsx)("div",{children:r?(0,n.jsxs)("div",{className:"markdown flex flex-col gap-4 ".concat(l),children:[(null==c?void 0:c.base64)&&(0,n.jsx)("div",{className:"grid gap-2",children:(0,n.jsx)("div",{className:"grid max-w-48 gap-4",children:(0,n.jsxs)("div",{className:"relative grid grid-flow-col items-center justify-start gap-2 overflow-hidden rounded-lg border border-content3 p-2",children:[(0,n.jsx)("div",{className:"relative size-8 overflow-hidden rounded-lg",children:(0,n.jsx)("div",{className:"relative h-full w-full overflow-hidden",style:{backgroundImage:"url(".concat(c.base64,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})}),(0,n.jsxs)("p",{className:"relative grid w-full gap-0.5 overflow-hidden truncate",children:[(0,n.jsxs)("span",{className:"text-xs text-default-500",children:[(0,n.jsx)("span",{className:"uppercase",children:c.name&&c.name.includes(".")?null===(t=c.name)||void 0===t?void 0:t.split(".")[1]:""})," ","Image"]}),(0,n.jsx)("span",{className:"justify-end overflow-hidden text-ellipsis text-left text-xs",children:c.name})]})]})})}),"user"===l?(0,n.jsx)(n.Fragment,{children:u?(0,n.jsxs)(n.Fragment,{children:[r.replaceAll(u,""),(0,n.jsx)(tf.J,{content:u,codeBlockClassName:"max-h-80"})]}):r.split("\n\n").length>1?r.split("\n\n").map((e,t)=>{if(e.trim())return(0,n.jsx)("p",{children:e},t)}):null}):(0,n.jsx)(tf.J,{content:r,isLoading:S},"md"+P+String(S))]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(te.X,{className:"mb-2 h-4 w-full rounded-lg"}),(0,n.jsx)(te.X,{className:"mb-2 h-4 w-2/3 rounded-lg"})]})}),(0,n.jsx)("footer",{className:"flex gap-2",children:A&&"assistant"===l&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(tw,{}),m&&!(null==m?void 0:m.done)&&(0,n.jsxs)(C.A,{variant:"light",size:"sm",className:"capitalize text-default-500",children:[(0,n.jsx)(eb,{size:4}),null!==(a=null==m?void 0:m.message)&&void 0!==a?a:"Writing response..."]})]}),!S&&(0,n.jsx)(C.A,{onPress:()=>T&&T(),className:"group:hover:bg-transparent dark:group:hover:bg-transparent w-fit bg-transparent p-0 text-default-500 hover:bg-transparent hover:text-default-900 group-hover:bg-transparent dark:bg-transparent dark:hover:bg-transparent dark:group-hover:bg-transparent",variant:"light",size:"sm",isLoading:S,startContent:!S&&(0,n.jsx)(tj.Z,{className:"w-4 shrink-0"}),children:"Reload"})]})})]})})("assistant"===k?S&&A&&"assistant"===k&&!y?{role:k,username:"".concat((null==z?void 0:null===(a=z[_])||void 0===a?void 0:null===(t=a[P])||void 0===t?void 0:t.model)||(null==R?void 0:null===(l=R[_])||void 0===l?void 0:l.label)||""),avatar:null!=M?M:null==z?void 0:null===(o=z[_])||void 0===o?void 0:null===(r=o[P])||void 0===r?void 0:r.avatar,fromMarketplace:null!==(f=null==R?void 0:null===(i=R[_])||void 0===i?void 0:i.fromMarketplace)&&void 0!==f&&f,status:N}:{role:k,content:y,username:"".concat((null==z?void 0:null===(c=z[_])||void 0===c?void 0:null===(d=c[P])||void 0===d?void 0:d.model)||(null==R?void 0:null===(u=R[_])||void 0===u?void 0:u.label)||""),avatar:null!=M?M:null==z?void 0:null===(p=z[_])||void 0===p?void 0:null===(m=p[P])||void 0===m?void 0:m.avatar,fromMarketplace:null!==(b=null==R?void 0:null===(h=R[_])||void 0===h?void 0:h.fromMarketplace)&&void 0!==b&&b}:{role:k,content:y,username:(null==O?void 0:O.loggedIn)&&null!==(w=null!==(j=null==O?void 0:null===(g=O.user)||void 0===g?void 0:g.username)&&void 0!==j?j:null==O?void 0:null===(v=O.user)||void 0===v?void 0:v.fullName)&&void 0!==w?w:"User",avatar:(null==O?void 0:O.loggedIn)?null==O?void 0:null===(x=O.user)||void 0===x?void 0:x.avatarUrl:"",image:M,codeSelection:I})})};let ty=(0,w.createContext)({append:(e,t)=>Promise.resolve(void 0),error:void 0,handleInputChange(e){},handleSubmit(e,t){},input:"",isLoading:!1,messages:[],reload:e=>Promise.resolve(void 0),setInput(e){},setMessages(e){},stop(){},scrollToBottom(){}});function tN(){var e,t,a,o,i,c,u,p;let[h,g]=(0,w.useState)({}),[v,x]=(0,w.useState)({message:"",done:!1}),{selectedProvider:f}=(0,s.Y)(),{setOpen:b}=(0,T.U)(),{currentProviderModel:j,setCurrentProviderModel:y}=(0,s.o)(),N=null===(e=j[f])||void 0===e?void 0:e.id,P=null!==(p=null===(t=j[f])||void 0===t?void 0:t.fromMarketplace)&&void 0!==p&&p,{isLoading:S}=d(),{image:_,setImage:z,setShowTooltip:M}=ew(),I=(0,r.usePathname)().split("/")[1],{setOpen:O,setErrorMessage:R}=(0,e3.c)(),L=(0,eL.k)(e=>e.providers),F=(0,tn.RJ)({api:"/".concat(I,"/api/").concat(f),headers:{"Content-Type":"application/json",...N?{model:N}:{},...P?{fromMarketplace:"true"}:{}},sendExtraMessageFields:!0,onError:e=>{var t,a,s;let r=e.message,o=500;try{let n=JSON.parse(e.message);r=null!==(t=n.message)&&void 0!==t?t:r,o=null!==(a=Number(n.status))&&void 0!==a?a:o}catch(e){}401===o?b(!0):(O(!0),console.log("useChat Error Provider",f),R({title:f.includes("codegpt")?"Interaction Limit Reached":"Alert",subtitle:"".concat(f.includes("codegpt")?"CodeGPT Plus":"".concat(f," Message")),provider:"".concat(f.includes("codegpt")?"/logotypes/codegpt.png":"/logotypes/".concat(null!==(s=f.toLowerCase())&&void 0!==s?s:"codegpt",".png")),description:null==r?void 0:r.replaceAll('"',""),type:"alert",actions:f.includes("codegpt")?(0,n.jsx)(tg,{}):(0,n.jsx)(C.A,{size:"sm",variant:"light",className:"text-default-500",onPress:()=>{(0,m.q)({eventName:"clickOver",target:"goToModelsDocsButtonFromErrorCard"}),(0,l.Yo)("https://docs.codegpt.co/docs/category/ai-providers")},children:"Click here for more info about models"})}))},onFinish:()=>{setTimeout(()=>{let e=document.querySelectorAll(".assistant"),t=e[e.length-1],a=null==t?void 0:t.querySelectorAll(".language-label"),n=null==a?void 0:a.length;for(let e=0;e<n;e++){let t=a[e].textContent;(0,m.q)({eventName:"codeBlock",...t?{code_language:t}:{}})}},500)}}),{messages:D,setMessages:E,input:Z,isLoading:U,stop:V,reload:Y}=F,K=async e=>{var t,a,n,l;let{event:s,externalInput:r,chatRequestOptions:o,codeSelection:i="",fileName:d}=e;null===(t=B.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"end"});let c=(null===(a=j[f])||void 0===a?void 0:a.label)||L.find(e=>e.link===f).models[0],u=D.length+1,m=null===(n=j[f])||void 0===n?void 0:n.image;M(!1),(null===(l=j[f])||void 0===l?void 0:l.label)===""&&(console.log('modelState[providerState]?.label === ""'),y("codegptplusbeta",{label:"gpt-3.5-turbo",id:"gpt-3.5-turbo",image:"logotypes/openai.png",fromMarketplace:!1,description:"CodeGPT OpenAI GPT-3.5 Turbo"}),c="gpt-3.5-turbo",m="logotypes/openai.png"),g(e=>({...e,[f]:{...e[f],[u]:{model:c,avatar:m}}}));let p=["codegptplusbeta","ollama"].includes(f),h="codegptplusbeta"===f;if(null==s||s.preventDefault(),!Z&&!r)return;let v=[...D],b=crypto.randomUUID(),w={...p?{id:crypto.randomUUID()}:{},role:"user",content:r?"".concat(r,"\n").concat(i):Z,...""!==_.base64&&p?{attachment:_}:{},...""!==_.base64&&p?{image:_.base64}:{},...h?{statusId:b}:{},...i?{codeSelection:i}:{}};v.push(w),h&&fetch("https://api.codegpt.co/api/v1/chat/status/".concat(b)).then(async e=>{var t,a;let n=null===(t=e.body)||void 0===t?void 0:t.getReader();if(!n)return;let l=new TextDecoder;for(;;){let{done:e,value:t}=await (null==n?void 0:n.read());if(e)break;let s=null===(a=JSON.parse(l.decode(t).replaceAll("retry 1000\n\n",'{"message":"Connecting...","done":false}').replaceAll("data: ","").replaceAll("\n\n","")))||void 0===a?void 0:a.message;if(x({message:s,done:null==s?void 0:s.done}),s.done)break}}),E(v),Y(o).then(()=>z({base64:"",name:""}))},G=(null===(a=D[D.length-1])||void 0===a?void 0:a.role)==="assistant",H=()=>{E([]),g(e=>({...e,[f]:{}}))},W=(0,w.useRef)(null),B=(0,w.useRef)(null),{inView:J}=(0,ta.S1)(W),X=null===(i=D[D.length-1])||void 0===i?void 0:null===(o=i.content)||void 0===o?void 0:o.length,$=()=>{if(W.current){var e;null===(e=W.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})}};return(0,w.useEffect)(()=>{J&&U&&$()},[D.length,X,J,U]),(0,w.useEffect)(()=>{let e=e=>{"n"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),k.A.success("Start a New Chat"),H())};if(D.length>0&&!U)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[D,U]),(0,n.jsxs)(ty.Provider,{value:{...F,scrollToBottom:$},children:[(0,n.jsx)("div",{className:"relative flex h-screen max-h-[calc(100vh-3rem)] overflow-hidden",children:(0,n.jsxs)("div",{className:"grid grid-rows-[auto_1fr_auto]",children:[f?(0,n.jsx)(eQ,{clearChat:H,isLoading:U,selectedModel:N,messages:D.length}):(0,n.jsxs)("div",{className:"grid h-14 w-screen grid-flow-col items-center justify-start gap-2 p-2",children:[(0,n.jsx)(C.A,{variant:"bordered",className:"w-52",startContent:(0,n.jsx)(te.X,{className:"h-5 w-5 shrink-0 rounded-full"}),children:(0,n.jsx)(te.X,{className:"h-3 w-full rounded-full"})}),(0,n.jsx)(C.A,{variant:"bordered",startContent:(0,n.jsx)(te.X,{className:"h-5 w-5 shrink-0 rounded-full"}),isIconOnly:!0})]}),(0,n.jsxs)(e8,{direction:"vertical",className:"",children:[(0,n.jsx)(e9,{defaultSize:75,minSize:25,maxSize:85,children:(0,n.jsxs)(tt.o,{hideScrollBar:!0,className:"h-full gap-6 pt-4",size:16,ref:B,children:[(0,n.jsx)("div",{className:"mx-auto w-full max-w-3xl",children:f&&(null==j?void 0:null===(c=j[f])||void 0===c?void 0:c.label)!==""&&D.length>0?(0,n.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-8 px-4 py-2",children:[D.map((e,t)=>(0,n.jsx)(tk,{role:e.role,content:e.content,image:e.attachment,index:t,isLastMessage:t===D.length-1,isLoading:U,providerState:f,modelHistory:h,reload:Y,codeSelection:e.codeSelection,status:v},"msg-".concat(t))),U&&!G&&(0,n.jsx)(tk,{role:"assistant",content:"",index:D.length,isLastMessage:!0,isLoading:!0,providerState:f,modelHistory:h,reload:Y,status:v})]}):(0,n.jsx)("div",{className:"grid gap-4",children:f&&(null===(u=j[f])||void 0===u?void 0:u.id)?(0,n.jsx)(to,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(th,{}),(0,n.jsx)(tp,{port:I})]})})}),(0,n.jsx)("div",{className:"select-none",style:{background:"transparent",width:"100%",height:"12px",marginTop:"0.2rem"},ref:W})]})}),(0,n.jsx)(tg,{}),f&&N&&P?(0,n.jsx)(tx,{isLoading:U,currentModel:j[f],clearChat:H}):null,(0,n.jsx)(e7,{withHandle:!0}),(0,n.jsx)(e9,{defaultSize:25,minSize:15,children:(0,n.jsx)("footer",{className:"relative mx-auto flex h-full w-full flex-col gap-2 bg-content2",children:f?(0,n.jsx)(eM,{currentModel:j[f],modelState:j,providerState:f,onSubmit:K,isLoading:U,stop:V,clearChat:H}):null})})]})]})}),f?(0,n.jsxs)(n.Fragment,{children:[!S&&(0,n.jsx)(q,{},f),(0,n.jsx)(A,{}),(0,n.jsx)(e5,{})]}):null]})}},36833:function(e,t,a){"use strict";a.d(t,{T:function(){return s}});var n=a(57437),l=a(70075);let s=e=>{let{provider:t,width:a=40,height:s=40,className:r=""}=e,o=t.toLowerCase().replaceAll(" ",""),i=o.includes("codegpt")?"codegpt":null!=o?o:"custom";return(0,n.jsx)(l.J,{radius:"full",disableSkeleton:!0,loading:"lazy",src:"/logotypes/".concat(i,".png"),width:a,height:s,className:"agent-avatar ".concat(r),alt:i,classNames:{wrapper:"shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block",img:"rounded-full border border-content3 bg-content3 opacity-100 block"}})}},17019:function(e,t,a){"use strict";a.d(t,{E:function(){return r}});var n=a(16463),l=a(29039);let s=async e=>{let{port:t}=e;return new Promise(async e=>{setTimeout(async()=>{let a={isEnabled:!1,maxTokens:500,provider:"CodeGPT Plus",model:"Plus",delay:1200},n=await fetch("http://localhost:54112/".concat(t,"/api/autocomplete/config")).then(e=>e.json()).catch(()=>a);e({...a,...n})},500)})};function r(){let e=(0,n.usePathname)().split("/")[1],{data:t,mutate:a,isLoading:r,isValidating:o}=(0,l.ZP)("/api/autocomplete/config",()=>s({port:e}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:5e3});return{configuration:t,isLoading:null!=r?r:o,mutate:()=>new Promise(e=>{setTimeout(()=>{a().then(t=>{e(t)})},300)})}}},2193:function(e,t,a){"use strict";a.d(t,{T:function(){return i}});var n=a(58128),l=a(92992),s=a(16463),r=a(29039);let o=async e=>{let{provider:t,port:a}=e;return new Promise(async e=>{setTimeout(async()=>{e((await fetch("http://localhost:54112/".concat(a,"/api/").concat(t),{method:"HEAD"})).ok)},500)})};function i(){let e=(0,l.Y)(e=>e.selectedProvider),t=(0,s.usePathname)().split("/")[1],{mutate:a}=(0,n.v)(),{data:i,mutate:d}=(0,r.ZP)("/api/agents/".concat(e),()=>o({provider:e,port:t}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:1e3});return{isConnected:i,mutate:()=>(setTimeout(()=>a(),1e3),new Promise(e=>{setTimeout(()=>{d().then(t=>{e(t)})},300)}))}}},58128:function(e,t,a){"use strict";a.d(t,{v:function(){return r}});var n=a(16463),l=a(29039);let s=async e=>{let{port:t}=e;return fetch("http://localhost:54112/".concat(t,"/api/codegptplusbeta/me")).then(async e=>{var t;let a=await e.json();return{...a,loggedIn:!!(null==a?void 0:null===(t=a.org)||void 0===t?void 0:t.name)}})};function r(){let e=(0,n.usePathname)().split("/")[1],{data:t,mutate:a}=(0,l.ZP)("userData",()=>s({port:e}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:0,fallbackData:{dailyUsage:-1,dailyMaxUsage:-1,user:{username:"",fullName:"",avatarUrl:"",email:"",status:""},org:{name:"",image:""},plan:"",loggedIn:!1}});return{userData:t,mutate:a}}},27701:function(e,t,a){"use strict";a.d(t,{w:function(){return n}});let n=(0,a(39099).Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}))},41042:function(e,t,a){"use strict";a.d(t,{c:function(){return n}});let n=(0,a(39099).Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t})),message:{title:"",description:"",subtitle:"",actions:null,provider:"",type:"alert"},setErrorMessage:t=>{let{title:a,description:n,subtitle:l,actions:s,type:r,provider:o}=t;return e(()=>({message:{title:a||"System Message",description:n||"",subtitle:l||"",actions:s||null,provider:o||"",type:r||"alert"}}))}}))},95634:function(e,t,a){"use strict";a.d(t,{Lm:function(){return s},Vn:function(){return r},YS:function(){return o}});var n=a(57437);let l=e=>{let{children:t,className:a}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",width:"24px",viewBox:"0 -960 960 960",className:a,fill:"currentColor",stroke:"currentColor",children:t})},s=e=>{let{className:t}=e;return l({className:t,children:(0,n.jsx)("path",{d:"M451-404h58v-134h134v-58H509v-134h-58v134H317v58h134v134ZM104-130.92v-654.46q0-35.05 23.79-58.83Q151.57-868 186.62-868h586.76q35.05 0 58.83 23.79Q856-820.43 856-785.38v438.76q0 35.05-23.79 58.83Q808.43-264 773.38-264h-536.3L104-130.92ZM214-322h559.38q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93v-438.76q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H186.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v517.15L214-322Zm-52 0v-488 488Z"})})},r=e=>{let{className:t}=e;return l({className:t,children:(0,n.jsx)("path",{d:"M160-360v-80h640v80H160Zm0-160v-80h640v80H160Z"})})},o=e=>{let{className:t}=e;return l({className:t,children:(0,n.jsx)("path",{d:"m40-200 210-560h100l210 560h-96l-51-143H187l-51 143H40Zm176-224h168l-82-232h-4l-82 232Zm504 104v-120H600v-80h120v-120h80v120h120v80H800v120h-80Z"})})}},70654:function(e,t,a){"use strict";a.d(t,{q:function(){return n}}),a(74590);var n=(0,a(58064).$)("395448ad66a04a8ccb5507391feafc0ccded9c25")},43107:function(e,t,a){"use strict";a.d(t,{g:function(){return l}});var n=a(83047);let l=e=>{if(("c"===e.key.toLowerCase()||"KeyC"===e.code)&&(e.metaKey||e.ctrlKey)){e.preventDefault();let t=window.getSelection();t&&t.toString().length>0&&(0,n.zp)(t.toString())}if(("a"===e.key.toLowerCase()||"KeyA"===e.code)&&(e.metaKey||e.ctrlKey)){e.preventDefault();let{target:t}=e;if(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)t.select();else{let e=document.createRange();e.selectNodeContents(t);let a=window.getSelection();a&&(a.removeAllRanges(),a.addRange(e))}}}}},2436:function(e,t,a){"use strict";a.d(t,{R:function(){return r},k:function(){return s}});var n=a(63726),l=a(58128);let s=async()=>{let e=await fetch("http://localhost:54112/api/distinct_id");return(await e.json()).distinct_id},r=()=>{let{mutate:e}=(0,l.v)();return{loginFromEventSource:async t=>{let a=new EventSource("https://api.codegpt.co/api/v1/vscode/connection/".concat(t));a.onmessage=t=>{let{refresh_token:l,access_token:s,expires_at:r}=JSON.parse(t.data);(0,n.j)({accessToken:s,refreshToken:l,expiresAt:r}).then(()=>{e()}).finally(()=>{a.close()})}}}}},40400:function(){},97046:function(){}}]);